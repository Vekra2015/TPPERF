"use strict";(self.webpackChunkpanels=self.webpackChunkpanels||[]).push([[204],{9277:(re,o,d)=>{Object.defineProperty(o,"__esModule",{value:!0});var S=d(5484);function v(){return Math.round(Math.random()*1e3)}var m=function(){function h(){this.errorCount=0}return h.prototype.getDelay=function(){if(this.errorCount===0)return 0;var _=S.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT[Math.min(S.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1,this.errorCount)];return _*1e3+v()},h.prototype.countError=function(){this.errorCount<S.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1&&this.errorCount++},h.prototype.reset=function(){this.errorCount=0},h}();o.default=m},3545:function(re,o,d){var S=this&&this.__extends||function(){var N=function(F,L){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,j){P.__proto__=j}||function(P,j){for(var p in j)j.hasOwnProperty(p)&&(P[p]=j[p])},N(F,L)};return function(F,L){N(F,L);function P(){this.constructor=F}F.prototype=L===null?Object.create(L):(P.prototype=L.prototype,new P)}}(),v=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(o,"__esModule",{value:!0});var m=d(5044),h=v(d(4418)),_=function(N){S(F,N);function F(){return N!==null&&N.apply(this,arguments)||this}return F.prototype.makeGetRequest=function(L,P){return m.makeGetRequest(L,P)},F.prototype.getConfigDefaults=function(){return{autoUpdate:!1}},F}(h.default);o.default=_},5044:(re,o,d)=>{Object.defineProperty(o,"__esModule",{value:!0});var S=d(5484),v=d(4605),m=v.getLogger("DatafileManager"),h="GET",_=4;function N(P){var j=P.getAllResponseHeaders();if(j===null)return{};var p=j.split(`\r
`),A={};return p.forEach(function(T){var C=T.indexOf(": ");if(C>-1){var O=T.slice(0,C),U=T.slice(C+2);U.length>0&&(A[O]=U)}}),A}function F(P,j){Object.keys(P).forEach(function(p){var A=P[p];j.setRequestHeader(p,A)})}function L(P,j){var p=new XMLHttpRequest,A=new Promise(function(T,C){p.open(h,P,!0),F(j,p),p.onreadystatechange=function(){if(p.readyState===_){var O=p.status;if(O===0){C(new Error("Request error"));return}var U=N(p),M={statusCode:p.status,body:p.responseText,headers:U};T(M)}},p.timeout=S.REQUEST_TIMEOUT_MS,p.ontimeout=function(){m.error("Request timed out")},p.send()});return{responsePromise:A,abort:function(){p.abort()}}}o.makeGetRequest=L},5484:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_UPDATE_INTERVAL=5*60*1e3,o.MIN_UPDATE_INTERVAL=1e3,o.DEFAULT_URL_TEMPLATE="https://cdn.optimizely.com/datafiles/%s.json",o.DEFAULT_AUTHENTICATED_URL_TEMPLATE="https://config.optimizely.com/datafiles/auth/%s.json",o.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT=[0,8,16,32,64,128,256,512],o.REQUEST_TIMEOUT_MS=60*1e3},923:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var d=function(){function S(){this.listeners={},this.listenerId=1}return S.prototype.on=function(v,m){var h=this;this.listeners[v]||(this.listeners[v]={});var _=String(this.listenerId);return this.listenerId++,this.listeners[v][_]=m,function(){h.listeners[v]&&delete h.listeners[v][_]}},S.prototype.emit=function(v,m){var h=this.listeners[v];h&&Object.keys(h).forEach(function(_){var N=h[_];N(m)})},S.prototype.removeAllListeners=function(){this.listeners={}},S}();o.default=d},4418:function(re,o,d){var S=this&&this.__assign||function(){return S=Object.assign||function(C){for(var O,U=1,M=arguments.length;U<M;U++){O=arguments[U];for(var I in O)Object.prototype.hasOwnProperty.call(O,I)&&(C[I]=O[I])}return C},S.apply(this,arguments)},v=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(o,"__esModule",{value:!0});var m=d(4605),h=d(7126),_=v(d(923)),N=d(5484),F=v(d(9277)),L=m.getLogger("DatafileManager"),P="update";function j(C){return C>=N.MIN_UPDATE_INTERVAL}function p(C){return C>=200&&C<400}var A={get:function(){return Promise.resolve("")},set:function(){return Promise.resolve()},contains:function(){return Promise.resolve(!1)},remove:function(){return Promise.resolve()}},T=function(){function C(O){var U=this,M=S(S({},this.getConfigDefaults()),O),I=M.datafile,c=M.autoUpdate,b=c===void 0?!1:c,f=M.sdkKey,te=M.updateInterval,x=te===void 0?N.DEFAULT_UPDATE_INTERVAL:te,J=M.urlTemplate,se=J===void 0?N.DEFAULT_URL_TEMPLATE:J,Ee=M.cache,_e=Ee===void 0?A:Ee;this.cache=_e,this.cacheKey="opt-datafile-"+f,this.isReadyPromiseSettled=!1,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise(function(G,W){U.readyPromiseResolver=G,U.readyPromiseRejecter=W}),I?(this.currentDatafile=I,f||this.resolveReadyPromise()):this.currentDatafile="",this.isStarted=!1,this.datafileUrl=h.sprintf(se,f),this.emitter=new _.default,this.autoUpdate=b,j(x)?this.updateInterval=x:(L.warn("Invalid updateInterval %s, defaulting to %s",x,N.DEFAULT_UPDATE_INTERVAL),this.updateInterval=N.DEFAULT_UPDATE_INTERVAL),this.currentTimeout=null,this.currentRequest=null,this.backoffController=new F.default,this.syncOnCurrentRequestComplete=!1}return C.prototype.get=function(){return this.currentDatafile},C.prototype.start=function(){this.isStarted||(L.debug("Datafile manager started"),this.isStarted=!0,this.backoffController.reset(),this.setDatafileFromCacheIfAvailable(),this.syncDatafile())},C.prototype.stop=function(){return L.debug("Datafile manager stopped"),this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.emitter.removeAllListeners(),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},C.prototype.onReady=function(){return this.readyPromise},C.prototype.on=function(O,U){return this.emitter.on(O,U)},C.prototype.onRequestRejected=function(O){!this.isStarted||(this.backoffController.countError(),O instanceof Error?L.error("Error fetching datafile: %s",O.message,O):typeof O=="string"?L.error("Error fetching datafile: %s",O):L.error("Error fetching datafile"))},C.prototype.onRequestResolved=function(O){if(!!this.isStarted){typeof O.statusCode!="undefined"&&p(O.statusCode)?this.backoffController.reset():this.backoffController.countError(),this.trySavingLastModified(O.headers);var U=this.getNextDatafileFromResponse(O);if(U!=="")if(L.info("Updating datafile from response"),this.currentDatafile=U,this.cache.set(this.cacheKey,U),!this.isReadyPromiseSettled)this.resolveReadyPromise();else{var M={datafile:U};this.emitter.emit(P,M)}}},C.prototype.onRequestComplete=function(){!this.isStarted||(this.currentRequest=null,!this.isReadyPromiseSettled&&!this.autoUpdate&&this.rejectReadyPromise(new Error("Failed to become ready")),this.autoUpdate&&this.syncOnCurrentRequestComplete&&this.syncDatafile(),this.syncOnCurrentRequestComplete=!1)},C.prototype.syncDatafile=function(){var O=this,U={};this.lastResponseLastModified&&(U["if-modified-since"]=this.lastResponseLastModified),L.debug("Making datafile request to url %s with headers: %s",this.datafileUrl,function(){return JSON.stringify(U)}),this.currentRequest=this.makeGetRequest(this.datafileUrl,U);var M=function(){O.onRequestComplete()},I=function(b){O.onRequestResolved(b)},c=function(b){O.onRequestRejected(b)};this.currentRequest.responsePromise.then(I,c).then(M,M),this.autoUpdate&&this.scheduleNextUpdate()},C.prototype.resolveReadyPromise=function(){this.readyPromiseResolver(),this.isReadyPromiseSettled=!0},C.prototype.rejectReadyPromise=function(O){this.readyPromiseRejecter(O),this.isReadyPromiseSettled=!0},C.prototype.scheduleNextUpdate=function(){var O=this,U=this.backoffController.getDelay(),M=Math.max(U,this.updateInterval);L.debug("Scheduling sync in %s ms",M),this.currentTimeout=setTimeout(function(){O.currentRequest?O.syncOnCurrentRequestComplete=!0:O.syncDatafile()},M)},C.prototype.getNextDatafileFromResponse=function(O){return L.debug("Response status code: %s",O.statusCode),typeof O.statusCode=="undefined"||O.statusCode===304?"":p(O.statusCode)?O.body:""},C.prototype.trySavingLastModified=function(O){var U=O["last-modified"]||O["Last-Modified"];typeof U!="undefined"&&(this.lastResponseLastModified=U,L.debug("Saved last modified header value from response: %s",this.lastResponseLastModified))},C.prototype.setDatafileFromCacheIfAvailable=function(){var O=this;this.cache.get(this.cacheKey).then(function(U){O.isStarted&&!O.isReadyPromiseSettled&&U!==""&&(L.debug("Using datafile from cache"),O.currentDatafile=U,O.resolveReadyPromise())})},C}();o.default=T},164:(re,o,d)=>{Object.defineProperty(o,"__esModule",{value:!0});var S=d(3545);o.HttpPollingDatafileManager=S.default},6603:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0})},2811:(re,o,d)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.sendEventNotification=o.getQueue=o.validateAndGetBatchSize=o.validateAndGetFlushInterval=o.DEFAULT_BATCH_SIZE=o.DEFAULT_FLUSH_INTERVAL=void 0;var S=d(3177),v=d(4605),m=d(7126);o.DEFAULT_FLUSH_INTERVAL=3e4,o.DEFAULT_BATCH_SIZE=10;var h=v.getLogger("EventProcessor");function _(P){return P<=0&&(h.warn("Invalid flushInterval "+P+", defaulting to "+o.DEFAULT_FLUSH_INTERVAL),P=o.DEFAULT_FLUSH_INTERVAL),P}o.validateAndGetFlushInterval=_;function N(P){return P=Math.floor(P),P<1&&(h.warn("Invalid batchSize "+P+", defaulting to "+o.DEFAULT_BATCH_SIZE),P=o.DEFAULT_BATCH_SIZE),P=Math.max(1,P),P}o.validateAndGetBatchSize=N;function F(P,j,p,A){var T;return P>1?T=new S.DefaultEventQueue({flushInterval:j,maxQueueSize:P,sink:p,batchComparator:A}):T=new S.SingleEventQueue({sink:p}),T}o.getQueue=F;function L(P,j){P&&P.sendNotifications(m.NOTIFICATION_TYPES.LOG_EVENT,j)}o.sendEventNotification=L},3177:(re,o,d)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DefaultEventQueue=o.SingleEventQueue=void 0;var S=d(4605),v=S.getLogger("EventProcessor"),m=function(){function N(F){var L=F.timeout,P=F.callback;this.timeout=Math.max(L,0),this.callback=P}return N.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},N.prototype.refresh=function(){this.stop(),this.start()},N.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},N}(),h=function(){function N(F){var L=F.sink;this.sink=L}return N.prototype.start=function(){},N.prototype.stop=function(){return Promise.resolve()},N.prototype.enqueue=function(F){this.sink([F])},N}();o.SingleEventQueue=h;var _=function(){function N(F){var L=F.flushInterval,P=F.maxQueueSize,j=F.sink,p=F.batchComparator;this.buffer=[],this.maxQueueSize=Math.max(P,1),this.sink=j,this.batchComparator=p,this.timer=new m({callback:this.flush.bind(this),timeout:L}),this.started=!1}return N.prototype.start=function(){this.started=!0},N.prototype.stop=function(){this.started=!1;var F=this.sink(this.buffer);return this.buffer=[],this.timer.stop(),F},N.prototype.enqueue=function(F){if(!this.started){v.warn("Queue is stopped, not accepting event");return}var L=this.buffer[0];L&&!this.batchComparator(L,F)&&this.flush(),this.buffer.length===0&&this.timer.refresh(),this.buffer.push(F),this.buffer.length>=this.maxQueueSize&&this.flush()},N.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},N}();o.DefaultEventQueue=_},329:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.areEventContextsEqual=void 0;function d(S,v){var m=S.context,h=v.context;return m.accountId===h.accountId&&m.projectId===h.projectId&&m.clientName===h.clientName&&m.clientVersion===h.clientVersion&&m.revision===h.revision&&m.anonymizeIP===h.anonymizeIP&&m.botFiltering===h.botFiltering}o.areEventContextsEqual=d},6066:function(re,o,d){var S=this&&this.__createBinding||(Object.create?function(m,h,_,N){N===void 0&&(N=_),Object.defineProperty(m,N,{enumerable:!0,get:function(){return h[_]}})}:function(m,h,_,N){N===void 0&&(N=_),m[N]=h[_]}),v=this&&this.__exportStar||function(m,h){for(var _ in m)_!=="default"&&!Object.prototype.hasOwnProperty.call(h,_)&&S(h,m,_)};Object.defineProperty(o,"__esModule",{value:!0}),v(d(329),o),v(d(2811),o),v(d(6603),o),v(d(5897),o),v(d(2516),o),v(d(9614),o),v(d(5412),o)},5897:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0})},2516:function(re,o,d){var S=this&&this.__extends||function(){var L=function(P,j){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,A){p.__proto__=A}||function(p,A){for(var T in A)Object.prototype.hasOwnProperty.call(A,T)&&(p[T]=A[T])},L(P,j)};return function(P,j){L(P,j);function p(){this.constructor=P}P.prototype=j===null?Object.create(j):(p.prototype=j.prototype,new p)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStoragePendingEventsDispatcher=o.PendingEventsDispatcher=void 0;var v=d(4605),m=d(5461),h=d(7126),_=v.getLogger("EventProcessor"),N=function(){function L(P){var j=P.eventDispatcher,p=P.store;this.dispatcher=j,this.store=p}return L.prototype.dispatchEvent=function(P,j){this.send({uuid:h.generateUUID(),timestamp:h.getTimestamp(),request:P},j)},L.prototype.sendPendingEvents=function(){var P=this,j=this.store.values();_.debug("Sending %s pending events from previous page",j.length),j.forEach(function(p){try{P.send(p,function(){})}catch(A){}})},L.prototype.send=function(P,j){var p=this;this.store.set(P.uuid,P),this.dispatcher.dispatchEvent(P.request,function(A){p.store.remove(P.uuid),j(A)})},L}();o.PendingEventsDispatcher=N;var F=function(L){S(P,L);function P(j){var p=j.eventDispatcher;return L.call(this,{eventDispatcher:p,store:new m.LocalStorageStore({maxValues:100,key:"fs_optly_pending_events"})})||this}return P}(N);o.LocalStoragePendingEventsDispatcher=F},5461:(re,o,d)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LocalStorageStore=void 0;var S=d(7126),v=d(4605),m=v.getLogger("EventProcessor"),h=function(){function _(N){var F=N.key,L=N.maxValues,P=L===void 0?1e3:L;this.LS_KEY=F,this.maxValues=P}return _.prototype.get=function(N){return this.getMap()[N]||null},_.prototype.set=function(N,F){var L=this.getMap();L[N]=F,this.replace(L)},_.prototype.remove=function(N){var F=this.getMap();delete F[N],this.replace(F)},_.prototype.values=function(){return S.objectValues(this.getMap())},_.prototype.clear=function(){this.replace({})},_.prototype.replace=function(N){try{window.localStorage&&localStorage.setItem(this.LS_KEY,JSON.stringify(N)),this.clean()}catch(F){m.error(F)}},_.prototype.clean=function(){var N=this.getMap(),F=Object.keys(N),L=F.length-this.maxValues;if(!(L<1)){var P=F.map(function(p){return{key:p,value:N[p]}});P.sort(function(p,A){return p.value.timestamp-A.value.timestamp});for(var j=0;j<L;j++)delete N[P[j].key];this.replace(N)}},_.prototype.getMap=function(){try{var N=window.localStorage&&localStorage.getItem(this.LS_KEY);if(N)return JSON.parse(N)||{}}catch(F){m.error(F)}return{}},_}();o.LocalStorageStore=h},7196:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var d=function(){function S(){this.reqsInFlightCount=0,this.reqsCompleteResolvers=[]}return S.prototype.trackRequest=function(v){var m=this;this.reqsInFlightCount++;var h=function(){m.reqsInFlightCount--,m.reqsInFlightCount===0&&(m.reqsCompleteResolvers.forEach(function(_){return _()}),m.reqsCompleteResolvers=[])};v.then(h,h)},S.prototype.onRequestsComplete=function(){var v=this;return new Promise(function(m){v.reqsInFlightCount===0?m():v.reqsCompleteResolvers.push(m)})},S}();o.default=d},9614:function(re,o){var d=this&&this.__assign||function(){return d=Object.assign||function(p){for(var A,T=1,C=arguments.length;T<C;T++){A=arguments[T];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(p[O]=A[O])}return p},d.apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.formatEvents=o.buildConversionEventV1=o.buildImpressionEventV1=o.makeBatchedEventV1=void 0;var S="campaign_activated",v="custom",m="$opt_bot_filtering";function h(p){var A=[],T=p[0];return p.forEach(function(C){if(C.type==="conversion"||C.type==="impression"){var O=F(C);C.type==="impression"?O.snapshots.push(N(C)):C.type==="conversion"&&O.snapshots.push(_(C)),A.push(O)}}),{client_name:T.context.clientName,client_version:T.context.clientVersion,account_id:T.context.accountId,project_id:T.context.projectId,revision:T.context.revision,anonymize_ip:T.context.anonymizeIP,enrich_decisions:!0,visitors:A}}o.makeBatchedEventV1=h;function _(p){var A=d({},p.tags);delete A.revenue,delete A.value;var T={entity_id:p.event.id,key:p.event.key,timestamp:p.timestamp,uuid:p.uuid};return p.tags&&(T.tags=p.tags),p.value!=null&&(T.value=p.value),p.revenue!=null&&(T.revenue=p.revenue),{events:[T]}}function N(p){var A,T,C=p.layer,O=p.experiment,U=p.variation,M=p.ruleKey,I=p.flagKey,c=p.ruleType,b=p.enabled,f=C?C.id:null,te=(A=O==null?void 0:O.id)!==null&&A!==void 0?A:"",x=(T=U==null?void 0:U.id)!==null&&T!==void 0?T:"",J=U?U.key:"";return{decisions:[{campaign_id:f,experiment_id:te,variation_id:x,metadata:{flag_key:I,rule_key:M,rule_type:c,variation_key:J,enabled:b}}],events:[{entity_id:f,timestamp:p.timestamp,key:S,uuid:p.uuid}]}}function F(p){var A={snapshots:[],visitor_id:p.user.id,attributes:[]};return p.user.attributes.forEach(function(T){A.attributes.push({entity_id:T.entityId,key:T.key,type:"custom",value:T.value})}),typeof p.context.botFiltering=="boolean"&&A.attributes.push({entity_id:m,key:m,type:v,value:p.context.botFiltering}),A}function L(p){var A=F(p);return A.snapshots.push(N(p)),{client_name:p.context.clientName,client_version:p.context.clientVersion,account_id:p.context.accountId,project_id:p.context.projectId,revision:p.context.revision,anonymize_ip:p.context.anonymizeIP,enrich_decisions:!0,visitors:[A]}}o.buildImpressionEventV1=L;function P(p){var A=F(p);return A.snapshots.push(_(p)),{client_name:p.context.clientName,client_version:p.context.clientVersion,account_id:p.context.accountId,project_id:p.context.projectId,revision:p.context.revision,anonymize_ip:p.context.anonymizeIP,enrich_decisions:!0,visitors:[A]}}o.buildConversionEventV1=P;function j(p){return{url:"https://logx.optimizely.com/v1/events",httpVerb:"POST",params:h(p)}}o.formatEvents=j},5412:function(re,o,d){var S=this&&this.__awaiter||function(p,A,T,C){function O(U){return U instanceof T?U:new T(function(M){M(U)})}return new(T||(T=Promise))(function(U,M){function I(f){try{b(C.next(f))}catch(te){M(te)}}function c(f){try{b(C.throw(f))}catch(te){M(te)}}function b(f){f.done?U(f.value):O(f.value).then(I,c)}b((C=C.apply(p,A||[])).next())})},v=this&&this.__generator||function(p,A){var T={label:0,sent:function(){if(U[0]&1)throw U[1];return U[1]},trys:[],ops:[]},C,O,U,M;return M={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function I(b){return function(f){return c([b,f])}}function c(b){if(C)throw new TypeError("Generator is already executing.");for(;T;)try{if(C=1,O&&(U=b[0]&2?O.return:b[0]?O.throw||((U=O.return)&&U.call(O),0):O.next)&&!(U=U.call(O,b[1])).done)return U;switch(O=0,U&&(b=[b[0]&2,U.value]),b[0]){case 0:case 1:U=b;break;case 4:return T.label++,{value:b[1],done:!1};case 5:T.label++,O=b[1],b=[0];continue;case 7:b=T.ops.pop(),T.trys.pop();continue;default:if(U=T.trys,!(U=U.length>0&&U[U.length-1])&&(b[0]===6||b[0]===2)){T=0;continue}if(b[0]===3&&(!U||b[1]>U[0]&&b[1]<U[3])){T.label=b[1];break}if(b[0]===6&&T.label<U[1]){T.label=U[1],U=b;break}if(U&&T.label<U[2]){T.label=U[2],T.ops.push(b);break}U[2]&&T.ops.pop(),T.trys.pop();continue}b=A.call(p,T)}catch(f){b=[6,f],O=0}finally{C=U=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},m=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(o,"__esModule",{value:!0}),o.LogTierV1EventProcessor=void 0;var h=d(4605),_=d(2811),N=m(d(7196)),F=d(329),L=d(9614),P=h.getLogger("LogTierV1EventProcessor"),j=function(){function p(A){var T=A.dispatcher,C=A.flushInterval,O=C===void 0?_.DEFAULT_FLUSH_INTERVAL:C,U=A.batchSize,M=U===void 0?_.DEFAULT_BATCH_SIZE:U,I=A.notificationCenter;this.dispatcher=T,this.notificationCenter=I,this.requestTracker=new N.default,O=_.validateAndGetFlushInterval(O),M=_.validateAndGetBatchSize(M),this.queue=_.getQueue(M,O,this.drainQueue.bind(this),F.areEventContextsEqual)}return p.prototype.drainQueue=function(A){var T=this,C=new Promise(function(O){if(P.debug("draining queue with %s events",A.length),A.length===0){O();return}var U=L.formatEvents(A);T.dispatcher.dispatchEvent(U,function(){O()}),_.sendEventNotification(T.notificationCenter,U)});return this.requestTracker.trackRequest(C),C},p.prototype.process=function(A){this.queue.enqueue(A)},p.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(A){P.error('Error stopping EventProcessor: "%s"',A.message,A)}return Promise.resolve()},p.prototype.start=function(){return S(this,void 0,void 0,function(){return v(this,function(A){return this.queue.start(),[2]})})},p}();o.LogTierV1EventProcessor=j},5225:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var d=function(){function _(){}return _.prototype.handleError=function(N){},_}();o.NoopErrorHandler=d;var S=new d;function v(_){S=_}o.setErrorHandler=v;function m(){return S}o.getErrorHandler=m;function h(){S=new d}o.resetErrorHandler=h},4605:(re,o,d)=>{function S(v){for(var m in v)o.hasOwnProperty(m)||(o[m]=v[m])}Object.defineProperty(o,"__esModule",{value:!0}),S(d(5225)),S(d(4038)),S(d(7604))},7604:function(re,o,d){var S=this&&this.__spreadArrays||function(){for(var I=0,c=0,b=arguments.length;c<b;c++)I+=arguments[c].length;for(var f=Array(I),te=0,c=0;c<b;c++)for(var x=arguments[c],J=0,se=x.length;J<se;J++,te++)f[te]=x[J];return f};Object.defineProperty(o,"__esModule",{value:!0});var v=d(5225),m=d(7126),h=d(4038),_={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4};function N(I){return typeof I!="string"||(I=I.toUpperCase(),I==="WARN"&&(I="WARNING"),!_[I])?I:_[I]}var F=function(){function I(){this.defaultLoggerFacade=new p,this.loggers={}}return I.prototype.getLogger=function(c){return c?(this.loggers[c]||(this.loggers[c]=new p({messagePrefix:c})),this.loggers[c]):this.defaultLoggerFacade},I}(),L=function(){function I(c){c===void 0&&(c={}),this.logLevel=h.LogLevel.NOTSET,c.logLevel!==void 0&&m.isValidEnum(h.LogLevel,c.logLevel)&&this.setLogLevel(c.logLevel),this.logToConsole=c.logToConsole!==void 0?!!c.logToConsole:!0,this.prefix=c.prefix!==void 0?c.prefix:"[OPTIMIZELY]"}return I.prototype.log=function(c,b){if(!(!this.shouldLog(c)||!this.logToConsole)){var f=this.prefix+" - "+this.getLogLevelName(c)+" "+this.getTime()+" "+b;this.consoleLog(c,[f])}},I.prototype.setLogLevel=function(c){c=N(c),!m.isValidEnum(h.LogLevel,c)||c===void 0?this.logLevel=h.LogLevel.ERROR:this.logLevel=c},I.prototype.getTime=function(){return new Date().toISOString()},I.prototype.shouldLog=function(c){return c>=this.logLevel},I.prototype.getLogLevelName=function(c){switch(c){case h.LogLevel.DEBUG:return"DEBUG";case h.LogLevel.INFO:return"INFO ";case h.LogLevel.WARNING:return"WARN ";case h.LogLevel.ERROR:return"ERROR";default:return"NOTSET"}},I.prototype.consoleLog=function(c,b){switch(c){case h.LogLevel.DEBUG:console.log.apply(console,b);break;case h.LogLevel.INFO:console.info.apply(console,b);break;case h.LogLevel.WARNING:console.warn.apply(console,b);break;case h.LogLevel.ERROR:console.error.apply(console,b);break;default:console.log.apply(console,b)}},I}();o.ConsoleLogHandler=L;var P=h.LogLevel.NOTSET,j=null,p=function(){function I(c){c===void 0&&(c={}),this.messagePrefix="",c.messagePrefix&&(this.messagePrefix=c.messagePrefix)}return I.prototype.log=function(c,b){for(var f=[],te=2;te<arguments.length;te++)f[te-2]=arguments[te];this.internalLog(N(c),{message:b,splat:f})},I.prototype.info=function(c){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.namedLog(h.LogLevel.INFO,c,b)},I.prototype.debug=function(c){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.namedLog(h.LogLevel.DEBUG,c,b)},I.prototype.warn=function(c){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.namedLog(h.LogLevel.WARNING,c,b)},I.prototype.error=function(c){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.namedLog(h.LogLevel.ERROR,c,b)},I.prototype.format=function(c){return(this.messagePrefix?this.messagePrefix+": ":"")+m.sprintf.apply(void 0,S([c.message],c.splat))},I.prototype.internalLog=function(c,b){!j||c<P||(j.log(c,this.format(b)),b.error&&b.error instanceof Error&&v.getErrorHandler().handleError(b.error))},I.prototype.namedLog=function(c,b,f){var te;if(b instanceof Error){te=b,b=te.message,this.internalLog(c,{error:te,message:b,splat:f});return}if(f.length===0){this.internalLog(c,{message:b,splat:f});return}var x=f[f.length-1];x instanceof Error&&(te=x,f.splice(-1)),this.internalLog(c,{message:b,error:te,splat:f})},I}(),A=new F;function T(I){return A.getLogger(I)}o.getLogger=T;function C(I){j=I}o.setLogHandler=C;function O(I){I=N(I),!m.isValidEnum(h.LogLevel,I)||I===void 0?P=h.LogLevel.ERROR:P=I}o.setLogLevel=O;function U(){return P}o.getLogLevel=U;function M(){A=new F,P=h.LogLevel.NOTSET}o.resetLogger=M},4038:(re,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var d;(function(S){S[S.NOTSET=0]="NOTSET",S[S.DEBUG=1]="DEBUG",S[S.INFO=2]="INFO",S[S.WARNING=3]="WARNING",S[S.ERROR=4]="ERROR"})(d=o.LogLevel||(o.LogLevel={}))},7126:(re,o,d)=>{Object.defineProperty(o,"__esModule",{value:!0});var S=d(1094);function v(){return S.v4()}o.generateUUID=v;function m(){return new Date().getTime()}o.getTimestamp=m;function h(A,T){for(var C=!1,O=Object.keys(A),U=0;U<O.length;U++)if(T===A[O[U]]){C=!0;break}return C}o.isValidEnum=h;function _(A,T){var C={};return A.forEach(function(O){var U=T(O);C[U]=C[U]||[],C[U].push(O)}),N(C)}o.groupBy=_;function N(A){return Object.keys(A).map(function(T){return A[T]})}o.objectValues=N;function F(A){return Object.keys(A).map(function(T){return[T,A[T]]})}o.objectEntries=F;function L(A,T){for(var C,O=0,U=A;O<U.length;O++){var M=U[O];if(T(M)){C=M;break}}return C}o.find=L;function P(A,T){var C={};return A.forEach(function(O){var U=T(O);C[U]=O}),C}o.keyBy=P;function j(A){for(var T=[],C=1;C<arguments.length;C++)T[C-1]=arguments[C];var O=0;return A.replace(/%s/g,function(){var U=T[O++],M=typeof U;return M==="function"?U():M==="string"?U:String(U)})}o.sprintf=j;var p;(function(A){A.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",A.DECISION="DECISION:type, userId, attributes, decisionInfo",A.LOG_EVENT="LOG_EVENT:logEvent",A.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",A.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"})(p=o.NOTIFICATION_TYPES||(o.NOTIFICATION_TYPES={}))},165:(re,o,d)=>{function S(a){return a&&typeof a=="object"&&"default"in a?a.default:a}Object.defineProperty(o,"__esModule",{value:!0});var v=d(4605),m=d(6066),h=S(d(1094)),_=S(d(5436)),N=d(164),F=function(){return(F=Object.assign||function(a){for(var n,i=1,u=arguments.length;i<u;i++)for(var l in n=arguments[i])Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=n[l]);return a}).apply(this,arguments)};function L(){for(var a=0,n=0,i=arguments.length;n<i;n++)a+=arguments[n].length;var u=Array(a),l=0;for(n=0;n<i;n++)for(var g=arguments[n],E=0,V=g.length;E<V;E++,l++)u[l]=g[E];return u}var P=Math.pow(2,53);function j(a){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(!a)return{};if(typeof Object.assign=="function")return Object.assign.apply(Object,L([a],n));for(var u=Object(a),l=0;l<n.length;l++){var g=n[l];if(g!=null)for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&(u[E]=g[E])}return u}function p(a,n){return a?O(a,function(i){return i[n]}):{}}function A(a){return Object.keys(a).map(function(n){return a[n]})}function T(a){return Object.keys(a).map(function(n){return[n,a[n]]})}function C(a,n){for(var i,u=0,l=a;u<l.length;u++){var g=l[u];if(n(g)){i=g;break}}return i}function O(a,n){var i={};return a.forEach(function(u){var l=n(u);i[l]=u}),i}function U(a){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var u=0;return a.replace(/%s/g,function(){var l=n[u++],g=typeof l;return g==="function"?l():g==="string"?l:String(l)})}var M,I={assign:j,currentTimestamp:function(){return Math.round(new Date().getTime())},isSafeInteger:function(a){return typeof a=="number"&&Math.abs(a)<=P},keyBy:p,uuid:function(){return h()},isNumber:function(a){return typeof a=="number"},getTimestamp:function(){return new Date().getTime()},isValidEnum:function(a,n){for(var i=!1,u=Object.keys(a),l=0;l<u.length;l++)if(n===a[u[l]]){i=!0;break}return i},groupBy:function(a,n){var i={};return a.forEach(function(u){var l=n(u);i[l]=i[l]||[],i[l].push(u)}),A(i)},objectValues:A,objectEntries:T,find:C,keyByUtil:O,sprintf:U},c={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},b={CONDITION_EVALUATOR_ERROR:"%s: Error evaluating audience condition of type %s: %s",DATAFILE_AND_SDK_KEY_MISSING:"%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely",EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_CONFIG:"%s: Provided Optimizely config is in an invalid format.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s",INVALID_VARIATION_KEY:"%s: Provided variation key is in an invalid format."},f={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_KEY_NOT_FOUND:"%s: Event key %s is not in datafile.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_DEFAULT_DECIDE_OPTIONS:"%s: Provided default decide options is not an array.",INVALID_DECIDE_OPTIONS:"%s: Provided decide options is not an array. Using default decide options.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is not in "Running" state. Not activating user.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",UNRECOGNIZED_DECIDE_OPTION:"%s: Unrecognized decide option %s provided.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned bucket %s to user with bucketing ID %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Feature "%s" is not enabled for user %s. Returning the default variable value "%s".',VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Variable "%s" is not used in variation "%s". Returning default value.',USER_RECEIVED_VARIABLE_VALUE:'%s: Got variable value "%s" for variable "%s" of feature flag "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId",EVALUATING_AUDIENCE:'%s: Starting to evaluate audience "%s" with conditions: %s.',EVALUATING_AUDIENCES_COMBINED:'%s: Evaluating audiences for %s "%s": %s.',AUDIENCE_EVALUATION_RESULT:'%s: Audience "%s" evaluated to %s.',AUDIENCE_EVALUATION_RESULT_COMBINED:"%s: Audiences for %s %s collectively evaluated to %s.",MISSING_ATTRIBUTE_VALUE:'%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute "%s".',UNEXPECTED_CONDITION_VALUE:"%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.",UNEXPECTED_TYPE:'%s: Audience condition %s evaluated to UNKNOWN because a value of type "%s" was passed for user attribute "%s".',UNEXPECTED_TYPE_NULL:'%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute "%s".',UNKNOWN_CONDITION_TYPE:"%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.",UNKNOWN_MATCH_TYPE:"%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.",UPDATED_OPTIMIZELY_CONFIG:"%s: Updated Optimizely config to revision %s (project id %s)",OUT_OF_BOUNDS:'%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute "%s" is not in the range [-2^53, +2^53].',UNABLE_TO_ATTACH_UNLOAD:'%s: unable to bind optimizely.close() to page unload event: "%s"'},te={BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent",FORCED_DECISION_NULL_RULE_KEY:"$opt_null_rule_key"},x={AB_TEST:"ab-test",FEATURE:"feature",FEATURE_TEST:"feature-test",FEATURE_VARIABLE:"feature-variable",ALL_FEATURE_VARIABLES:"all-feature-variables",FLAG:"flag"},J={FEATURE_TEST:"feature-test",ROLLOUT:"rollout",EXPERIMENT:"experiment"},se={RULE:"rule",EXPERIMENT:"experiment"},Ee={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string",JSON:"json"},_e={V2:"2",V3:"3",V4:"4"},G={SDK_NOT_READY:"Optimizely SDK not configured properly yet.",FLAG_KEY_INVALID:'No flag was found for key "%s".',VARIABLE_VALUE_INVALID:'Variable value for key "%s" is invalid or wrong type.'};(function(a){a.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",a.DECISION="DECISION:type, userId, attributes, decisionInfo",a.LOG_EVENT="LOG_EVENT:logEvent",a.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",a.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"})(M||(M={}));var W=Object.freeze({__proto__:null,LOG_LEVEL:c,ERROR_MESSAGES:b,LOG_MESSAGES:f,CONTROL_ATTRIBUTES:te,JAVASCRIPT_CLIENT_ENGINE:"javascript-sdk",NODE_CLIENT_ENGINE:"node-sdk",REACT_CLIENT_ENGINE:"react-sdk",REACT_NATIVE_CLIENT_ENGINE:"react-native-sdk",REACT_NATIVE_JS_CLIENT_ENGINE:"react-native-js-sdk",NODE_CLIENT_VERSION:"4.9.2",DECISION_NOTIFICATION_TYPES:x,DECISION_SOURCES:J,AUDIENCE_EVALUATION_TYPES:se,FEATURE_VARIABLE_TYPES:Ee,DATAFILE_VERSIONS:_e,DECISION_MESSAGES:G,get NOTIFICATION_TYPES(){return M}}),Y="CONFIG_VALIDATOR",Z=[_e.V2,_e.V3,_e.V4],ie=function(a){if(typeof a=="object"&&a!==null){var n=a,i=n.errorHandler,u=n.eventDispatcher,l=n.logger;if(i&&typeof i.handleError!="function")throw new Error(U(b.INVALID_ERROR_HANDLER,Y));if(u&&typeof u.dispatchEvent!="function")throw new Error(U(b.INVALID_EVENT_DISPATCHER,Y));if(l&&typeof l.log!="function")throw new Error(U(b.INVALID_LOGGER,Y));return!0}throw new Error(U(b.INVALID_CONFIG,Y))},ee=function(a){if(!a)throw new Error(U(b.NO_DATAFILE_SPECIFIED,Y));if(typeof a=="string")try{a=JSON.parse(a)}catch(n){throw new Error(U(b.INVALID_DATAFILE_MALFORMED,Y))}if(typeof a=="object"&&!Array.isArray(a)&&a!==null&&Z.indexOf(a.version)===-1)throw new Error(U(b.INVALID_DATAFILE_VERSION,Y,a.version));return a},ce={handleError:function(){}},me=function(a){return Object.keys(a).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(a[n])}).join("&")},Se={dispatchEvent:function(a,n){var i,u=a.params,l=a.url;a.httpVerb==="POST"?((i=new XMLHttpRequest).open("POST",l,!0),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(i.readyState===4&&n&&typeof n=="function")try{n({statusCode:i.status})}catch(g){}},i.send(JSON.stringify(u))):(l+="?wxhr=true",u&&(l+="&"+me(u)),(i=new XMLHttpRequest).open("GET",l,!0),i.onreadystatechange=function(){if(i.readyState===4&&n&&typeof n=="function")try{n({statusCode:i.status})}catch(g){}},i.send())}},he=function(){function a(){}return a.prototype.log=function(){},a}();function Ue(a){return new v.ConsoleLogHandler(a)}var Be,ne,Pe=Object.freeze({__proto__:null,NoOpLogger:he,createLogger:Ue,createNoOpLogger:function(){return new he}});function ke(a,n,i){return{variationKey:null,enabled:!1,variables:{},ruleKey:null,flagKey:a,userContext:n,reasons:i}}(function(a){a.BOOLEAN="boolean",a.DOUBLE="double",a.INTEGER="integer",a.STRING="string",a.JSON="json"})(Be||(Be={})),(ne=o.OptimizelyDecideOption||(o.OptimizelyDecideOption={})).DISABLE_DECISION_EVENT="DISABLE_DECISION_EVENT",ne.ENABLED_FLAGS_ONLY="ENABLED_FLAGS_ONLY",ne.IGNORE_USER_PROFILE_SERVICE="IGNORE_USER_PROFILE_SERVICE",ne.INCLUDE_REASONS="INCLUDE_REASONS",ne.EXCLUDE_VARIABLES="EXCLUDE_VARIABLES";var Ke=function(){function a(n){var i,u=n.optimizely,l=n.userId,g=n.attributes;this.optimizely=u,this.userId=l,this.attributes=(i=F({},g))!==null&&i!==void 0?i:{},this.forcedDecisionsMap={}}return a.prototype.setAttribute=function(n,i){this.attributes[n]=i},a.prototype.getUserId=function(){return this.userId},a.prototype.getAttributes=function(){return F({},this.attributes)},a.prototype.getOptimizely=function(){return this.optimizely},a.prototype.decide=function(n,i){return i===void 0&&(i=[]),this.optimizely.decide(this.cloneUserContext(),n,i)},a.prototype.decideForKeys=function(n,i){return i===void 0&&(i=[]),this.optimizely.decideForKeys(this.cloneUserContext(),n,i)},a.prototype.decideAll=function(n){return n===void 0&&(n=[]),this.optimizely.decideAll(this.cloneUserContext(),n)},a.prototype.trackEvent=function(n,i){this.optimizely.track(n,this.userId,this.attributes,i)},a.prototype.setForcedDecision=function(n,i){var u,l=n.flagKey,g=(u=n.ruleKey)!==null&&u!==void 0?u:te.FORCED_DECISION_NULL_RULE_KEY,E={variationKey:i.variationKey};return this.forcedDecisionsMap[l]||(this.forcedDecisionsMap[l]={}),this.forcedDecisionsMap[l][g]=E,!0},a.prototype.getForcedDecision=function(n){return this.findForcedDecision(n)},a.prototype.removeForcedDecision=function(n){var i,u=(i=n.ruleKey)!==null&&i!==void 0?i:te.FORCED_DECISION_NULL_RULE_KEY,l=n.flagKey,g=!1;return this.forcedDecisionsMap.hasOwnProperty(l)&&(this.forcedDecisionsMap[l].hasOwnProperty(u)&&(delete this.forcedDecisionsMap[l][u],g=!0),Object.keys(this.forcedDecisionsMap[l]).length===0&&delete this.forcedDecisionsMap[l]),g},a.prototype.removeAllForcedDecisions=function(){return this.forcedDecisionsMap={},!0},a.prototype.findForcedDecision=function(n){var i,u=(i=n.ruleKey)!==null&&i!==void 0?i:te.FORCED_DECISION_NULL_RULE_KEY,l=n.flagKey;if(this.forcedDecisionsMap.hasOwnProperty(n.flagKey)){var g=this.forcedDecisionsMap[l];if(g.hasOwnProperty(u))return{variationKey:g[u].variationKey}}return null},a.prototype.cloneUserContext=function(){var n=new a({optimizely:this.getOptimizely(),userId:this.getUserId(),attributes:this.getAttributes()});return Object.keys(this.forcedDecisionsMap).length>0&&(n.forcedDecisionsMap=F({},this.forcedDecisionsMap)),n},a}(),We=["and","or","not"];function Ne(a,n){if(Array.isArray(a)){var i=a[0],u=a.slice(1);switch(typeof i=="string"&&We.indexOf(i)===-1&&(i="or",u=a),i){case"and":return function(l,g){var E=!1;if(Array.isArray(l)){for(var V=0;V<l.length;V++){var D=Ne(l[V],g);if(D===!1)return!1;D===null&&(E=!0)}return!E||null}return null}(u,n);case"not":return function(l,g){if(Array.isArray(l)&&l.length>0){var E=Ne(l[0],g);return E===null?null:!E}return null}(u,n);default:return function(l,g){var E=!1;if(Array.isArray(l)){for(var V=0;V<l.length;V++){var D=Ne(l[V],g);if(D===!0)return!0;D===null&&(E=!0)}return!!E&&null}return null}(u,n)}}return n(a)}var ze=function(){function a(n,i){var u,l;this.sdkKey=(u=n.sdkKey)!==null&&u!==void 0?u:"",this.environmentKey=(l=n.environmentKey)!==null&&l!==void 0?l:"",this.attributes=n.attributes,this.audiences=a.getAudiences(n),this.events=n.events,this.revision=n.revision;var g=(n.featureFlags||[]).reduce(function(V,D){return V[D.id]=D.variables,V},{}),E=a.getExperimentsMapById(n,g);this.experimentsMap=a.getExperimentsKeyMap(E),this.featuresMap=a.getFeaturesMap(n,g,E),this.datafile=i}return a.prototype.getDatafile=function(){return this.datafile},a.getAudiences=function(n){var i=[],u=[];return(n.typedAudiences||[]).forEach(function(l){i.push({id:l.id,conditions:JSON.stringify(l.conditions),name:l.name}),u.push(l.id)}),(n.audiences||[]).forEach(function(l){u.indexOf(l.id)===-1&&l.id!="$opt_dummy_audience"&&i.push({id:l.id,conditions:JSON.stringify(l.conditions),name:l.name})}),i},a.getSerializedAudiences=function(n,i){var u="";if(n){var l="";n.forEach(function(g){var E="";if(g instanceof Array)E="("+(E=a.getSerializedAudiences(g,i))+")";else if(We.indexOf(g)>-1)l=g.toUpperCase();else{var V=i[g]?i[g].name:g;u||l==="NOT"?(l=l===""?"OR":l,u=u===""?l+' "'+i[g].name+'"':u.concat(" "+l+' "'+V+'"')):u='"'+V+'"'}E!==""&&(u!==""||l==="NOT"?(l=l===""?"OR":l,u=u===""?l+" "+E:u.concat(" "+l+" "+E)):u=u.concat(E))})}return u},a.getExperimentAudiences=function(n,i){return n.audienceConditions?a.getSerializedAudiences(n.audienceConditions,i.audiencesById):""},a.mergeFeatureVariables=function(n,i,u,l,g){var E=(n[u]||[]).reduce(function(V,D){return V[D.key]={id:D.id,key:D.key,type:D.type,value:D.defaultValue},V},{});return(l||[]).forEach(function(V){var D=i[V.id],K={id:V.id,key:D.key,type:D.type,value:g?V.value:D.defaultValue};E[D.key]=K}),E},a.getVariationsMap=function(n,i,u,l){return n.reduce(function(g,E){var V=a.mergeFeatureVariables(i,u,l,E.variables,E.featureEnabled);return g[E.key]={id:E.id,key:E.key,featureEnabled:E.featureEnabled,variablesMap:V},g},{})},a.getVariableIdMap=function(n){return(n.featureFlags||[]).reduce(function(i,u){return u.variables.forEach(function(l){i[l.id]=l}),i},{})},a.getDeliveryRules=function(n,i,u,l){var g=a.getVariableIdMap(n);return l.map(function(E){return{id:E.id,key:E.key,audiences:a.getExperimentAudiences(E,n),variationsMap:a.getVariationsMap(E.variations,i,g,u)}})},a.getRolloutExperimentIds=function(n){var i=[];return(n||[]).forEach(function(u){u.experiments.forEach(function(l){i.push(l.id)})}),i},a.getExperimentsMapById=function(n,i){var u=a.getVariableIdMap(n),l=this.getRolloutExperimentIds(n.rollouts);return(n.experiments||[]).reduce(function(g,E){if(l.indexOf(E.id)===-1){var V=n.experimentFeatureMap[E.id],D="";V&&V.length>0&&(D=V[0]);var K=a.getVariationsMap(E.variations,i,u,D.toString());g[E.id]={id:E.id,key:E.key,audiences:a.getExperimentAudiences(E,n),variationsMap:K}}return g},{})},a.getExperimentsKeyMap=function(n){var i={};for(var u in n){var l=n[u];i[l.key]=l}return i},a.getFeaturesMap=function(n,i,u){var l={};return n.featureFlags.forEach(function(g){var E={},V=[];g.experimentIds.forEach(function(q){var ue=u[q];ue&&(E[ue.key]=ue),V.push(u[q])});var D=(g.variables||[]).reduce(function(q,ue){return q[ue.key]={id:ue.id,key:ue.key,type:ue.type,value:ue.defaultValue},q},{}),K=[],$=n.rolloutIdMap[g.rolloutId];$&&(K=a.getDeliveryRules(n,i,g.id,$.experiments)),l[g.key]={id:g.id,key:g.key,experimentRules:V,deliveryRules:K,experimentsMap:E,variablesMap:D}}),l},a}(),Ae="PROJECT_CONFIG",B=function(a,n){n===void 0&&(n=null);var i,u,l,g,E=((g=j({},i=a)).audiences=(i.audiences||[]).map(function(V){return j({},V)}),g.experiments=(i.experiments||[]).map(function(V){return j({},V)}),g.featureFlags=(i.featureFlags||[]).map(function(V){return j({},V)}),g.groups=(i.groups||[]).map(function(V){var D=j({},V);return D.experiments=(V.experiments||[]).map(function(K){return j({},K)}),D}),g.rollouts=(i.rollouts||[]).map(function(V){var D=j({},V);return D.experiments=(V.experiments||[]).map(function(K){return j({},K)}),D}),g.environmentKey=(u=i.environmentKey)!==null&&u!==void 0?u:"",g.sdkKey=(l=i.sdkKey)!==null&&l!==void 0?l:"",g);return E.__datafileStr=n===null?JSON.stringify(a):n,(E.audiences||[]).forEach(function(V){V.conditions=JSON.parse(V.conditions)}),E.audiencesById=p(E.audiences,"id"),j(E.audiencesById,p(E.typedAudiences,"id")),E.attributeKeyMap=p(E.attributes,"key"),E.eventKeyMap=p(E.events,"key"),E.groupIdMap=p(E.groups,"id"),Object.keys(E.groupIdMap||{}).forEach(function(V){(E.groupIdMap[V].experiments||[]).forEach(function(D){E.experiments.push(j(D,{groupId:V}))})}),E.rolloutIdMap=p(E.rollouts||[],"id"),A(E.rolloutIdMap||{}).forEach(function(V){(V.experiments||[]).forEach(function(D){E.experiments.push(D),D.variationKeyMap=p(D.variations,"key")})}),E.experimentKeyMap=p(E.experiments,"key"),E.experimentIdMap=p(E.experiments,"id"),E.variationIdMap={},E.variationVariableUsageMap={},(E.experiments||[]).forEach(function(V){V.variationKeyMap=p(V.variations,"key"),j(E.variationIdMap,p(V.variations,"id")),A(V.variationKeyMap||{}).forEach(function(D){D.variables&&(E.variationVariableUsageMap[D.id]=p(D.variables,"id"))})}),E.experimentFeatureMap={},E.featureKeyMap=p(E.featureFlags||[],"key"),A(E.featureKeyMap||{}).forEach(function(V){V.variables.forEach(function(D){D.type===Ee.STRING&&D.subType===Ee.JSON&&(D.type=Ee.JSON,delete D.subType)}),V.variableKeyMap=p(V.variables,"key"),(V.experimentIds||[]).forEach(function(D){E.experimentFeatureMap[D]?E.experimentFeatureMap[D].push(V.id):E.experimentFeatureMap[D]=[V.id]})}),E.flagRulesMap={},(E.featureFlags||[]).forEach(function(V){var D=[];V.experimentIds.forEach(function($){var q=E.experimentIdMap[$];q&&D.push(q)});var K=E.rolloutIdMap[V.rolloutId];K&&D.push.apply(D,K.experiments),E.flagRulesMap[V.key]=D}),E.flagVariationsMap={},T(E.flagRulesMap||{}).forEach(function(V){var D=V[0],K=V[1],$=[];K.forEach(function(q){q.variations.forEach(function(ue){C($,function(ye){return ye.id===ue.id})||$.push(ue)})}),E.flagVariationsMap[D]=$}),E},R=function(a,n){var i=a.experimentIdMap[n];if(!i)throw new Error(U(b.INVALID_EXPERIMENT_ID,Ae,n));return i.layerId},w=function(a,n,i){var u=a.attributeKeyMap[n],l=n.indexOf("$opt_")===0;return u?(l&&i.log(c.WARNING,"Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",n,"$opt_"),u.id):l?n:(i.log(c.DEBUG,b.UNRECOGNIZED_ATTRIBUTE,Ae,n),null)},k=function(a,n){var i=a.eventKeyMap[n];return i?i.id:null},z=function(a,n){var i=a.experimentKeyMap[n];if(!i)throw new Error(U(b.INVALID_EXPERIMENT_KEY,Ae,n));return i.status},Q=function(a,n){return a.variationIdMap.hasOwnProperty(n)?a.variationIdMap[n].key:null},ge=function(a,n){if(a.experimentKeyMap.hasOwnProperty(n)){var i=a.experimentKeyMap[n];if(i)return i}throw new Error(U(b.EXPERIMENT_KEY_NOT_IN_DATAFILE,Ae,n))},ve=function(a,n){var i=a.experimentIdMap[n];if(!i)throw new Error(U(b.INVALID_EXPERIMENT_ID,Ae,n));return i.trafficAllocation},fe=function(a,n,i){if(a.experimentIdMap.hasOwnProperty(n)){var u=a.experimentIdMap[n];if(u)return u}return i.log(c.ERROR,b.INVALID_EXPERIMENT_ID,Ae,n),null},Ie=function(a,n,i){if(!a)return null;var u=C(a.flagVariationsMap[n],function(l){return l.key===i});return u||null},oe=function(a,n,i){if(a.featureKeyMap.hasOwnProperty(n)){var u=a.featureKeyMap[n];if(u)return u}return i.log(c.ERROR,b.FEATURE_NOT_IN_DATAFILE,Ae,n),null},X=function(a){return a.__datafileStr},ae=function(a){var n;try{n=ee(a.datafile)}catch(u){return{configObj:null,error:u}}if(a.jsonSchemaValidator)try{a.jsonSchemaValidator.validate(n),a.logger.log(c.INFO,f.VALID_DATAFILE,Ae)}catch(u){return{configObj:null,error:u}}else a.logger.log(c.INFO,f.SKIPPING_JSON_VALIDATION,Ae);var i=[n];return typeof a.datafile=="string"&&i.push(a.datafile),{configObj:B.apply(void 0,i),error:null}},pe=function(a){return!!a.sendFlagDecisions},Re=v.getLogger();function Te(a,n){return a instanceof Error?a.message:n||"Unknown error"}var Le=function(){function a(n){this.updateListeners=[],this.configObj=null,this.optimizelyConfigObj=null,this.datafileManager=null;try{if(this.jsonSchemaValidator=n.jsonSchemaValidator,!n.datafile&&!n.sdkKey){var i=new Error(U(b.DATAFILE_AND_SDK_KEY_MISSING,"PROJECT_CONFIG_MANAGER"));return this.readyPromise=Promise.resolve({success:!1,reason:Te(i)}),void Re.error(i)}var u=null;n.datafile&&(u=this.handleNewDatafile(n.datafile)),n.sdkKey&&n.datafileManager?(this.datafileManager=n.datafileManager,this.datafileManager.start(),this.readyPromise=this.datafileManager.onReady().then(this.onDatafileManagerReadyFulfill.bind(this),this.onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.onDatafileManagerUpdate.bind(this))):this.configObj?this.readyPromise=Promise.resolve({success:!0}):this.readyPromise=Promise.resolve({success:!1,reason:Te(u,"Invalid datafile")})}catch(l){Re.error(l),this.readyPromise=Promise.resolve({success:!1,reason:Te(l,"Error in initialize")})}}return a.prototype.onDatafileManagerReadyFulfill=function(){if(this.datafileManager){var n=this.handleNewDatafile(this.datafileManager.get());return n?{success:!1,reason:Te(n)}:{success:!0}}return{success:!1,reason:Te(null,"Datafile manager is not provided")}},a.prototype.onDatafileManagerReadyReject=function(n){return{success:!1,reason:Te(n,"Failed to become ready")}},a.prototype.onDatafileManagerUpdate=function(){this.datafileManager&&this.handleNewDatafile(this.datafileManager.get())},a.prototype.handleNewDatafile=function(n){var i=ae({datafile:n,jsonSchemaValidator:this.jsonSchemaValidator,logger:Re}),u=i.configObj,l=i.error;if(l)Re.error(l);else{var g=this.configObj?this.configObj.revision:"null";u&&g!==u.revision&&(this.configObj=u,this.optimizelyConfigObj=null,this.updateListeners.forEach(function(E){return E(u)}))}return l},a.prototype.getConfig=function(){return this.configObj},a.prototype.getOptimizelyConfig=function(){var n,i;return!this.optimizelyConfigObj&&this.configObj&&(this.optimizelyConfigObj=(n=this.configObj,i=X(this.configObj),new ze(n,i))),this.optimizelyConfigObj},a.prototype.onReady=function(){return this.readyPromise},a.prototype.onUpdate=function(n){var i=this;return this.updateListeners.push(n),function(){var u=i.updateListeners.indexOf(n);u>-1&&i.updateListeners.splice(u,1)}},a.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.updateListeners=[]},a}(),Ve=Math.pow(2,32),Oe=function(a){var n=[],i=a.experimentIdMap[a.experimentId].groupId;if(i){var u=a.groupIdMap[i];if(!u)throw new Error(U(b.INVALID_GROUP_ID,"BUCKETER",i));if(u.policy==="random"){var l=Fe(u,a.bucketingId,a.userId,a.logger);if(l===null)return a.logger.log(c.INFO,f.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",a.userId,i),n.push([f.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",a.userId,i]),{result:null,reasons:n};if(l!==a.experimentId)return a.logger.log(c.INFO,f.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",a.userId,a.experimentKey,i),n.push([f.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",a.userId,a.experimentKey,i]),{result:null,reasons:n};a.logger.log(c.INFO,f.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",a.userId,a.experimentKey,i),n.push([f.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",a.userId,a.experimentKey,i])}}var g=""+a.bucketingId+a.experimentId,E=et(g);a.logger.log(c.DEBUG,f.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",E,a.userId),n.push([f.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",E,a.userId]);var V=we(E,a.trafficAllocationConfig);return V===null||a.variationIdMap[V]?{result:V,reasons:n}:(V&&(a.logger.log(c.WARNING,f.INVALID_VARIATION_ID,"BUCKETER"),n.push([f.INVALID_VARIATION_ID,"BUCKETER"])),{result:null,reasons:n})},Fe=function(a,n,i,u){var l=""+n+a.id,g=et(l);u.log(c.DEBUG,f.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",g,i);var E=a.trafficAllocation;return we(g,E)},we=function(a,n){for(var i=0;i<n.length;i++)if(a<n[i].endOfRange)return n[i].entityId;return null},et=function(a){try{var n=_.v3(a,1)/Ve;return Math.floor(1e4*n)}catch(i){throw new Error(U(b.INVALID_BUCKETING_ID,"BUCKETER",a,i.message))}},tt=v.getLogger();function rt(a){return/^\d+$/.test(a)}function Qe(a){var n=a.indexOf("-"),i=a.indexOf("+");return!(n<0)&&(i<0||n<i)}function at(a){var n=a.indexOf("-"),i=a.indexOf("+");return!(i<0)&&(n<0||i<n)}function nt(a){var n=a,i="";if(function(V){return/\s/.test(V)}(a))return tt.warn(f.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",a),null;if(Qe(a)?(n=a.substring(0,a.indexOf("-")),i=a.substring(a.indexOf("-")+1)):at(a)&&(n=a.substring(0,a.indexOf("+")),i=a.substring(a.indexOf("+")+1)),typeof n!="string"||typeof i!="string")return null;var u=n.split(".").length-1;if(u>2)return tt.warn(f.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",a),null;var l=n.split(".");if(l.length!=u+1)return tt.warn(f.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",a),null;for(var g=0,E=l;g<E.length;g++)if(!rt(E[g]))return tt.warn(f.UNKNOWN_MATCH_TYPE,"SEMANTIC VERSION",a),null;return i&&l.push(i),l}var je="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",Ge=v.getLogger(),Xt=["exact","exists","gt","ge","lt","le","substring","semver_eq","semver_lt","semver_le","semver_gt","semver_ge"],xe={};function mt(a){return typeof a=="string"||typeof a=="boolean"||I.isNumber(a)}function It(a,n){var i=a.value,u=typeof i,l=a.name,g=n[l],E=typeof g;return!mt(i)||I.isNumber(i)&&!I.isSafeInteger(i)?(Ge.warn(f.UNEXPECTED_CONDITION_VALUE,je,JSON.stringify(a)),null):g===null?(Ge.debug(f.UNEXPECTED_TYPE_NULL,je,JSON.stringify(a),l),null):mt(g)&&u===E?I.isNumber(g)&&!I.isSafeInteger(g)?(Ge.warn(f.OUT_OF_BOUNDS,je,JSON.stringify(a),l),null):i===g:(Ge.warn(f.UNEXPECTED_TYPE,je,JSON.stringify(a),E,l),null)}function ht(a,n){var i=a.name,u=n[i],l=typeof u,g=a.value;return g!==null&&I.isSafeInteger(g)?u===null?(Ge.debug(f.UNEXPECTED_TYPE_NULL,je,JSON.stringify(a),i),!1):I.isNumber(u)?!!I.isSafeInteger(u)||(Ge.warn(f.OUT_OF_BOUNDS,je,JSON.stringify(a),i),!1):(Ge.warn(f.UNEXPECTED_TYPE,je,JSON.stringify(a),l,i),!1):(Ge.warn(f.UNEXPECTED_CONDITION_VALUE,je,JSON.stringify(a)),!1)}function it(a,n){var i=a.name,u=n[i],l=typeof u,g=a.value;return typeof g!="string"?(Ge.warn(f.UNEXPECTED_CONDITION_VALUE,je,JSON.stringify(a)),null):u===null?(Ge.debug(f.UNEXPECTED_TYPE_NULL,je,JSON.stringify(a),i),null):typeof u!="string"?(Ge.warn(f.UNEXPECTED_TYPE,je,JSON.stringify(a),l,i),null):function(E,V){var D=nt(V),K=nt(E);if(!D||!K)return null;for(var $=D.length,q=0;q<K.length;q++){if($<=q)return Qe(E)||at(E)?1:-1;if(rt(D[q])){var ue=parseInt(D[q]),ye=parseInt(K[q]);if(ue>ye)return 1;if(ue<ye)return-1}else{if(D[q]<K[q])return Qe(E)&&!Qe(V)?1:-1;if(D[q]>K[q])return!Qe(E)&&Qe(V)?-1:1}}return Qe(V)&&!Qe(E)?-1:0}(g,u)}xe.exact=It,xe.exists=function(a,n){var i=n[a.name];return i!=null},xe.gt=function(a,n){var i=n[a.name],u=a.value;return!ht(a,n)||u===null?null:i>u},xe.ge=function(a,n){var i=n[a.name],u=a.value;return!ht(a,n)||u===null?null:i>=u},xe.lt=function(a,n){var i=n[a.name],u=a.value;return!ht(a,n)||u===null?null:i<u},xe.le=function(a,n){var i=n[a.name],u=a.value;return!ht(a,n)||u===null?null:i<=u},xe.substring=function(a,n){var i=a.name,u=n[a.name],l=typeof u,g=a.value;return typeof g!="string"?(Ge.warn(f.UNEXPECTED_CONDITION_VALUE,je,JSON.stringify(a)),null):u===null?(Ge.debug(f.UNEXPECTED_TYPE_NULL,je,JSON.stringify(a),i),null):typeof u!="string"?(Ge.warn(f.UNEXPECTED_TYPE,je,JSON.stringify(a),l,i),null):u.indexOf(g)!==-1},xe.semver_eq=function(a,n){var i=it(a,n);return i===null?null:i===0},xe.semver_gt=function(a,n){var i=it(a,n);return i===null?null:i>0},xe.semver_ge=function(a,n){var i=it(a,n);return i===null?null:i>=0},xe.semver_lt=function(a,n){var i=it(a,n);return i===null?null:i<0},xe.semver_le=function(a,n){var i=it(a,n);return i===null?null:i<=0};var $t=Object.freeze({__proto__:null,evaluate:function(a,n){var i=a.match;if(i!==void 0&&Xt.indexOf(i)===-1)return Ge.warn(f.UNKNOWN_MATCH_TYPE,je,JSON.stringify(a)),null;var u=a.name;return n.hasOwnProperty(u)||i=="exists"?(i&&xe[i]||It)(a,n):(Ge.debug(f.MISSING_ATTRIBUTE_VALUE,je,JSON.stringify(a),u),null)}}),Et=v.getLogger(),jt=function(){function a(n){this.typeToEvaluatorMap=I.assign({},n,{custom_attribute:$t})}return a.prototype.evaluate=function(n,i,u){var l=this;return u===void 0&&(u={}),!n||n.length===0?!0:!!Ne(n,function(g){var E=i[g];if(E){Et.log(c.DEBUG,f.EVALUATING_AUDIENCE,"AUDIENCE_EVALUATOR",g,JSON.stringify(E.conditions));var V=Ne(E.conditions,l.evaluateConditionWithUserAttributes.bind(l,u)),D=V===null?"UNKNOWN":V.toString().toUpperCase();return Et.log(c.DEBUG,f.AUDIENCE_EVALUATION_RESULT,"AUDIENCE_EVALUATOR",g,D),V}return null})},a.prototype.evaluateConditionWithUserAttributes=function(n,i){var u=this.typeToEvaluatorMap[i.type];if(!u)return Et.log(c.WARNING,f.UNKNOWN_CONDITION_TYPE,"AUDIENCE_EVALUATOR",JSON.stringify(i)),null;try{return u.evaluate(i,n)}catch(l){Et.log(c.ERROR,b.CONDITION_EVALUATOR_ERROR,"AUDIENCE_EVALUATOR",i.type,l.message)}return null},a}();function Ot(a){return typeof a=="string"&&a!==""}var de="DECISION_SERVICE",Bt=function(){function a(n){var i;this.audienceEvaluator=(i=n.UNSTABLE_conditionEvaluators,new jt(i)),this.forcedVariationMap={},this.logger=n.logger,this.userProfileService=n.userProfileService||null}return a.prototype.getVariation=function(n,i,u,l){l===void 0&&(l={});var g=u.getUserId(),E=u.getAttributes(),V=this.getBucketingId(g,E),D=[],K=i.key;if(!this.checkIfExperimentIsActive(n,K))return this.logger.log(c.INFO,f.EXPERIMENT_NOT_RUNNING,de,K),D.push([f.EXPERIMENT_NOT_RUNNING,de,K]),{result:null,reasons:D};var $=this.getForcedVariation(n,K,g);D.push.apply(D,$.reasons);var q=$.result;if(q)return{result:q,reasons:D};var ue=this.getWhitelistedVariation(i,g);D.push.apply(D,ue.reasons);var ye=ue.result;if(ye)return{result:ye.key,reasons:D};var Ce=l[o.OptimizelyDecideOption.IGNORE_USER_PROFILE_SERVICE],Me=this.resolveExperimentBucketMap(g,E);if(!Ce&&(ye=this.getStoredVariation(n,i,g,Me)))return this.logger.log(c.INFO,f.RETURNING_STORED_VARIATION,de,ye.key,K,g),D.push([f.RETURNING_STORED_VARIATION,de,ye.key,K,g]),{result:ye.key,reasons:D};var De=this.checkIfUserIsInAudience(n,i,se.EXPERIMENT,E,"");if(D.push.apply(D,De.reasons),!De.result)return this.logger.log(c.INFO,f.USER_NOT_IN_EXPERIMENT,de,g,K),D.push([f.USER_NOT_IN_EXPERIMENT,de,g,K]),{result:null,reasons:D};var He=this.buildBucketerParams(n,i,V,g),Ze=Oe(He);D.push.apply(D,Ze.reasons);var Xe=Ze.result;return Xe&&(ye=n.variationIdMap[Xe]),ye?(this.logger.log(c.INFO,f.USER_HAS_VARIATION,de,g,ye.key,K),D.push([f.USER_HAS_VARIATION,de,g,ye.key,K]),Ce||this.saveUserProfile(i,ye,g,Me),{result:ye.key,reasons:D}):(this.logger.log(c.DEBUG,f.USER_HAS_NO_VARIATION,de,g,K),D.push([f.USER_HAS_NO_VARIATION,de,g,K]),{result:null,reasons:D})},a.prototype.resolveExperimentBucketMap=function(n,i){i=i||{};var u=this.getUserProfile(n)||{},l=i[te.STICKY_BUCKETING_KEY];return I.assign({},u.experiment_bucket_map,l)},a.prototype.checkIfExperimentIsActive=function(n,i){return function(u,l){return z(u,l)==="Running"}(n,i)},a.prototype.getWhitelistedVariation=function(n,i){var u=[];if(n.forcedVariations&&n.forcedVariations.hasOwnProperty(i)){var l=n.forcedVariations[i];return n.variationKeyMap.hasOwnProperty(l)?(this.logger.log(c.INFO,f.USER_FORCED_IN_VARIATION,de,i,l),u.push([f.USER_FORCED_IN_VARIATION,de,i,l]),{result:n.variationKeyMap[l],reasons:u}):(this.logger.log(c.ERROR,f.FORCED_BUCKETING_FAILED,de,l,i),u.push([f.FORCED_BUCKETING_FAILED,de,l,i]),{result:null,reasons:u})}return{result:null,reasons:u}},a.prototype.checkIfUserIsInAudience=function(n,i,u,l,g){var E=[],V=function($,q){var ue=$.experimentIdMap[q];if(!ue)throw new Error(U(b.INVALID_EXPERIMENT_ID,Ae,q));return ue.audienceConditions||ue.audienceIds}(n,i.id),D=n.audiencesById;this.logger.log(c.DEBUG,f.EVALUATING_AUDIENCES_COMBINED,de,u,g||i.key,JSON.stringify(V)),E.push([f.EVALUATING_AUDIENCES_COMBINED,de,u,g||i.key,JSON.stringify(V)]);var K=this.audienceEvaluator.evaluate(V,D,l);return this.logger.log(c.INFO,f.AUDIENCE_EVALUATION_RESULT_COMBINED,de,u,g||i.key,K.toString().toUpperCase()),E.push([f.AUDIENCE_EVALUATION_RESULT_COMBINED,de,u,g||i.key,K.toString().toUpperCase()]),{result:K,reasons:E}},a.prototype.buildBucketerParams=function(n,i,u,l){return{bucketingId:u,experimentId:i.id,experimentKey:i.key,experimentIdMap:n.experimentIdMap,experimentKeyMap:n.experimentKeyMap,groupIdMap:n.groupIdMap,logger:this.logger,trafficAllocationConfig:ve(n,i.id),userId:l,variationIdMap:n.variationIdMap}},a.prototype.getStoredVariation=function(n,i,u,l){if(l.hasOwnProperty(i.id)){var g=l[i.id],E=g.variation_id;if(n.variationIdMap.hasOwnProperty(E))return n.variationIdMap[g.variation_id];this.logger.log(c.INFO,f.SAVED_VARIATION_NOT_FOUND,de,u,E,i.key)}return null},a.prototype.getUserProfile=function(n){var i={user_id:n,experiment_bucket_map:{}};if(!this.userProfileService)return i;try{return this.userProfileService.lookup(n)}catch(u){this.logger.log(c.ERROR,b.USER_PROFILE_LOOKUP_ERROR,de,n,u.message)}return null},a.prototype.saveUserProfile=function(n,i,u,l){if(this.userProfileService)try{l[n.id]={variation_id:i.id},this.userProfileService.save({user_id:u,experiment_bucket_map:l}),this.logger.log(c.INFO,f.SAVED_VARIATION,de,i.key,n.key,u)}catch(g){this.logger.log(c.ERROR,b.USER_PROFILE_SAVE_ERROR,de,u,g.message)}},a.prototype.getVariationForFeature=function(n,i,u,l){l===void 0&&(l={});var g=[],E=this.getVariationForFeatureExperiment(n,i,u,l);g.push.apply(g,E.reasons);var V=E.result;if(V.variation!==null)return{result:V,reasons:g};var D=this.getVariationForRollout(n,i,u);g.push.apply(g,D.reasons);var K=D.result,$=u.getUserId();return K.variation?(this.logger.log(c.DEBUG,f.USER_IN_ROLLOUT,de,$,i.key),g.push([f.USER_IN_ROLLOUT,de,$,i.key]),{result:K,reasons:g}):(this.logger.log(c.DEBUG,f.USER_NOT_IN_ROLLOUT,de,$,i.key),g.push([f.USER_NOT_IN_ROLLOUT,de,$,i.key]),{result:K,reasons:g})},a.prototype.getVariationForFeatureExperiment=function(n,i,u,l){l===void 0&&(l={});var g,E,V=[],D=null;if(i.experimentIds.length>0)for(E=0;E<i.experimentIds.length;E++){var K=fe(n,i.experimentIds[E],this.logger);if(K&&(g=this.getVariationFromExperimentRule(n,i.key,K,u,l),V.push.apply(V,g.reasons),D=g.result)){var $=null;return($=K.variationKeyMap[D])||($=Ie(n,i.key,D)),{result:{experiment:K,variation:$,decisionSource:J.FEATURE_TEST},reasons:V}}}else this.logger.log(c.DEBUG,f.FEATURE_HAS_NO_EXPERIMENTS,de,i.key),V.push([f.FEATURE_HAS_NO_EXPERIMENTS,de,i.key]);return{result:{experiment:null,variation:null,decisionSource:J.FEATURE_TEST},reasons:V}},a.prototype.getVariationForRollout=function(n,i,u){var l=[];if(!i.rolloutId)return this.logger.log(c.DEBUG,f.NO_ROLLOUT_EXISTS,de,i.key),l.push([f.NO_ROLLOUT_EXISTS,de,i.key]),{result:{experiment:null,variation:null,decisionSource:J.ROLLOUT},reasons:l};var g=n.rolloutIdMap[i.rolloutId];if(!g)return this.logger.log(c.ERROR,b.INVALID_ROLLOUT_ID,de,i.rolloutId,i.key),l.push([b.INVALID_ROLLOUT_ID,de,i.rolloutId,i.key]),{result:{experiment:null,variation:null,decisionSource:J.ROLLOUT},reasons:l};var E,V,D,K=g.experiments;if(K.length===0)return this.logger.log(c.ERROR,f.ROLLOUT_HAS_NO_EXPERIMENTS,de,i.rolloutId),l.push([f.ROLLOUT_HAS_NO_EXPERIMENTS,de,i.rolloutId]),{result:{experiment:null,variation:null,decisionSource:J.ROLLOUT},reasons:l};for(var $=0;$<K.length;){if(E=this.getVariationFromDeliveryRule(n,i.key,K,$,u),l.push.apply(l,E.reasons),D=E.result,V=E.skipToEveryoneElse,D)return{result:{experiment:n.experimentIdMap[K[$].id],variation:D,decisionSource:J.ROLLOUT},reasons:l};$=V?K.length-1:$+1}return{result:{experiment:null,variation:null,decisionSource:J.ROLLOUT},reasons:l}},a.prototype.getBucketingId=function(n,i){var u=n;return i!=null&&typeof i=="object"&&i.hasOwnProperty(te.BUCKETING_ID)&&(typeof i[te.BUCKETING_ID]=="string"?(u=i[te.BUCKETING_ID],this.logger.log(c.DEBUG,f.VALID_BUCKETING_ID,de,u)):this.logger.log(c.WARNING,f.BUCKETING_ID_NOT_STRING,de)),u},a.prototype.findValidatedForcedDecision=function(n,i,u,l){var g,E=[],V=i.getForcedDecision({flagKey:u,ruleKey:l}),D=null,K=i.getUserId();return n&&V&&(g=V.variationKey,(D=Ie(n,u,g))?l?(this.logger.log(c.INFO,f.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,g,u,l,K),E.push([f.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,g,u,l,K])):(this.logger.log(c.INFO,f.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,g,u,K),E.push([f.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,g,u,K])):l?(this.logger.log(c.INFO,f.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,u,l,K),E.push([f.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,u,l,K])):(this.logger.log(c.INFO,f.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,u,K),E.push([f.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,u,K]))),{result:D,reasons:E}},a.prototype.removeForcedVariation=function(n,i,u){if(!n)throw new Error(U(b.INVALID_USER_ID,de));if(!this.forcedVariationMap.hasOwnProperty(n))throw new Error(U(b.USER_NOT_IN_FORCED_VARIATION,de,n));delete this.forcedVariationMap[n][i],this.logger.log(c.DEBUG,f.VARIATION_REMOVED_FOR_USER,de,u,n)},a.prototype.setInForcedVariationMap=function(n,i,u){this.forcedVariationMap.hasOwnProperty(n)||(this.forcedVariationMap[n]={}),this.forcedVariationMap[n][i]=u,this.logger.log(c.DEBUG,f.USER_MAPPED_TO_FORCED_VARIATION,de,u,i,n)},a.prototype.getForcedVariation=function(n,i,u){var l,g=[],E=this.forcedVariationMap[u];if(!E)return this.logger.log(c.DEBUG,f.USER_HAS_NO_FORCED_VARIATION,de,u),{result:null,reasons:g};try{var V=ge(n,i);if(!V.hasOwnProperty("id"))return this.logger.log(c.ERROR,b.IMPROPERLY_FORMATTED_EXPERIMENT,de,i),g.push([b.IMPROPERLY_FORMATTED_EXPERIMENT,de,i]),{result:null,reasons:g};l=V.id}catch($){return this.logger.log(c.ERROR,$.message),g.push($.message),{result:null,reasons:g}}var D=E[l];if(!D)return this.logger.log(c.DEBUG,f.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,de,i,u),{result:null,reasons:g};var K=Q(n,D);return K?(this.logger.log(c.DEBUG,f.USER_HAS_FORCED_VARIATION,de,K,i,u),g.push([f.USER_HAS_FORCED_VARIATION,de,K,i,u])):this.logger.log(c.DEBUG,f.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,de,i,u),{result:K,reasons:g}},a.prototype.setForcedVariation=function(n,i,u,l){if(l!=null&&!Ot(l))return this.logger.log(c.ERROR,b.INVALID_VARIATION_KEY,de),!1;var g;try{var E=ge(n,i);if(!E.hasOwnProperty("id"))return this.logger.log(c.ERROR,b.IMPROPERLY_FORMATTED_EXPERIMENT,de,i),!1;g=E.id}catch(D){return this.logger.log(c.ERROR,D.message),!1}if(l==null)try{return this.removeForcedVariation(u,g,i),!0}catch(D){return this.logger.log(c.ERROR,D.message),!1}var V=function(D,K,$){var q=D.experimentKeyMap[K];return q.variationKeyMap.hasOwnProperty($)?q.variationKeyMap[$].id:null}(n,i,l);if(!V)return this.logger.log(c.ERROR,b.NO_VARIATION_FOR_EXPERIMENT_KEY,de,l,i),!1;try{return this.setInForcedVariationMap(u,g,V),!0}catch(D){return this.logger.log(c.ERROR,D.message),!1}},a.prototype.getVariationFromExperimentRule=function(n,i,u,l,g){g===void 0&&(g={});var E=[],V=this.findValidatedForcedDecision(n,l,i,u.key);E.push.apply(E,V.reasons);var D=V.result;if(D)return{result:D.key,reasons:E};var K=this.getVariation(n,u,l,g);return E.push.apply(E,K.reasons),{result:K.result,reasons:E}},a.prototype.getVariationFromDeliveryRule=function(n,i,u,l,g){var E=[],V=!1,D=u[l],K=this.findValidatedForcedDecision(n,g,i,D.key);E.push.apply(E,K.reasons);var $=K.result;if($)return{result:$,reasons:E,skipToEveryoneElse:V};var q,ue,ye,Ce,Me,De=g.getUserId(),He=g.getAttributes(),Ze=this.getBucketingId(De,He),Xe=l===u.length-1,$e=Xe?"Everyone Else":l+1,ct=null,ot=this.checkIfUserIsInAudience(n,D,se.RULE,He,$e);return E.push.apply(E,ot.reasons),ot.result?(this.logger.log(c.DEBUG,f.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,de,De,$e),E.push([f.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,de,De,$e]),ue=this.buildBucketerParams(n,D,Ze,De),ye=Oe(ue),E.push.apply(E,ye.reasons),(q=ye.result)&&(Me=q,ct=(Ce=n).variationIdMap.hasOwnProperty(Me)?Ce.variationIdMap[Me]:null),ct?(this.logger.log(c.DEBUG,f.USER_BUCKETED_INTO_TARGETING_RULE,de,De,$e),E.push([f.USER_BUCKETED_INTO_TARGETING_RULE,de,De,$e])):Xe||(this.logger.log(c.DEBUG,f.USER_NOT_BUCKETED_INTO_TARGETING_RULE,de,De,$e),E.push([f.USER_NOT_BUCKETED_INTO_TARGETING_RULE,de,De,$e]),V=!0)):(this.logger.log(c.DEBUG,f.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,de,De,$e),E.push([f.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,de,De,$e])),{result:ct,reasons:E,skipToEveryoneElse:V}},a}();function _t(a,n){if(a.hasOwnProperty("revenue")){var i=a.revenue,u=void 0;return typeof i=="string"?(u=parseInt(i),isNaN(u)?(n.log(c.INFO,f.FAILED_TO_PARSE_REVENUE,"EVENT_TAG_UTILS",i),null):(n.log(c.INFO,f.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",u),u)):typeof i=="number"?(u=i,n.log(c.INFO,f.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",u),u):null}return null}function st(a,n){if(a.hasOwnProperty("value")){var i=a.value,u=void 0;return typeof i=="string"?(u=parseFloat(i),isNaN(u)?(n.log(c.INFO,f.FAILED_TO_PARSE_VALUE,"EVENT_TAG_UTILS",i),null):(n.log(c.INFO,f.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",u),u)):typeof i=="number"?(u=i,n.log(c.INFO,f.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",u),u):null}return null}function Rt(a,n){return typeof a=="string"&&(typeof n=="string"||typeof n=="boolean"||I.isNumber(n)&&I.isSafeInteger(n))}var Tt="https://logx.optimizely.com/v1/events";function Nt(a){var n=a.attributes,i=a.userId,u=a.clientEngine,l=a.clientVersion,g=a.configObj,E=a.logger,V=!!g.anonymizeIP&&g.anonymizeIP,D=g.botFiltering,K={snapshots:[],visitor_id:i,attributes:[]},$={account_id:g.accountId,project_id:g.projectId,visitors:[K],revision:g.revision,client_name:u,client_version:l,anonymize_ip:V,enrich_decisions:!0};return n&&Object.keys(n||{}).forEach(function(q){if(Rt(q,n[q])){var ue=w(g,q,E);ue&&$.visitors[0].attributes.push({entity_id:ue,key:q,type:"custom",value:n[q]})}}),typeof D=="boolean"&&$.visitors[0].attributes.push({entity_id:te.BOT_FILTERING,key:te.BOT_FILTERING,type:"custom",value:D}),$}function kt(a){var n,i,u,l,g,E,V,D,K,$=Nt(a),q=(n=a.configObj,i=a.experimentId,u=a.variationId,l=a.ruleKey,g=a.ruleType,E=a.flagKey,V=a.enabled,D=i?R(n,i):null,K=u?Q(n,u):null,{decisions:[{campaign_id:D,experiment_id:i,variation_id:u,metadata:{flag_key:E,rule_key:l,rule_type:g,variation_key:K=K||"",enabled:V}}],events:[{entity_id:D,timestamp:I.currentTimestamp(),key:"campaign_activated",uuid:I.uuid()}]});return $.visitors[0].snapshots.push(q),{httpVerb:"POST",url:Tt,params:$}}function Gt(a){var n=Nt(a),i=function(u,l,g,E){var V={events:[]},D={entity_id:k(u,l),timestamp:I.currentTimestamp(),uuid:I.uuid(),key:l};if(E){var K=_t(E,g);K!==null&&(D.revenue=K);var $=st(E,g);$!==null&&(D.value=$),D.tags=E}return V.events.push(D),V}(a.configObj,a.eventKey,a.logger,a.eventTags);return n.visitors[0].snapshots=[i],{httpVerb:"POST",url:Tt,params:n}}function At(a){var n,i;return(i=(n=a.experiment)===null||n===void 0?void 0:n.key)!==null&&i!==void 0?i:""}function bt(a){var n,i;return(i=(n=a.variation)===null||n===void 0?void 0:n.key)!==null&&i!==void 0?i:""}function vt(a){var n,i;return(i=(n=a.variation)===null||n===void 0?void 0:n.featureEnabled)!==null&&i!==void 0&&i}function Kt(a){var n,i;return(i=(n=a.experiment)===null||n===void 0?void 0:n.id)!==null&&i!==void 0?i:null}function St(a){var n,i;return(i=(n=a.variation)===null||n===void 0?void 0:n.id)!==null&&i!==void 0?i:null}var Ut=v.getLogger("EVENT_BUILDER");function Lt(a,n){var i=[];return n&&Object.keys(n||{}).forEach(function(u){if(Rt(u,n[u])){var l=w(a,u,Ut);l&&i.push({entityId:l,key:u,value:n[u]})}}),i}var ft="USER_PROFILE_SERVICE_VALIDATOR",ut=function(){function a(n){var i,u=this,l=n.clientEngine;l||(n.logger.log(c.INFO,f.INVALID_CLIENT_ENGINE,"OPTIMIZELY",l),l="node-sdk"),this.clientEngine=l,this.clientVersion=n.clientVersion||"4.9.2",this.errorHandler=n.errorHandler,this.isOptimizelyConfigValid=n.isValidInstance,this.logger=n.logger;var g=(i=n.defaultDecideOptions)!==null&&i!==void 0?i:[];Array.isArray(g)||(this.logger.log(c.DEBUG,f.INVALID_DEFAULT_DECIDE_OPTIONS,"OPTIMIZELY"),g=[]);var E={};g.forEach(function(q){o.OptimizelyDecideOption[q]?E[q]=!0:u.logger.log(c.WARNING,f.UNRECOGNIZED_DECIDE_OPTION,"OPTIMIZELY",q)}),this.defaultDecideOptions=E,this.projectConfigManager=function(q){return new Le(q)}({datafile:n.datafile,jsonSchemaValidator:n.jsonSchemaValidator,sdkKey:n.sdkKey,datafileManager:n.datafileManager}),this.disposeOnUpdate=this.projectConfigManager.onUpdate(function(q){u.logger.log(c.INFO,f.UPDATED_OPTIMIZELY_CONFIG,"OPTIMIZELY",q.revision,q.projectId),u.notificationCenter.sendNotifications(M.OPTIMIZELY_CONFIG_UPDATE)});var V,D=this.projectConfigManager.onReady(),K=null;if(n.userProfileService)try{(function(q){if(typeof q=="object"&&q!==null){if(typeof q.lookup!="function")throw new Error(U(b.INVALID_USER_PROFILE_SERVICE,ft,"Missing function 'lookup'"));if(typeof q.save!="function")throw new Error(U(b.INVALID_USER_PROFILE_SERVICE,ft,"Missing function 'save'"));return!0}throw new Error(U(b.INVALID_USER_PROFILE_SERVICE,ft))})(n.userProfileService)&&(K=n.userProfileService,this.logger.log(c.INFO,f.VALID_USER_PROFILE_SERVICE,"OPTIMIZELY"))}catch(q){this.logger.log(c.WARNING,q.message)}this.decisionService=(V={userProfileService:K,logger:this.logger,UNSTABLE_conditionEvaluators:n.UNSTABLE_conditionEvaluators},new Bt(V)),this.notificationCenter=n.notificationCenter,this.eventProcessor=n.eventProcessor;var $=this.eventProcessor.start();this.readyPromise=Promise.all([D,$]).then(function(q){return q[0]}),this.readyTimeouts={},this.nextReadyTimeoutId=0}return a.prototype.isValidInstance=function(){return this.isOptimizelyConfigValid&&!!this.projectConfigManager.getConfig()},a.prototype.activate=function(n,i,u){try{if(!this.isValidInstance())return this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","activate"),null;if(!this.validateInputs({experiment_key:n,user_id:i},u))return this.notActivatingExperiment(n,i);var l=this.projectConfigManager.getConfig();if(!l)return null;try{var g=this.getVariation(n,i,u);if(g===null)return this.notActivatingExperiment(n,i);if(!function(D,K){return z(D,K)==="Running"}(l,n))return this.logger.log(c.DEBUG,f.SHOULD_NOT_DISPATCH_ACTIVATE,"OPTIMIZELY",n),g;var E=ge(l,n),V={experiment:E,variation:E.variationKeyMap[g],decisionSource:J.EXPERIMENT};return this.sendImpressionEvent(V,"",i,!0,u),g}catch(D){return this.logger.log(c.ERROR,D.message),this.logger.log(c.INFO,f.NOT_ACTIVATING_USER,"OPTIMIZELY",i,n),this.errorHandler.handleError(D),null}}catch(D){return this.logger.log(c.ERROR,D.message),this.errorHandler.handleError(D),null}},a.prototype.sendImpressionEvent=function(n,i,u,l,g){var E=this.projectConfigManager.getConfig();if(E){var V=function(D){var K=D.configObj,$=D.decisionObj,q=D.userId,ue=D.flagKey,ye=D.enabled,Ce=D.userAttributes,Me=D.clientEngine,De=D.clientVersion,He=$.decisionSource,Ze=At($),Xe=Kt($),$e=bt($),ct=St($),ot=Xe!==null?R(K,Xe):null;return{type:"impression",timestamp:I.currentTimestamp(),uuid:I.uuid(),user:{id:q,attributes:Lt(K,Ce)},context:{accountId:K.accountId,projectId:K.projectId,revision:K.revision,clientName:Me,clientVersion:De,anonymizeIP:K.anonymizeIP||!1,botFiltering:K.botFiltering},layer:{id:ot},experiment:{id:Xe,key:Ze},variation:{id:ct,key:$e},ruleKey:Ze,flagKey:ue,ruleType:He,enabled:ye}}({decisionObj:n,flagKey:i,enabled:l,userId:u,userAttributes:g,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:E});this.eventProcessor.process(V),this.emitNotificationCenterActivate(n,i,u,l,g)}},a.prototype.emitNotificationCenterActivate=function(n,i,u,l,g){var E=this.projectConfigManager.getConfig();if(E){var V,D=n.decisionSource,K=At(n),$=Kt(n),q=bt(n),ue=St(n);$!==null&&q!==""&&(V=E.experimentIdMap[$]);var ye,Ce=kt({attributes:g,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:E,experimentId:$,ruleKey:K,flagKey:i,ruleType:D,userId:u,enabled:l,variationId:ue,logger:this.logger});V&&V.variationKeyMap&&q!==""&&(ye=V.variationKeyMap[q]),this.notificationCenter.sendNotifications(M.ACTIVATE,{experiment:V,userId:u,attributes:g,variation:ye,logEvent:Ce})}},a.prototype.track=function(n,i,u,l){try{if(!this.isValidInstance())return void this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","track");if(!this.validateInputs({user_id:i,event_key:n},u,l))return;var g=this.projectConfigManager.getConfig();if(!g)return;if(!function(V,D){return V.eventKeyMap.hasOwnProperty(D)}(g,n))return this.logger.log(c.WARNING,f.EVENT_KEY_NOT_FOUND,"OPTIMIZELY",n),void this.logger.log(c.WARNING,f.NOT_TRACKING_USER,"OPTIMIZELY",i);var E=function(V){var D=V.configObj,K=V.userId,$=V.userAttributes,q=V.clientEngine,ue=V.clientVersion,ye=V.eventKey,Ce=V.eventTags,Me=k(D,ye),De=Ce?_t(Ce,Ut):null,He=Ce?st(Ce,Ut):null;return{type:"conversion",timestamp:I.currentTimestamp(),uuid:I.uuid(),user:{id:K,attributes:Lt(D,$)},context:{accountId:D.accountId,projectId:D.projectId,revision:D.revision,clientName:q,clientVersion:ue,anonymizeIP:D.anonymizeIP||!1,botFiltering:D.botFiltering},event:{id:Me,key:ye},revenue:De,value:He,tags:Ce}}({eventKey:n,eventTags:l=this.filterEmptyValues(l),userId:i,userAttributes:u,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:g});this.logger.log(c.INFO,f.TRACK_EVENT,"OPTIMIZELY",n,i),this.eventProcessor.process(E),this.emitNotificationCenterTrack(n,i,u,l)}catch(V){this.logger.log(c.ERROR,V.message),this.errorHandler.handleError(V),this.logger.log(c.ERROR,f.NOT_TRACKING_USER,"OPTIMIZELY",i)}},a.prototype.emitNotificationCenterTrack=function(n,i,u,l){try{var g=this.projectConfigManager.getConfig();if(!g)return;var E=Gt({attributes:u,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:g,eventKey:n,eventTags:l,logger:this.logger,userId:i});this.notificationCenter.sendNotifications(M.TRACK,{eventKey:n,userId:i,attributes:u,eventTags:l,logEvent:E})}catch(V){this.logger.log(c.ERROR,V.message),this.errorHandler.handleError(V)}},a.prototype.getVariation=function(n,i,u){try{if(!this.isValidInstance())return this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getVariation"),null;try{if(!this.validateInputs({experiment_key:n,user_id:i},u))return null;var l=this.projectConfigManager.getConfig();if(!l)return null;var g=l.experimentKeyMap[n];if(!g)return this.logger.log(c.DEBUG,b.INVALID_EXPERIMENT_KEY,"OPTIMIZELY",n),null;var E=this.decisionService.getVariation(l,g,this.createUserContext(i,u)).result,V=(D=l,K=g.id,D.experimentFeatureMap.hasOwnProperty(K)?x.FEATURE_TEST:x.AB_TEST);return this.notificationCenter.sendNotifications(M.DECISION,{type:V,userId:i,attributes:u||{},decisionInfo:{experimentKey:n,variationKey:E}}),E}catch($){return this.logger.log(c.ERROR,$.message),this.errorHandler.handleError($),null}}catch($){return this.logger.log(c.ERROR,$.message),this.errorHandler.handleError($),null}var D,K},a.prototype.setForcedVariation=function(n,i,u){if(!this.validateInputs({experiment_key:n,user_id:i}))return!1;var l=this.projectConfigManager.getConfig();if(!l)return!1;try{return this.decisionService.setForcedVariation(l,n,i,u)}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),!1}},a.prototype.getForcedVariation=function(n,i){if(!this.validateInputs({experiment_key:n,user_id:i}))return null;var u=this.projectConfigManager.getConfig();if(!u)return null;try{return this.decisionService.getForcedVariation(u,n,i).result}catch(l){return this.logger.log(c.ERROR,l.message),this.errorHandler.handleError(l),null}},a.prototype.validateInputs=function(n,i,u){try{if(n.hasOwnProperty("user_id")){var l=n.user_id;if(typeof l!="string"||l===null||l==="undefined")throw new Error(U(b.INVALID_INPUT_FORMAT,"OPTIMIZELY","user_id"));delete n.user_id}return Object.keys(n).forEach(function(g){if(!Ot(n[g]))throw new Error(U(b.INVALID_INPUT_FORMAT,"OPTIMIZELY",g))}),i&&function(g){if(typeof g!="object"||Array.isArray(g)||g===null)throw new Error(U(b.INVALID_ATTRIBUTES,"ATTRIBUTES_VALIDATOR"));Object.keys(g).forEach(function(E){if(g[E]===void 0)throw new Error(U(b.UNDEFINED_ATTRIBUTE,"ATTRIBUTES_VALIDATOR",E))})}(i),u&&function(g){if(typeof g!="object"||Array.isArray(g)||g===null)throw new Error(U(b.INVALID_EVENT_TAGS,"EVENT_TAGS_VALIDATOR"))}(u),!0}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),!1}},a.prototype.notActivatingExperiment=function(n,i){return this.logger.log(c.INFO,f.NOT_ACTIVATING_USER,"OPTIMIZELY",i,n),null},a.prototype.filterEmptyValues=function(n){for(var i in n)!n.hasOwnProperty(i)||n[i]!==null&&n[i]!==void 0||delete n[i];return n},a.prototype.isFeatureEnabled=function(n,i,u){try{if(!this.isValidInstance())return this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","isFeatureEnabled"),!1;if(!this.validateInputs({feature_key:n,user_id:i},u))return!1;var l=this.projectConfigManager.getConfig();if(!l)return!1;var g=oe(l,n,this.logger);if(!g)return!1;var E={},V=this.createUserContext(i,u),D=this.decisionService.getVariationForFeature(l,g,V).result,K=D.decisionSource,$=At(D),q=bt(D),ue=vt(D);K===J.FEATURE_TEST&&(E={experimentKey:$,variationKey:q}),(K===J.FEATURE_TEST||K===J.ROLLOUT&&pe(l))&&this.sendImpressionEvent(D,g.key,i,ue,u),ue===!0?this.logger.log(c.INFO,f.FEATURE_ENABLED_FOR_USER,"OPTIMIZELY",n,i):(this.logger.log(c.INFO,f.FEATURE_NOT_ENABLED_FOR_USER,"OPTIMIZELY",n,i),ue=!1);var ye={featureKey:n,featureEnabled:ue,source:D.decisionSource,sourceInfo:E};return this.notificationCenter.sendNotifications(M.DECISION,{type:x.FEATURE,userId:i,attributes:u||{},decisionInfo:ye}),ue}catch(Ce){return this.logger.log(c.ERROR,Ce.message),this.errorHandler.handleError(Ce),!1}},a.prototype.getEnabledFeatures=function(n,i){var u=this;try{var l=[];if(!this.isValidInstance())return this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getEnabledFeatures"),l;if(!this.validateInputs({user_id:n}))return l;var g=this.projectConfigManager.getConfig();return g&&A(g.featureKeyMap).forEach(function(E){u.isFeatureEnabled(E.key,n,i)&&l.push(E.key)}),l}catch(E){return this.logger.log(c.ERROR,E.message),this.errorHandler.handleError(E),[]}},a.prototype.getFeatureVariable=function(n,i,u,l){try{return this.isValidInstance()?this.getFeatureVariableForType(n,i,null,u,l):(this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariable"),null)}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),null}},a.prototype.getFeatureVariableForType=function(n,i,u,l,g){if(!this.validateInputs({feature_key:n,variable_key:i,user_id:l},g))return null;var E=this.projectConfigManager.getConfig();if(!E)return null;var V=oe(E,n,this.logger);if(!V)return null;var D=function(Ce,Me,De,He){var Ze=Ce.featureKeyMap[Me];if(!Ze)return He.log(c.ERROR,b.FEATURE_NOT_IN_DATAFILE,Ae,Me),null;var Xe=Ze.variableKeyMap[De];return Xe||(He.log(c.ERROR,b.VARIABLE_KEY_NOT_IN_DATAFILE,Ae,De,Me),null)}(E,n,i,this.logger);if(!D)return null;if(u&&D.type!==u)return this.logger.log(c.WARNING,f.VARIABLE_REQUESTED_WITH_WRONG_TYPE,"OPTIMIZELY",u,D.type),null;var K=this.createUserContext(l,g),$=this.decisionService.getVariationForFeature(E,V,K).result,q=vt($),ue=this.getFeatureVariableValueFromVariation(n,q,$.variation,D,l),ye={};return $.decisionSource===J.FEATURE_TEST&&$.experiment!==null&&$.variation!==null&&(ye={experimentKey:$.experiment.key,variationKey:$.variation.key}),this.notificationCenter.sendNotifications(M.DECISION,{type:x.FEATURE_VARIABLE,userId:l,attributes:g||{},decisionInfo:{featureKey:n,featureEnabled:q,source:$.decisionSource,variableKey:i,variableValue:ue,variableType:D.type,sourceInfo:ye}}),ue},a.prototype.getFeatureVariableValueFromVariation=function(n,i,u,l,g){var E=this.projectConfigManager.getConfig();if(!E)return null;var V=l.defaultValue;if(u!==null){var D=function(K,$,q,ue){if(!$||!q)return null;if(!K.variationVariableUsageMap.hasOwnProperty(q.id))return ue.log(c.ERROR,b.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,Ae,q.id),null;var ye=K.variationVariableUsageMap[q.id][$.id];return ye?ye.value:null}(E,l,u,this.logger);D!==null?i?(V=D,this.logger.log(c.INFO,f.USER_RECEIVED_VARIABLE_VALUE,"OPTIMIZELY",V,l.key,n)):this.logger.log(c.INFO,f.FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",n,g,V):this.logger.log(c.INFO,f.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",l.key,u.key)}else this.logger.log(c.INFO,f.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",g,l.key,n);return function(K,$,q){var ue;switch($){case Ee.BOOLEAN:K!=="true"&&K!=="false"?(q.log(c.ERROR,b.UNABLE_TO_CAST_VALUE,Ae,K,$),ue=null):ue=K==="true";break;case Ee.INTEGER:ue=parseInt(K,10),isNaN(ue)&&(q.log(c.ERROR,b.UNABLE_TO_CAST_VALUE,Ae,K,$),ue=null);break;case Ee.DOUBLE:ue=parseFloat(K),isNaN(ue)&&(q.log(c.ERROR,b.UNABLE_TO_CAST_VALUE,Ae,K,$),ue=null);break;case Ee.JSON:try{ue=JSON.parse(K)}catch(ye){q.log(c.ERROR,b.UNABLE_TO_CAST_VALUE,Ae,K,$),ue=null}break;default:ue=K}return ue}(V,l.type,this.logger)},a.prototype.getFeatureVariableBoolean=function(n,i,u,l){try{return this.isValidInstance()?this.getFeatureVariableForType(n,i,Ee.BOOLEAN,u,l):(this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableBoolean"),null)}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),null}},a.prototype.getFeatureVariableDouble=function(n,i,u,l){try{return this.isValidInstance()?this.getFeatureVariableForType(n,i,Ee.DOUBLE,u,l):(this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableDouble"),null)}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),null}},a.prototype.getFeatureVariableInteger=function(n,i,u,l){try{return this.isValidInstance()?this.getFeatureVariableForType(n,i,Ee.INTEGER,u,l):(this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableInteger"),null)}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),null}},a.prototype.getFeatureVariableString=function(n,i,u,l){try{return this.isValidInstance()?this.getFeatureVariableForType(n,i,Ee.STRING,u,l):(this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableString"),null)}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),null}},a.prototype.getFeatureVariableJSON=function(n,i,u,l){try{return this.isValidInstance()?this.getFeatureVariableForType(n,i,Ee.JSON,u,l):(this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableJSON"),null)}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),null}},a.prototype.getAllFeatureVariables=function(n,i,u){var l=this;try{if(!this.isValidInstance())return this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","getAllFeatureVariables"),null;if(!this.validateInputs({feature_key:n,user_id:i},u))return null;var g=this.projectConfigManager.getConfig();if(!g)return null;var E=oe(g,n,this.logger);if(!E)return null;var V=this.createUserContext(i,u),D=this.decisionService.getVariationForFeature(g,E,V).result,K=vt(D),$={};E.variables.forEach(function(ue){$[ue.key]=l.getFeatureVariableValueFromVariation(n,K,D.variation,ue,i)});var q={};return D.decisionSource===J.FEATURE_TEST&&D.experiment!==null&&D.variation!==null&&(q={experimentKey:D.experiment.key,variationKey:D.variation.key}),this.notificationCenter.sendNotifications(M.DECISION,{type:x.ALL_FEATURE_VARIABLES,userId:i,attributes:u||{},decisionInfo:{featureKey:n,featureEnabled:K,source:D.decisionSource,variableValues:$,sourceInfo:q}}),$}catch(ue){return this.logger.log(c.ERROR,ue.message),this.errorHandler.handleError(ue),null}},a.prototype.getOptimizelyConfig=function(){try{return this.projectConfigManager.getConfig()?this.projectConfigManager.getOptimizelyConfig():null}catch(n){return this.logger.log(c.ERROR,n.message),this.errorHandler.handleError(n),null}},a.prototype.close=function(){var n=this;try{var i=this.eventProcessor.stop();return this.disposeOnUpdate&&(this.disposeOnUpdate(),this.disposeOnUpdate=null),this.projectConfigManager&&this.projectConfigManager.stop(),Object.keys(this.readyTimeouts).forEach(function(u){var l=n.readyTimeouts[u];clearTimeout(l.readyTimeout),l.onClose()}),this.readyTimeouts={},i.then(function(){return{success:!0}},function(u){return{success:!1,reason:String(u)}})}catch(u){return this.logger.log(c.ERROR,u.message),this.errorHandler.handleError(u),Promise.resolve({success:!1,reason:String(u)})}},a.prototype.onReady=function(n){var i,u,l=this;typeof n=="object"&&n!==null&&n.timeout!==void 0&&(i=n.timeout),I.isSafeInteger(i)||(i=3e4);var g=new Promise(function(D){u=D}),E=this.nextReadyTimeoutId;this.nextReadyTimeoutId++;var V=setTimeout(function(){delete l.readyTimeouts[E],u({success:!1,reason:U("onReady timeout expired after %s ms",i)})},i);return this.readyTimeouts[E]={readyTimeout:V,onClose:function(){u({success:!1,reason:"Instance closed"})}},this.readyPromise.then(function(){clearTimeout(V),delete l.readyTimeouts[E],u({success:!0})}),Promise.race([this.readyPromise,g])},a.prototype.createUserContext=function(n,i){return this.validateInputs({user_id:n},i)?new Ke({optimizely:this,userId:n,attributes:i}):null},a.prototype.decide=function(n,i,u){var l,g,E,V,D=this;u===void 0&&(u=[]);var K,$=n.getUserId(),q=n.getAttributes(),ue=this.projectConfigManager.getConfig(),ye=[];if(!this.isValidInstance()||!ue)return this.logger.log(c.INFO,f.INVALID_OBJECT,"OPTIMIZELY","decide"),ke(i,n,[G.SDK_NOT_READY]);var Ce=ue.featureKeyMap[i];if(!Ce)return this.logger.log(c.ERROR,b.FEATURE_NOT_IN_DATAFILE,"OPTIMIZELY",i),ke(i,n,[U(G.FLAG_KEY_INVALID,i)]);var Me=this.getAllDecideOptions(u),De=this.decisionService.findValidatedForcedDecision(ue,n,i);ye.push.apply(ye,De.reasons);var He=De.result;if(He)K={experiment:null,variation:He,decisionSource:J.FEATURE_TEST};else{var Ze=this.decisionService.getVariationForFeature(ue,Ce,n,Me);ye.push.apply(ye,Ze.reasons),K=Ze.result}var Xe=K.decisionSource,$e=(g=(l=K.experiment)===null||l===void 0?void 0:l.key)!==null&&g!==void 0?g:null,ct=(V=(E=K.variation)===null||E===void 0?void 0:E.key)!==null&&V!==void 0?V:null,ot=vt(K);ot===!0?this.logger.log(c.INFO,f.FEATURE_ENABLED_FOR_USER,"OPTIMIZELY",i,$):this.logger.log(c.INFO,f.FEATURE_NOT_ENABLED_FOR_USER,"OPTIMIZELY",i,$);var pt={},Ct=!1;Me[o.OptimizelyDecideOption.EXCLUDE_VARIABLES]||Ce.variables.forEach(function(dt){pt[dt.key]=D.getFeatureVariableValueFromVariation(i,ot,K.variation,dt,$)}),!Me[o.OptimizelyDecideOption.DISABLE_DECISION_EVENT]&&(Xe===J.FEATURE_TEST||Xe===J.ROLLOUT&&pe(ue))&&(this.sendImpressionEvent(K,i,$,ot,q),Ct=!0);var Ft=[];Me[o.OptimizelyDecideOption.INCLUDE_REASONS]&&(Ft=ye.map(function(dt){return U.apply(void 0,L([dt[0]],dt.slice(1)))}));var xt={flagKey:i,enabled:ot,variationKey:ct,ruleKey:$e,variables:pt,reasons:Ft,decisionEventDispatched:Ct};return this.notificationCenter.sendNotifications(M.DECISION,{type:x.FLAG,userId:$,attributes:q,decisionInfo:xt}),{variationKey:ct,enabled:ot,variables:pt,ruleKey:$e,flagKey:i,userContext:n,reasons:Ft}},a.prototype.getAllDecideOptions=function(n){var i=this,u=F({},this.defaultDecideOptions);return Array.isArray(n)?n.forEach(function(l){o.OptimizelyDecideOption[l]?u[l]=!0:i.logger.log(c.WARNING,f.UNRECOGNIZED_DECIDE_OPTION,"OPTIMIZELY",l)}):this.logger.log(c.DEBUG,f.INVALID_DECIDE_OPTIONS,"OPTIMIZELY"),u},a.prototype.decideForKeys=function(n,i,u){var l=this;u===void 0&&(u=[]);var g={};if(!this.isValidInstance())return this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","decideForKeys"),g;if(i.length===0)return g;var E=this.getAllDecideOptions(u);return i.forEach(function(V){var D=l.decide(n,V,u);E[o.OptimizelyDecideOption.ENABLED_FLAGS_ONLY]&&!D.enabled||(g[V]=D)}),g},a.prototype.decideAll=function(n,i){i===void 0&&(i=[]);var u=this.projectConfigManager.getConfig();if(!this.isValidInstance()||!u)return this.logger.log(c.ERROR,f.INVALID_OBJECT,"OPTIMIZELY","decideAll"),{};var l=Object.keys(u.featureKeyMap);return this.decideForKeys(n,l,i)},a}(),zt=function(a){return!(typeof a!="number"||!I.isSafeInteger(a))&&a>=1},Jt=function(a){return!(typeof a!="number"||!I.isSafeInteger(a))&&a>0},Qt=function(){function a(n){var i=this;this.logger=n.logger,this.errorHandler=n.errorHandler,this.notificationListeners={},A(M).forEach(function(u){i.notificationListeners[u]=[]}),this.listenerId=1}return a.prototype.addNotificationListener=function(n,i){try{if(!(A(M).indexOf(n)>-1))return-1;this.notificationListeners[n]||(this.notificationListeners[n]=[]);var u=!1;if((this.notificationListeners[n]||[]).forEach(function(g){g.callback!==i||(u=!0)}),u)return-1;this.notificationListeners[n].push({id:this.listenerId,callback:i});var l=this.listenerId;return this.listenerId+=1,l}catch(g){return this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g),-1}},a.prototype.removeNotificationListener=function(n){var i=this;try{var u,l;if(Object.keys(this.notificationListeners).some(function(g){return(i.notificationListeners[g]||[]).every(function(E,V){return E.id!==n||(u=V,l=g,!1)}),u!==void 0&&l!==void 0}),u!==void 0&&l!==void 0)return this.notificationListeners[l].splice(u,1),!0}catch(g){this.logger.log(c.ERROR,g.message),this.errorHandler.handleError(g)}return!1},a.prototype.clearAllNotificationListeners=function(){var n=this;try{A(M).forEach(function(i){n.notificationListeners[i]=[]})}catch(i){this.logger.log(c.ERROR,i.message),this.errorHandler.handleError(i)}},a.prototype.clearNotificationListeners=function(n){try{this.notificationListeners[n]=[]}catch(i){this.logger.log(c.ERROR,i.message),this.errorHandler.handleError(i)}},a.prototype.sendNotifications=function(n,i){var u=this;try{(this.notificationListeners[n]||[]).forEach(function(l){var g=l.callback;try{g(i)}catch(E){u.logger.log(c.ERROR,f.NOTIFICATION_LISTENER_EXCEPTION,"NOTIFICATION_CENTER",n,E.message)}})}catch(l){this.logger.log(c.ERROR,l.message),this.errorHandler.handleError(l)}},a}(),qt={createEventProcessor:function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];return new(m.LogTierV1EventProcessor.bind.apply(m.LogTierV1EventProcessor,L([void 0],a)))},LocalStoragePendingEventsDispatcher:m.LocalStoragePendingEventsDispatcher};function Ht(a,n,i,u){var l={sdkKey:a};if((u===void 0||typeof u=="object"&&u!==null)&&I.assign(l,u),i){var g=ae({datafile:i,jsonSchemaValidator:void 0,logger:n}),E=g.configObj,V=g.error;V&&n.error(V),E&&(l.datafile=X(E))}return new N.HttpPollingDatafileManager(l)}var lt=v.getLogger();v.setLogHandler(Ue()),v.setLogLevel(v.LogLevel.INFO);var Dt=!1,Wt=function(a){try{var n=!1;a.errorHandler&&v.setErrorHandler(a.errorHandler),a.logger&&(v.setLogHandler(a.logger),v.setLogLevel(v.LogLevel.NOTSET)),a.logLevel!==void 0&&v.setLogLevel(a.logLevel);try{ie(a),n=!0}catch(q){lt.error(q)}var i=void 0;a.eventDispatcher==null?(i=new m.LocalStoragePendingEventsDispatcher({eventDispatcher:Se}),Dt||(i.sendPendingEvents(),Dt=!0)):i=a.eventDispatcher;var u=a.eventBatchSize,l=a.eventFlushInterval;zt(a.eventBatchSize)||(lt.warn("Invalid eventBatchSize %s, defaulting to %s",a.eventBatchSize,10),u=10),Jt(a.eventFlushInterval)||(lt.warn("Invalid eventFlushInterval %s, defaulting to %s",a.eventFlushInterval,1e3),l=1e3);var g=v.getErrorHandler(),E=new Qt({logger:lt,errorHandler:g}),V={dispatcher:i,flushInterval:l,batchSize:u,maxQueueSize:a.eventMaxQueueSize||1e4,notificationCenter:E},D=F(F({clientEngine:"javascript-sdk"},a),{eventProcessor:qt.createEventProcessor(V),logger:lt,errorHandler:g,datafileManager:a.sdkKey?Ht(a.sdkKey,lt,a.datafile,a.datafileOptions):void 0,notificationCenter:E,isValidInstance:n}),K=new ut(D);try{if(typeof window.addEventListener=="function"){var $="onpagehide"in window?"pagehide":"unload";window.addEventListener($,function(){K.close()},!1)}}catch(q){lt.error(f.UNABLE_TO_ATTACH_UNLOAD,"INDEX_BROWSER",q.message)}return K}catch(q){return lt.error(q),null}},Yt=function(){Dt=!1},er={logging:Pe,errorHandler:ce,eventDispatcher:Se,enums:W,setLogger:v.setLogHandler,setLogLevel:v.setLogLevel,createInstance:Wt,__internalResetRetryState:Yt,OptimizelyDecideOption:o.OptimizelyDecideOption};Object.defineProperty(o,"setLogLevel",{enumerable:!0,get:function(){return v.setLogLevel}}),Object.defineProperty(o,"setLogger",{enumerable:!0,get:function(){return v.setLogHandler}}),o.__internalResetRetryState=Yt,o.createInstance=Wt,o.default=er,o.enums=W,o.errorHandler=ce,o.eventDispatcher=Se,o.logging=Pe},6773:(re,o,d)=>{var S;S={value:!0};var v=d(8042),m=d(4605),h=d(9848),_=d(165);function N(B){return B&&typeof B=="object"&&"default"in B?B:{default:B}}var F=N(h),L=v.createContext({optimizely:null,isServerSide:!1,timeout:0}),P=L.Consumer,j=L.Provider;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var p=function(B,R){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,k){w.__proto__=k}||function(w,k){for(var z in k)k.hasOwnProperty(z)&&(w[z]=k[z])},p(B,R)};function A(B,R){p(B,R);function w(){this.constructor=B}B.prototype=R===null?Object.create(R):(w.prototype=R.prototype,new w)}var T=function(){return T=Object.assign||function(R){for(var w,k=1,z=arguments.length;k<z;k++){w=arguments[k];for(var Q in w)Object.prototype.hasOwnProperty.call(w,Q)&&(R[Q]=w[Q])}return R},T.apply(this,arguments)};function C(B,R){var w={};for(var k in B)Object.prototype.hasOwnProperty.call(B,k)&&R.indexOf(k)<0&&(w[k]=B[k]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var z=0,k=Object.getOwnPropertySymbols(B);z<k.length;z++)R.indexOf(k[z])<0&&Object.prototype.propertyIsEnumerable.call(B,k[z])&&(w[k[z]]=B[k[z]]);return w}function O(B,R){if(B.id!==R.id)return!1;var w=Object.keys(B.attributes||{}),k=Object.keys(R.attributes||{});w.sort(),k.sort();var z=B.attributes||{},Q=R.attributes||{},ge=w.length===k.length;if(!ge)return!1;for(var ve=0;ve<w.length;ve++){var fe=w[ve],Ie=k[ve];if(fe!==Ie||z[fe]!==Q[Ie])return!1}return!0}function U(B,R,w){var k=function(z,Q){return v.createElement(B,T({},z,{forwardedRef:Q}))};return k.displayName=w+"("+(R.displayName||R.name)+")",F.default(v.forwardRef(k),R)}function M(B){return typeof B=="object"&&B!==null?B:{}}function I(B,R){var w=M(B),k=M(R),z=Object.keys(w),Q=Object.keys(k);return z.length!==Q.length?!1:z.every(function(ge){return ge in k&&w[ge]===k[ge]})}function c(B,R,w){return{enabled:!1,flagKey:B,ruleKey:null,variationKey:null,variables:{},reasons:[R],userContext:{id:w.id,attributes:w.attributes}}}var b=m.getLogger("<OptimizelyProvider>"),f=function(B){A(R,B);function R(w){var k=B.call(this,w)||this,z=w.optimizely,Q=w.userId,ge=w.userAttributes,ve=w.user,fe=null;if(ve?"then"in ve?ve.then(function(Ie){z.setUser(Ie)}):fe={id:ve.id,attributes:ve.attributes||{}}:Q&&(fe={id:Q,attributes:ge||{}},b.warn("Passing userId and userAttributes as props is deprecated, please switch to using `user` prop")),fe)if(!z)b.error("Unable to set user "+fe+" because optimizely object does not exist.");else try{z.setUser(fe)}catch(Ie){b.error("Unable to set user "+fe+" because passed in optimizely object does not contain the setUser function.")}return k}return R.prototype.componentDidUpdate=function(w){if(!w.isServerSide){var k=this.props.optimizely;this.props.user&&"id"in this.props.user&&(k.user.id?O({id:k.user.id,attributes:k.user.attributes||{}},{id:this.props.user.id,attributes:this.props.user.attributes||{}})||k.setUser(this.props.user):k.setUser(this.props.user))}},R.prototype.render=function(){var w=this.props,k=w.optimizely,z=w.children,Q=w.timeout,ge=!!this.props.isServerSide,ve={optimizely:k,isServerSide:ge,timeout:Q};return v.createElement(j,{value:ve},z)},R}(v.Component),te=function(B,R,w,k,z){var Q="re-evaluating "+R+'="'+w+'" for user="'+B.user.id+'"',ge=B.notificationCenter.addNotificationListener(_.enums.NOTIFICATION_TYPES.OPTIMIZELY_CONFIG_UPDATE,function(){k.info(_.enums.NOTIFICATION_TYPES.OPTIMIZELY_CONFIG_UPDATE+", "+Q),z()}),ve=function(){return B.notificationCenter.removeNotificationListener(ge)},fe=B.onUserUpdate(function(){k.info("User update, "+Q),z()});return function(){ve(),fe()}},x=function(){function B(){this.observers=[]}return B.getInstance=function(){return B.instance||(B.instance=new B),B.instance},B.prototype.subscribe=function(R,w){var k=this,z="key-"+Math.floor(1e5+Math.random()*999999);return this.observers.push({subscriptionId:z,key:R,callback:w}),function(){var Q=k.observers.findIndex(function(ge){return ge.subscriptionId===z});Q>=0&&k.observers.splice(Q,1)}},B.prototype.notify=function(R){this.observers.filter(function(w){return w.key===R}).forEach(function(w){return w.callback()})},B}(),J=x.getInstance(),se=m.getLogger("ReactSDK"),Ee;(function(B){B.EXPERIMENT="Experiment",B.FEATURE="Feature"})(Ee||(Ee={}));function _e(B,R){return B.entityKey===R.entityKey&&B.overrideUserId===R.overrideUserId&&I(B.overrideAttributes,R.overrideAttributes)}function G(B,R,w){B.onReady({timeout:R}).then(function(k){if(k.success){se.info("Client became ready"),w({clientReady:!0,didTimeout:!1});return}switch(k.reason){case"NO_CLIENT":se.warn('Client not ready, reason="'+k.message+'"'),w({clientReady:!1,didTimeout:!1}),k.dataReadyPromise.then(function(){se.info("Client became ready."),w({clientReady:!0,didTimeout:!1})});break;default:se.info("Client did not become ready before timeout of "+R+'ms, reason="'+k.message+'"'),w({clientReady:!1,didTimeout:!0}),k.dataReadyPromise.then(function(){se.info("Client became ready after timeout already elapsed"),w({clientReady:!0,didTimeout:!0})})}}).catch(function(){se.error("Error initializing client. The core client or user promise(s) rejected.")})}function W(B){var R=v.useRef();return I(B,R.current)||(R.current=B),R.current}var Y=function(B,R,w){R===void 0&&(R={}),w===void 0&&(w={});var k=v.useContext(L),z=k.optimizely,Q=k.isServerSide,ge=k.timeout;if(!z)return se.error("Unable to use experiment "+B+". optimizely prop must be supplied via a parent <OptimizelyProvider>"),[null,!1,!1];var ve=W(w.overrideAttributes),fe=v.useCallback(function(){return{variation:z.activate(B,w.overrideUserId,ve)}},[z,B,w.overrideUserId,ve]),Ie=Q||z.isReady(),oe=v.useState(function(){var Oe=Ie?fe():{variation:null};return T({},Oe,{clientReady:Ie,didTimeout:!1})}),X=oe[0],ae=oe[1],pe={entityKey:B,overrideUserId:w.overrideUserId,overrideAttributes:ve},Re=v.useState(pe),Te=Re[0],Le=Re[1];_e(Te,pe)||(Le(pe),ae(function(Oe){return T({},Oe,fe())}));var Ve=R.timeout!==void 0?R.timeout:ge;return v.useEffect(function(){(z.getIsUsingSdkKey()&&!z.getIsReadyPromiseFulfilled()||!Ie)&&G(z,Ve,function(Oe){ae(T({},fe(),Oe))})},[]),v.useEffect(function(){return z.getIsReadyPromiseFulfilled()&&R.autoUpdate?te(z,Ee.EXPERIMENT,B,se,function(){ae(function(Oe){return T({},Oe,fe())})}):function(){}},[z.getIsReadyPromiseFulfilled(),R.autoUpdate,z,B,fe]),v.useEffect(function(){return z.onForcedVariationsUpdate(function(){ae(function(Oe){return T({},Oe,fe())})})},[fe,z]),[X.variation,X.clientReady,X.didTimeout]},Z=function(B,R,w){R===void 0&&(R={}),w===void 0&&(w={});var k=v.useContext(L),z=k.optimizely,Q=k.isServerSide,ge=k.timeout;if(!z)return se.error("Unable to properly use feature "+B+". optimizely prop must be supplied via a parent <OptimizelyProvider>"),[!1,{},!1,!1];var ve=W(w.overrideAttributes),fe=v.useCallback(function(){return{isEnabled:z.isFeatureEnabled(B,w.overrideUserId,ve),variables:z.getFeatureVariables(B,w.overrideUserId,ve)}},[z,B,w.overrideUserId,ve]),Ie=Q||z.isReady(),oe=v.useState(function(){var Oe=Ie?fe():{isEnabled:!1,variables:{}};return T({},Oe,{clientReady:Ie,didTimeout:!1})}),X=oe[0],ae=oe[1],pe={entityKey:B,overrideUserId:w.overrideUserId,overrideAttributes:w.overrideAttributes},Re=v.useState(pe),Te=Re[0],Le=Re[1];_e(Te,pe)||(Le(pe),ae(function(Oe){return T({},Oe,fe())}));var Ve=R.timeout!==void 0?R.timeout:ge;return v.useEffect(function(){(z.getIsUsingSdkKey()||!Ie)&&G(z,Ve,function(Oe){ae(T({},fe(),Oe))})},[]),v.useEffect(function(){return z.getIsReadyPromiseFulfilled()&&R.autoUpdate?te(z,Ee.FEATURE,B,se,function(){ae(function(Oe){return T({},Oe,fe())})}):function(){}},[z.getIsReadyPromiseFulfilled(),R.autoUpdate,z,B,fe]),[X.isEnabled,X.variables,X.clientReady,X.didTimeout]},ie=function(B,R,w){R===void 0&&(R={}),w===void 0&&(w={});var k=v.useContext(L),z=k.optimizely,Q=k.isServerSide,ge=k.timeout;if(!z)return se.error("Unable to use decision "+B+". optimizely prop must be supplied via a parent <OptimizelyProvider>"),[c(B,"Optimizely SDK not configured properly yet.",{id:null,attributes:{}}),!1,!1];var ve=W(w.overrideAttributes),fe=function(){return{decision:z.decide(B,R.decideOptions,w.overrideUserId,ve)}},Ie=Q||z.isReady(),oe=v.useState(function(){var Oe=Ie?fe():{decision:c(B,"Optimizely SDK not configured properly yet.",{id:w.overrideUserId||null,attributes:ve})};return T({},Oe,{clientReady:Ie,didTimeout:!1})}),X=oe[0],ae=oe[1],pe={entityKey:B,overrideUserId:w.overrideUserId,overrideAttributes:w.overrideAttributes},Re=v.useState(pe),Te=Re[0],Le=Re[1];_e(Te,pe)||(Le(pe),ae(function(Oe){return T({},Oe,fe())}));var Ve=R.timeout!==void 0?R.timeout:ge;return v.useEffect(function(){(z.getIsUsingSdkKey()||!Ie)&&G(z,Ve,function(Oe){ae(T({},fe(),Oe))})},[]),v.useEffect(function(){if(!(w.overrideUserId||w.overrideAttributes||!R.autoUpdate))return J.subscribe(B,function(){ae(function(Oe){return T({},Oe,fe())})})},[w.overrideUserId,w.overrideAttributes,R.autoUpdate]),v.useEffect(function(){return z.getIsReadyPromiseFulfilled()&&R.autoUpdate?te(z,Ee.FEATURE,B,se,function(){ae(function(Oe){return T({},Oe,fe())})}):function(){}},[z.getIsReadyPromiseFulfilled(),R.autoUpdate,z,B,fe]),[X.decision,X.clientReady,X.didTimeout]},ee=function(B){var R=B.feature,w=B.timeout,k=B.autoUpdate,z=B.children,Q=B.overrideUserId,ge=B.overrideAttributes,ve=Z(R,{timeout:w,autoUpdate:k},{overrideUserId:Q,overrideAttributes:ge}),fe=ve[0],Ie=ve[1],oe=ve[2],X=ve[3];return!oe&&!X?null:v.createElement(v.Fragment,null,z(fe,Ie,oe,X))},ce=ee;function me(B){var R=function(k){A(z,k);function z(){return k!==null&&k.apply(this,arguments)||this}return z.prototype.render=function(){var Q=this.props,ge=Q.forwardedRef,ve=C(Q,["forwardedRef"]);return v.createElement(P,null,function(fe){return v.createElement(B,T({},ve,{optimizelyReadyTimeout:fe.timeout,optimizely:fe.optimizely,isServerSide:fe.isServerSide,ref:ge}))})},z}(v.Component),w=U(R,B,"withOptimizely");return w}var Se=function(B){var R=B.experiment,w=B.autoUpdate,k=B.timeout,z=B.overrideUserId,Q=B.overrideAttributes,ge=B.children,ve=Y(R,{timeout:k,autoUpdate:w},{overrideUserId:z,overrideAttributes:Q}),fe=ve[0],Ie=ve[1],oe=ve[2];if(!Ie&&!oe)return null;if(ge!=null&&typeof ge=="function")return v.createElement(v.Fragment,null,ge(fe,Ie,oe));var X=null;return v.Children.forEach(ge,function(ae){X||!v.isValidElement(ae)||(ae.props.variation?fe===ae.props.variation&&(X=ae):ae.props.default&&(X=ae))}),X?v.cloneElement(X,{variation:fe}):null},he=Se,Ue=function(B){var R=B.children;return v.createElement(v.Fragment,null,R)},Be=Ue,ne=m.getLogger("ReactSDK"),Pe="react-sdk",ke="2.9.1",Ke=5e3,We=function(){function B(R){var w=this;this.user={id:null,attributes:{}},this.userContext=null,this.isUserPromiseResolved=!1,this.onUserUpdateHandlers=[],this.onForcedVariationsUpdateHandlers=[],this.forcedDecisionFlagKeys=new Set,this.isClientReady=!1,this.isReadyPromiseFulfilled=!1,this.isUserReady=!1,this.isUsingSdkKey=!1,this.initialConfig=R,this.userPromiseResolver=function(){};var k=T({},R,{clientEngine:Pe,clientVersion:ke});this._client=_.createInstance(k),this.isClientReady=!!k.datafile,this.isUsingSdkKey=!!k.sdkKey,this.userPromise=new Promise(function(z){w.userPromiseResolver=z}).then(function(){return w.isUserReady=!0,{success:!0}}),this._client?(this._client.onReady().then(function(){w.isClientReady=!0}),this.dataReadyPromise=Promise.all([this.userPromise,this._client.onReady()]).then(function(){return w.isReadyPromiseFulfilled=!0,{success:!0,message:"Successfully resolved datafile and user information."}})):(ne.warn("Unable to resolve datafile and user information because Optimizely client failed to initialize."),this.dataReadyPromise=new Promise(function(z,Q){z({success:!1,reason:"NO_CLIENT",message:"Optimizely client failed to initialize."})}))}return B.prototype.getIsReadyPromiseFulfilled=function(){return this.isReadyPromiseFulfilled},B.prototype.getIsUsingSdkKey=function(){return this.isUsingSdkKey},B.prototype.onReady=function(R){var w=this;R===void 0&&(R={});var k,z=Ke;R&&R.timeout!==void 0&&(z=R.timeout);var Q=new Promise(function(ge){k=setTimeout(function(){ge({success:!1,reason:"TIMEOUT",message:"failed to initialize onReady before timeout, either the datafile or user info was not set before the timeout",dataReadyPromise:w.dataReadyPromise})},z)});return Promise.race([this.dataReadyPromise,Q]).then(function(ge){return clearTimeout(k),ge})},B.prototype.getUserContextInstance=function(R){if(!this._client)return ne.warn('Unable to get user context for user id "%s" because Optimizely client failed to initialize.',R.id),null;var w=null;return this.userContext?O(R,this.user)?this.userContext:R.id?(w=this._client.createUserContext(R.id,R.attributes),w):null:R.id?(this.userContext=this._client.createUserContext(R.id,R.attributes),this.userContext):null},B.prototype.setUser=function(R){var w=this;R.id&&(this.user.id=R.id,this.isUserReady=!0,this._client?this.userContext=this._client.createUserContext(R.id,R.attributes):ne.warn('Unable to create user context for user id "%s" because Optimizely client failed to initialize.',this.user.id)),R.attributes&&(this.user.attributes=R.attributes),this.isUserPromiseResolved||(this.userPromiseResolver(this.user),this.isUserPromiseResolved=!0),this.onUserUpdateHandlers.forEach(function(k){return k(w.user)})},B.prototype.onUserUpdate=function(R){var w=this;return this.onUserUpdateHandlers.push(R),function(){var k=w.onUserUpdateHandlers.indexOf(R);k>-1&&w.onUserUpdateHandlers.splice(k,1)}},B.prototype.onForcedVariationsUpdate=function(R){var w=this;return this.onForcedVariationsUpdateHandlers.push(R),function(){var k=w.onForcedVariationsUpdateHandlers.indexOf(R);k>-1&&w.onForcedVariationsUpdateHandlers.splice(k,1)}},B.prototype.isReady=function(){return this.isUserReady&&this.isClientReady},B.prototype.activate=function(R,w,k){if(!this._client)return ne.warn('Unable to activate experiment "%s" because Optimizely client failed to initialize.',R),null;var z=this.getUserContextWithOverrides(w,k);return z.id===null?(ne.info('Unable to activate experiment "%s" because User ID is not set',R),null):this._client.activate(R,z.id,z.attributes)},B.prototype.decide=function(R,w,k,z){if(w===void 0&&(w=[]),!this._client)return ne.warn('Unable to evaluate feature "%s" because Optimizely client failed to initialize.',R),c(R,"Unable to evaluate flag "+R+" because Optimizely client failed to initialize.",this.user);var Q=this.getUserContextWithOverrides(k,z);if(Q.id===null)return ne.info('Unable to evaluate feature "%s" because User ID is not set.',R),c(R,"Unable to evaluate flag "+R+" because User ID is not set.",Q);var ge=this.getUserContextInstance(Q);return ge?T({},ge.decide(R,w),{userContext:{id:Q.id,attributes:Q.attributes}}):c(R,"Not Evaluating flag "+R+" because user id or attributes are not valid",Q)},B.prototype.decideForKeys=function(R,w,k,z){if(w===void 0&&(w=[]),!this._client)return ne.warn("Unable to evaluate features for keys because Optimizely client failed to initialize."),{};var Q=this.getUserContextWithOverrides(k,z);if(Q.id===null)return ne.info("Unable to evaluate features for keys because User ID is not set"),{};var ge=this.getUserContextInstance(Q);return ge?Object.entries(ge.decideForKeys(R,w)).reduce(function(ve,fe){var Ie=fe[0],oe=fe[1];return ve[Ie]=T({},oe,{userContext:{id:Q.id||"",attributes:Q.attributes}}),ve},{}):{}},B.prototype.decideAll=function(R,w,k){if(R===void 0&&(R=[]),!this._client)return ne.warn("Unable to evaluate all feature decisions because Optimizely client is not initialized."),{};var z=this.getUserContextWithOverrides(w,k);if(z.id===null)return ne.info("Unable to evaluate all feature decisions because User ID is not set"),{};var Q=this.getUserContextInstance(z);return Q?Object.entries(Q.decideAll(R)).reduce(function(ge,ve){var fe=ve[0],Ie=ve[1];return ge[fe]=T({},Ie,{userContext:{id:z.id||"",attributes:z.attributes}}),ge},{}):{}},B.prototype.getVariation=function(R,w,k){if(!this._client)return ne.warn('Unable to get variation for experiment "%s" because Optimizely client failed to initialize.',R),null;var z=this.getUserContextWithOverrides(w,k);return z.id===null?(ne.info('Unable to get variation for experiment "%s" because User ID is not set',R),null):this._client.getVariation(R,z.id,z.attributes)},B.prototype.track=function(R,w,k,z){if(!this._client){ne.warn('Unable to send tracking event "%s" because Optimizely client failed to initialize.',R);return}typeof w!="undefined"&&typeof w!="string"&&(z=w,w=void 0,k=void 0);var Q=this.getUserContextWithOverrides(w,k);if(Q.id===null){ne.info('Unable to send tracking event "%s" because User ID is not set',R);return}this._client.track(R,Q.id,Q.attributes,z)},B.prototype.setForcedDecision=function(R,w){if(!this.userContext){ne.warn("Unable to set a forced decision because the user context has not been set yet.");return}var k=this.userContext.setForcedDecision(R,w);k&&(this.forcedDecisionFlagKeys.add(R.flagKey),J.notify(R.flagKey))},B.prototype.getForcedDecision=function(R){return this.userContext?this.userContext.getForcedDecision(R):(ne.warn("Unable to get a forced decision because the user context has not been set yet."),null)},B.prototype.removeForcedDecision=function(R){if(!this.userContext)return ne.warn("Unable to remove forced decisions because the user context has not been set yet."),!1;var w=this.userContext.removeForcedDecision(R);return w&&(this.forcedDecisionFlagKeys.delete(R.flagKey),J.notify(R.flagKey)),w},B.prototype.removeAllForcedDecisions=function(){if(!this.userContext)return ne.warn("Unable to remove all forced decisions because the user context has not been set yet."),!1;var R=this.userContext.removeAllForcedDecisions();return R&&(this.forcedDecisionFlagKeys.forEach(function(w){return J.notify(w)}),this.forcedDecisionFlagKeys.clear()),R},B.prototype.isFeatureEnabled=function(R,w,k){if(!this._client)return ne.warn('Unable to determine if feature "%s" is enabled because Optimizely client failed to initialize.',R),!1;var z=this.getUserContextWithOverrides(w,k);return z.id===null?(ne.info('Unable to determine if feature "%s" is enabled because User ID is not set',R),!1):this._client.isFeatureEnabled(R,z.id,z.attributes)},B.prototype.getFeatureVariables=function(R,w,k){var z=this;if(!this._client)return ne.warn('Unable to get feature variables for feature "%s" because Optimizely client failed to initialize.',R),{};var Q=this.getUserContextWithOverrides(w,k),ge=Q.id;if(ge===null)return ne.warn('Unable to get feature variables for feature "%s" because User ID is not set',R),{};var ve=Q.attributes,fe={},Ie=this._client.getOptimizelyConfig();if(!Ie)return ne.warn('Unable to retrieve feature variables for feature "%s" because Optimizely client failed to initialize.',R),{};var oe=Ie.featuresMap[R];return oe?(Object.keys(oe.variablesMap).forEach(function(X){var ae=oe.variablesMap[X];fe[ae.key]=z._client.getFeatureVariable(R,ae.key,ge,ve)}),fe):(ne.info('Unable to retrieve feature variables for feature "%s" because config features map is not set',R),{})},B.prototype.getFeatureVariableString=function(R,w,k,z){if(!this._client)return ne.warn('Unable to get feature variable string from feature "%s" because Optimizely client failed to initialize.',R),null;var Q=this.getUserContextWithOverrides(k,z);return Q.id===null?(ne.info('Unable to get feature variable string from feature "%s" because User ID is not set',R),null):this._client.getFeatureVariableString(R,w,Q.id,Q.attributes)},B.prototype.getFeatureVariableBoolean=function(R,w,k,z){if(!this._client)return ne.warn('Unable to get feature variable boolean from feature "%s" because Optimizely client failed to initialize.',R),null;var Q=this.getUserContextWithOverrides(k,z);return Q.id===null?(ne.info('Unable to get feature variable boolean from feature "%s" because User ID is not set',R),null):this._client.getFeatureVariableBoolean(R,w,Q.id,Q.attributes)},B.prototype.getFeatureVariableInteger=function(R,w,k,z){if(!this._client)return ne.warn('Unable to get feature variable integer from feature "%s" because Optimizely client failed to initialize.',R),null;var Q=this.getUserContextWithOverrides(k,z);return Q.id===null?(ne.info('Unable to get feature variable integer from feature "%s" because User ID is not set',R),null):this._client.getFeatureVariableInteger(R,w,Q.id,Q.attributes)},B.prototype.getFeatureVariableDouble=function(R,w,k,z){if(!this._client)return ne.warn('Unable to get feature variable double from feature "%s" because Optimizely client failed to initialize.',R),null;var Q=this.getUserContextWithOverrides(k,z);return Q.id===null?(ne.info('Unable to get feature variable double from feature "%s" because User ID is not set',R),null):this._client.getFeatureVariableDouble(R,w,Q.id,Q.attributes)},B.prototype.getFeatureVariableJSON=function(R,w,k,z){if(!this._client)return ne.warn('Unable to get feature variable JSON from feature "%s" because Optimizely client failed to initialize.',R),null;var Q=this.getUserContextWithOverrides(k,z);return Q.id===null?(ne.info('Unable to get feature variable JSON from feature "%s" because User ID is not set',R),null):this._client.getFeatureVariableJSON(R,w,Q.id,Q.attributes)},B.prototype.getFeatureVariable=function(R,w,k,z){if(!this._client)return ne.warn('Unable to get feature variable from feature "%s" because Optimizely client failed to initialize.',R,w),null;var Q=this.getUserContextWithOverrides(k,z);return Q.id===null?(ne.info('Unable to get feature variable from feature "%s" because User ID is not set',R,w),null):this._client.getFeatureVariable(R,w,Q.id,Q.attributes)},B.prototype.getAllFeatureVariables=function(R,w,k){if(!this._client)return ne.warn('Unable to get all feature variables from feature "%s" because Optimizely client failed to initialize.',R),{};var z=this.getUserContextWithOverrides(w,k);return z.id===null?(ne.info('Unable to get all feature variables from feature "%s" because User ID is not set',R),{}):this._client.getAllFeatureVariables(R,z.id,z.attributes)},B.prototype.getEnabledFeatures=function(R,w){if(!this._client)return ne.warn("Unable to get list of enabled features because Optimizely client failed to initialize."),[];var k=this.getUserContextWithOverrides(R,w);return k.id===null?(ne.info("Unable to get list of enabled features because User ID is not set"),[]):this._client.getEnabledFeatures(k.id,k.attributes)},B.prototype.getForcedVariation=function(R,w){if(!this._client)return ne.warn('Unable to get forced variation for experiment "%s" because Optimizely client failed to initialize.',R),null;var k=this.getUserContextWithOverrides(w);return k.id===null?(ne.info('Unable to get forced variation for experiment "%s" because User ID is not set',R),null):this._client.getForcedVariation(R,k.id)},B.prototype.setForcedVariation=function(R,w,k){if(!this._client)return ne.warn('Unable to set forced variation for experiment "%s" because Optimizely client failed to initialize.',R),!1;var z=null,Q=null;if(arguments.length===2)Q=w,z=this.getUserContextWithOverrides().id;else if(arguments.length===3){if(z=this.getUserContextWithOverrides(w).id,k===void 0)return!1;Q=k}if(z===null)return ne.warn('Unable to set forced variation for experiment "%s" because User ID is not set',R),!1;var ge=this._client.setForcedVariation(R,z,Q);return this.onForcedVariationsUpdateHandlers.forEach(function(ve){return ve()}),ge},B.prototype.getOptimizelyConfig=function(){return this._client?this._client.getOptimizelyConfig():(ne.warn("Unable to get Optimizely configuration because Optimizely client failed to initialize."),null)},B.prototype.close=function(){return this._client?this._client.close():new Promise(function(R,w){return R({success:!0,reason:"Optimizely client is not initialized."})})},Object.defineProperty(B.prototype,"client",{get:function(){return this._client?this._client:(ne.warn("Unable to get client because Optimizely client failed to initialize."),null)},enumerable:!0,configurable:!0}),Object.defineProperty(B.prototype,"notificationCenter",{get:function(){return this._client?this._client.notificationCenter:{addNotificationListener:function(){return ne.warn("Unable to add notification listener because Optimizely client failed to initialize."),0},removeNotificationListener:function(){return ne.warn("Unable to remove notification listener because Optimizely client failed to initialize."),!1},clearAllNotificationListeners:function(){ne.warn("Unable to clear all notification listeners because Optimizely client failed to initialize.")},clearNotificationListeners:function(){ne.warn("Unable to clear notification listeners because Optimizely client failed to initialize.")}}},enumerable:!0,configurable:!0}),B.prototype.getUserContextWithOverrides=function(R,w){var k=R===void 0?this.user.id:R,z=w===void 0?this.user.attributes:w;return{id:k,attributes:z}},B}();function Ne(B){return new We(B)}var ze=m.getLogger("ReactSDK"),Ae={dispatchEvent:function(B,R){ze.debug("Event not dispatched by disabled event dispatcher: %s",function(){var w;try{w=JSON.stringify(B)}catch(k){w="error stringifying event"}return w}),R({statusCode:204})}};S={enumerable:!0,get:function(){return _.OptimizelyDecideOption}},Object.defineProperty(o,"kE",{enumerable:!0,get:function(){return _.enums}}),S={enumerable:!0,get:function(){return _.errorHandler}},S={enumerable:!0,get:function(){return _.eventDispatcher}},S={enumerable:!0,get:function(){return _.logging}},S={enumerable:!0,get:function(){return _.setLogLevel}},S={enumerable:!0,get:function(){return _.setLogger}},S=L,S=P,S=j,S=he,o.bt=ce,o.dH=f,S=Be,o.Fs=Ne,S=Ae,S=ie,S=Y,S=Z,S=me},4218:re=>{var o=4,d=.001,S=1e-7,v=10,m=11,h=1/(m-1),_=typeof Float32Array=="function";function N(C,O){return 1-3*O+3*C}function F(C,O){return 3*O-6*C}function L(C){return 3*C}function P(C,O,U){return((N(O,U)*C+F(O,U))*C+L(O))*C}function j(C,O,U){return 3*N(O,U)*C*C+2*F(O,U)*C+L(O)}function p(C,O,U,M,I){var c,b,f=0;do b=O+(U-O)/2,c=P(b,M,I)-C,c>0?U=b:O=b;while(Math.abs(c)>S&&++f<v);return b}function A(C,O,U,M){for(var I=0;I<o;++I){var c=j(O,U,M);if(c===0)return O;var b=P(O,U,M)-C;O-=b/c}return O}function T(C){return C}re.exports=function(O,U,M,I){if(!(0<=O&&O<=1&&0<=M&&M<=1))throw new Error("bezier x values must be in [0, 1] range");if(O===U&&M===I)return T;for(var c=_?new Float32Array(m):new Array(m),b=0;b<m;++b)c[b]=P(b*h,O,M);function f(te){for(var x=0,J=1,se=m-1;J!==se&&c[J]<=te;++J)x+=h;--J;var Ee=(te-c[J])/(c[J+1]-c[J]),_e=x+Ee*h,G=j(_e,O,M);return G>=d?A(te,_e,O,M):G===0?_e:p(te,x,x+h,O,M)}return function(x){return x===0?0:x===1?1:P(f(x),U,I)}}},8361:(re,o)=>{var d,S;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){"use strict";var v={}.hasOwnProperty;function m(){for(var h=[],_=0;_<arguments.length;_++){var N=arguments[_];if(!!N){var F=typeof N;if(F==="string"||F==="number")h.push(N);else if(Array.isArray(N)){if(N.length){var L=m.apply(null,N);L&&h.push(L)}}else if(F==="object")if(N.toString===Object.prototype.toString)for(var P in N)v.call(N,P)&&N[P]&&h.push(P);else h.push(N.toString())}}return h.join(" ")}re.exports?(m.default=m,re.exports=m):(d=[],S=function(){return m}.apply(o,d),S!==void 0&&(re.exports=S))})()},4035:(re,o,d)=>{d.d(o,{GV:()=>h,Gv:()=>m,Sk:()=>S,WQ:()=>_,ZO:()=>v});var S="data-focus-lock",v="data-focus-lock-disabled",m="data-no-focus-lock",h="data-autofocus-inside",_="data-no-autofocus"},6989:(re,o,d)=>{if(d.d(o,{p:()=>j}),d.j==452)var S=d(7550);if(d.j==452)var v=d(1630);if(d.j==452)var m=d(9952);if(d.j==452)var h=d(2847);if(d.j==452)var _=d(611);if(d.j==452)var N=d(253);if(d.j==452)var F=d(1200);var L=function(p){return function(A){var T;return A.autofocus||!!(!((T=(0,N.pY)(A))===null||T===void 0)&&T.autofocus)||p.indexOf(A)>=0}},P=function(p,A){var T=new Map;return A.forEach(function(C){return T.set(C.node,C)}),p.map(function(C){return T.get(C)}).filter(N.$K)},j=function(p,A){var T=document&&(0,_.v)(),C=(0,m.K)(p).filter(N.IS),O=(0,F.V0)(T||p,p,C),U=new Map,M=(0,v.fF)(C,U),I=(0,v.dH)(C,U).filter(function(J){var se=J.node;return(0,N.IS)(se)});if(!(!I[0]&&(I=M,!I[0]))){var c=(0,v.fF)([O],U).map(function(J){var se=J.node;return se}),b=P(c,I),f=b.map(function(J){var se=J.node;return se}),te=(0,S.V)(f,c,T,A);if(te===S.Z){var x=(0,v.vA)(M.map(function(J){var se=J.node;return se})).filter(L((0,F.o$)(C,U)));return{node:x&&x.length?(0,h.a)(x):(0,h.a)((0,v.vA)(f))}}return te===void 0?te:b[te]}}},3383:(re,o,d)=>{if(d.d(o,{k:()=>_}),d.j==452)var S=d(6989);var v=function(N,F){"focus"in N&&N.focus(F),"contentWindow"in N&&N.contentWindow&&N.contentWindow.focus()},m=0,h=!1,_=function(N,F,L){L===void 0&&(L={});var P=(0,S.p)(N,F);if(!h&&P){if(m>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),h=!0,setTimeout(function(){h=!1},1);return}m++,v(P.node,L.focusOptions),m--}}},7550:(re,o,d)=>{if(d.d(o,{V:()=>_,Z:()=>h}),d.j==452)var S=d(9861);if(d.j==452)var v=d(2847);if(d.j==452)var m=d(253);var h="NEW_FOCUS",_=function(N,F,L,P){var j=N.length,p=N[0],A=N[j-1],T=(0,m.Z9)(L);if(!(L&&N.indexOf(L)>=0)){var C=L!==void 0?F.indexOf(L):-1,O=P?F.indexOf(P):C,U=P?N.indexOf(P):-1,M=C-O,I=F.indexOf(p),c=F.indexOf(A),b=(0,S.T)(F),f=L!==void 0?b.indexOf(L):-1,te=f-(P?b.indexOf(P):C),x=(0,v.L)(N,0),J=(0,v.L)(N,j-1);if(C===-1||U===-1)return h;if(!M&&U>=0)return U;if(C<=I&&T&&Math.abs(M)>1)return J;if(C>=c&&T&&Math.abs(M)>1)return x;if(M&&Math.abs(te)>1)return U;if(C<=I)return J;if(C>c)return x;if(M)return Math.abs(M)>1?U:(j+U+M)%j}}},1630:(re,o,d)=>{if(d.d(o,{dH:()=>F,fF:()=>L,ir:()=>P,r3:()=>j,vA:()=>N}),d.j==452)var S=d(8788);if(d.j==452)var v=d(253);if(d.j==452)var m=d(7318);if(d.j==452)var h=d(9071);var _=function(p,A){return(0,S.q)(p).filter(function(T){return(0,v.bh)(A,T)}).filter(function(T){return(0,v.Zo)(T)})},N=function(p,A){return A===void 0&&(A=new Map),(0,S.q)(p).filter(function(T){return(0,v.gm)(A,T)})},F=function(p,A,T){return(0,m.v)(_((0,h.s)(p,T),A),!0,T)},L=function(p,A){return(0,m.v)(_((0,h.s)(p),A),!1)},P=function(p,A){return _((0,h.B)(p),A)},j=function(p,A){return(p.shadowRoot?j(p.shadowRoot,A):Object.getPrototypeOf(p).contains.call(p,A))||(0,S.q)(p.children).some(function(T){return j(T,A)})}},9952:(re,o,d)=>{if(d.d(o,{K:()=>_}),d.j==452)var S=d(4035);if(d.j==452)var v=d(8788);var m=function(N){for(var F=new Set,L=N.length,P=0;P<L;P+=1)for(var j=P+1;j<L;j+=1){var p=N[P].compareDocumentPosition(N[j]);(p&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&F.add(j),(p&Node.DOCUMENT_POSITION_CONTAINS)>0&&F.add(P)}return N.filter(function(A,T){return!F.has(T)})},h=function(N){return N.parentNode?h(N.parentNode):N},_=function(N){var F=(0,v._)(N);return F.filter(Boolean).reduce(function(L,P){var j=P.getAttribute(S.Sk);return L.push.apply(L,j?m((0,v.q)(h(P).querySelectorAll("[".concat(S.Sk,'="').concat(j,'"]:not([').concat(S.ZO,'="disabled"])')))):[P]),L},[])}},8788:(re,o,d)=>{d.d(o,{_:()=>v,q:()=>S});var S=function(m){for(var h=Array(m.length),_=0;_<m.length;++_)h[_]=m[_];return h},v=function(m){return Array.isArray(m)?m:[m]}},9861:(re,o,d)=>{if(d.d(o,{O:()=>m,T:()=>h}),d.j==452)var S=d(253);var v=function(_,N){return N.filter(S.MH).filter(function(F){return F.name===_.name}).filter(function(F){return F.checked})[0]||_},m=function(_,N){return(0,S.MH)(_)&&_.name?v(_,N):_},h=function(_){var N=new Set;return _.forEach(function(F){return N.add(m(F,_))}),_.filter(function(F){return N.has(F)})}},2847:(re,o,d)=>{if(d.d(o,{L:()=>m,a:()=>v}),d.j==452)var S=d(9861);var v=function(h){return h[0]&&h.length>1?(0,S.O)(h[0],h):h[0]},m=function(h,_){return h.length>1?h.indexOf((0,S.O)(h[_],h)):_}},611:(re,o,d)=>{d.d(o,{v:()=>v});var S=function(m){return m.activeElement?m.activeElement.shadowRoot?S(m.activeElement.shadowRoot):m.activeElement:void 0},v=function(){return document.activeElement?document.activeElement.shadowRoot?S(document.activeElement.shadowRoot):document.activeElement:void 0}},253:(re,o,d)=>{if(d.d(o,{$K:()=>M,IS:()=>U,MH:()=>A,Z9:()=>O,Zo:()=>T,bh:()=>N,gm:()=>L,pY:()=>P}),d.j==452)var S=d(4035);var v=function(I){if(I.nodeType!==Node.ELEMENT_NODE)return!1;var c=window.getComputedStyle(I,null);return!c||!c.getPropertyValue?!1:c.getPropertyValue("display")==="none"||c.getPropertyValue("visibility")==="hidden"},m=function(I){return I.parentNode&&I.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.parentNode.host:I.parentNode},h=function(I){return I===document||I&&I.nodeType===Node.DOCUMENT_NODE},_=function(I,c){return!I||h(I)||!v(I)&&c(m(I))},N=function(I,c){var b=I.get(c);if(b!==void 0)return b;var f=_(c,N.bind(void 0,I));return I.set(c,f),f},F=function(I,c){return I&&!h(I)?C(I)?c(m(I)):!1:!0},L=function(I,c){var b=I.get(c);if(b!==void 0)return b;var f=F(c,L.bind(void 0,I));return I.set(c,f),f},P=function(I){return I.dataset},j=function(I){return I.tagName==="BUTTON"},p=function(I){return I.tagName==="INPUT"},A=function(I){return p(I)&&I.type==="radio"},T=function(I){return!((p(I)||j(I))&&(I.type==="hidden"||I.disabled))},C=function(I){var c=I.getAttribute(S.WQ);return![!0,"true",""].includes(c)},O=function(I){var c;return Boolean(I&&((c=P(I))===null||c===void 0?void 0:c.focusGuard))},U=function(I){return!O(I)},M=function(I){return Boolean(I)}},1200:(re,o,d)=>{if(d.d(o,{V0:()=>_,o$:()=>N}),d.j==452)var S=d(1630);if(d.j==452)var v=d(8788);var m=function(F,L){return L===void 0&&(L=[]),L.push(F),F.parentNode&&m(F.parentNode.host||F.parentNode,L),L},h=function(F,L){for(var P=m(F),j=m(L),p=0;p<P.length;p+=1){var A=P[p];if(j.indexOf(A)>=0)return A}return!1},_=function(F,L,P){var j=(0,v._)(F),p=(0,v._)(L),A=j[0],T=!1;return p.filter(Boolean).forEach(function(C){T=h(T||C,C)||T,P.filter(Boolean).forEach(function(O){var U=h(A,O);U&&(!T||(0,S.r3)(U,T)?T=U:T=h(U,T))})}),T},N=function(F,L){return F.reduce(function(P,j){return P.concat((0,S.ir)(j,L))},[])}},7318:(re,o,d)=>{if(d.d(o,{v:()=>m}),d.j==452)var S=d(8788);var v=function(h,_){var N=h.tabIndex-_.tabIndex,F=h.index-_.index;if(N){if(!h.tabIndex)return 1;if(!_.tabIndex)return-1}return N||F},m=function(h,_,N){return(0,S.q)(h).map(function(F,L){return{node:F,index:L,tabIndex:N&&F.tabIndex===-1?(F.dataset||{}).focusGuard?0:-1:F.tabIndex}}).filter(function(F){return!_||F.tabIndex>=0}).sort(v)}},9071:(re,o,d)=>{d.d(o,{s:()=>F,B:()=>L});var S=d(4035),v=d(8788),m=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],h=m.join(","),_="".concat(h,", [data-focus-guard]"),N=function(P,j){var p;return(0,v.q)(((p=P.shadowRoot)===null||p===void 0?void 0:p.children)||P.children).reduce(function(A,T){return A.concat(T.matches(j?_:h)?[T]:[],N(T))},[])},F=function(P,j){return P.reduce(function(p,A){return p.concat(N(A,j),A.parentNode?(0,v.q)(A.parentNode.querySelectorAll(h)).filter(function(T){return T===A}):[])},[])},L=function(P){var j=P.querySelectorAll("[".concat(S.GV,"]"));return(0,v.q)(j).map(function(p){return F([p])}).reduce(function(p,A){return p.concat(A)},[])}},9848:(re,o,d)=>{var S=d(9082),v={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},m={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},h={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},N={};N[S.ForwardRef]=h,N[S.Memo]=_;function F(O){return S.isMemo(O)?_:N[O.$$typeof]||v}var L=Object.defineProperty,P=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,A=Object.getPrototypeOf,T=Object.prototype;function C(O,U,M){if(typeof U!="string"){if(T){var I=A(U);I&&I!==T&&C(O,I,M)}var c=P(U);j&&(c=c.concat(j(U)));for(var b=F(O),f=F(U),te=0;te<c.length;++te){var x=c[te];if(!m[x]&&!(M&&M[x])&&!(f&&f[x])&&!(b&&b[x])){var J=p(U,x);try{L(O,x,J)}catch(se){}}}}return O}re.exports=C},2225:(re,o,d)=>{var S="Expected a function",v=NaN,m="[object Symbol]",h=/^\s+|\s+$/g,_=/^[-+]0x[0-9a-f]+$/i,N=/^0b[01]+$/i,F=/^0o[0-7]+$/i,L=parseInt,P=typeof d.g=="object"&&d.g&&d.g.Object===Object&&d.g,j=typeof self=="object"&&self&&self.Object===Object&&self,p=P||j||Function("return this")(),A=Object.prototype,T=A.toString,C=Math.max,O=Math.min,U=function(){return p.Date.now()};function M(x,J,se){var Ee,_e,G,W,Y,Z,ie=0,ee=!1,ce=!1,me=!0;if(typeof x!="function")throw new TypeError(S);J=te(J)||0,c(se)&&(ee=!!se.leading,ce="maxWait"in se,G=ce?C(te(se.maxWait)||0,J):G,me="trailing"in se?!!se.trailing:me);function Se(Ne){var ze=Ee,Ae=_e;return Ee=_e=void 0,ie=Ne,W=x.apply(Ae,ze),W}function he(Ne){return ie=Ne,Y=setTimeout(ne,J),ee?Se(Ne):W}function Ue(Ne){var ze=Ne-Z,Ae=Ne-ie,B=J-ze;return ce?O(B,G-Ae):B}function Be(Ne){var ze=Ne-Z,Ae=Ne-ie;return Z===void 0||ze>=J||ze<0||ce&&Ae>=G}function ne(){var Ne=U();if(Be(Ne))return Pe(Ne);Y=setTimeout(ne,Ue(Ne))}function Pe(Ne){return Y=void 0,me&&Ee?Se(Ne):(Ee=_e=void 0,W)}function ke(){Y!==void 0&&clearTimeout(Y),ie=0,Ee=Z=_e=Y=void 0}function Ke(){return Y===void 0?W:Pe(U())}function We(){var Ne=U(),ze=Be(Ne);if(Ee=arguments,_e=this,Z=Ne,ze){if(Y===void 0)return he(Z);if(ce)return Y=setTimeout(ne,J),Se(Z)}return Y===void 0&&(Y=setTimeout(ne,J)),W}return We.cancel=ke,We.flush=Ke,We}function I(x,J,se){var Ee=!0,_e=!0;if(typeof x!="function")throw new TypeError(S);return c(se)&&(Ee="leading"in se?!!se.leading:Ee,_e="trailing"in se?!!se.trailing:_e),M(x,J,{leading:Ee,maxWait:J,trailing:_e})}function c(x){var J=typeof x;return!!x&&(J=="object"||J=="function")}function b(x){return!!x&&typeof x=="object"}function f(x){return typeof x=="symbol"||b(x)&&T.call(x)==m}function te(x){if(typeof x=="number")return x;if(f(x))return v;if(c(x)){var J=typeof x.valueOf=="function"?x.valueOf():x;x=c(J)?J+"":J}if(typeof x!="string")return x===0?x:+x;x=x.replace(h,"");var se=N.test(x);return se||F.test(x)?L(x.slice(2),se?2:8):_.test(x)?v:+x}re.exports=I},5436:re=>{(function(){var o=this;function d(h,_){for(var N=h.length,F=_^N,L=0,P;N>=4;)P=h.charCodeAt(L)&255|(h.charCodeAt(++L)&255)<<8|(h.charCodeAt(++L)&255)<<16|(h.charCodeAt(++L)&255)<<24,P=(P&65535)*1540483477+(((P>>>16)*1540483477&65535)<<16),P^=P>>>24,P=(P&65535)*1540483477+(((P>>>16)*1540483477&65535)<<16),F=(F&65535)*1540483477+(((F>>>16)*1540483477&65535)<<16)^P,N-=4,++L;switch(N){case 3:F^=(h.charCodeAt(L+2)&255)<<16;case 2:F^=(h.charCodeAt(L+1)&255)<<8;case 1:F^=h.charCodeAt(L)&255,F=(F&65535)*1540483477+(((F>>>16)*1540483477&65535)<<16)}return F^=F>>>13,F=(F&65535)*1540483477+(((F>>>16)*1540483477&65535)<<16),F^=F>>>15,F>>>0}function S(h,_){var N,F,L,P,j,p,A,T,C,O;for(N=h.length&3,F=h.length-N,L=_,j=3432918353,A=461845907,O=0;O<F;)C=h.charCodeAt(O)&255|(h.charCodeAt(++O)&255)<<8|(h.charCodeAt(++O)&255)<<16|(h.charCodeAt(++O)&255)<<24,++O,C=(C&65535)*j+(((C>>>16)*j&65535)<<16)&4294967295,C=C<<15|C>>>17,C=(C&65535)*A+(((C>>>16)*A&65535)<<16)&4294967295,L^=C,L=L<<13|L>>>19,P=(L&65535)*5+(((L>>>16)*5&65535)<<16)&4294967295,L=(P&65535)+27492+(((P>>>16)+58964&65535)<<16);switch(C=0,N){case 3:C^=(h.charCodeAt(O+2)&255)<<16;case 2:C^=(h.charCodeAt(O+1)&255)<<8;case 1:C^=h.charCodeAt(O)&255,C=(C&65535)*j+(((C>>>16)*j&65535)<<16)&4294967295,C=C<<15|C>>>17,C=(C&65535)*A+(((C>>>16)*A&65535)<<16)&4294967295,L^=C}return L^=h.length,L^=L>>>16,L=(L&65535)*2246822507+(((L>>>16)*2246822507&65535)<<16)&4294967295,L^=L>>>13,L=(L&65535)*3266489909+(((L>>>16)*3266489909&65535)<<16)&4294967295,L^=L>>>16,L>>>0}var v=S;if(v.v2=d,v.v3=S,!0)re.exports=v;else var m})()},4966:(re,o,d)=>{var S=d(6760);function v(){}function m(){}m.resetWarningCache=v,re.exports=function(){function h(F,L,P,j,p,A){if(A!==S){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}h.isRequired=h;function _(){return h}var N={array:h,bigint:h,bool:h,func:h,number:h,object:h,string:h,symbol:h,any:h,arrayOf:_,element:h,elementType:h,instanceOf:_,node:h,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:m,resetWarningCache:v};return N.PropTypes=N,N}},7611:(re,o,d)=>{if(!1)var S,v;else re.exports=d(4966)()},6760:re=>{var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";re.exports=o},7270:(re,o)=>{function d(){return!1}function S(){return!0}function v(e,t){return arguments.length===1?r=>v(e,r):Number(e)+Number(t)}const m=e=>Array.prototype.slice.call(e);function h(e,t=[]){return(...r)=>(s=>s.length>=e.length?e(...s):h(e,s))([...t,...r])}function _(e,t,r){const s=e<0?r.length+e:e;if(e>=r.length||s<0)return r;const y=m(r);return y[s]=t(y[s]),y}const N=h(_);function F(e,t){if(arguments.length===1)return r=>F(e,r);for(let r=0;r<t.length;r++)if(!e(t[r]))return!1;return!0}function L(e){return(...t)=>{let r=0;for(;r<e.length;){if(!e[r](...t))return!1;r++}return!0}}function P(e){return t=>e}function j(e,t){return arguments.length===1?r=>j(e,r):e&&t}function p(e,t){if(arguments.length===1)return s=>p(e,s);let r=0;for(;r<t.length;){if(e(t[r],r))return!0;r++}return!1}function A(e){return(...t)=>{let r=0;for(;r<e.length;){if(e[r](...t))return!0;r++}return!1}}function T(e,t){if(arguments.length===1)return s=>T(e,s);if(typeof t=="string")return t.split("").concat(e);const r=m(t);return r.push(e),r}function C(e,t){return arguments.length===1?r=>C(e,r):e.apply(this,t)}const{isArray:O}=Array;function U(e,t=0){for(const r in e)e.hasOwnProperty(r)===!1||r==="constructor"||(typeof e[r]=="object"&&(t=Math.max(t,U(e[r]))),typeof e[r]=="function"&&(t=Math.max(t,e[r].length)));return t}function M(){const e=[];let t=0;const r=arguments.length;for(;t<r&&typeof arguments[t]!="undefined";)e[t]=arguments[t],t++;return e}function I(e,t,r){const s=t-r.length;if(s===1)return H=>I(e,t,M(...r,H));if(s===2)return(H,le)=>I(e,t,M(...r,H,le));if(s===3)return(H,le,be)=>I(e,t,M(...r,H,le,be));if(s===4)return(H,le,be,Ye)=>I(e,t,M(...r,H,le,be,Ye));if(s>4)return(...H)=>I(e,t,M(...r,...H));if(O(e)){const H=[];let le=0;const be=e.length;for(;le<be;le++)(typeof e[le]=="object"||O(e[le]))&&(H[le]=I(e[le],t,r)),typeof e[le]=="function"&&(H[le]=e[le](...r));return H}const y={};for(const H in e)if(!(e.hasOwnProperty(H)===!1||H==="constructor")){if(typeof e[H]=="object"){y[H]=I(e[H],t,r);continue}typeof e[H]=="function"&&(y[H]=e[H](...r))}return y}function c(e,...t){const r=U(e);return r===0?()=>({}):I(e,r,t)}function b(e,t,r){return Object.assign({},r,{[e]:t})}const f=h(b);function te(e){return e<<0===e}const x=Number.isInteger||te;function J(e,t,r){const s=typeof e=="string"?e.split(".").map(H=>x(Number(H))?Number(H):H):e;if(s.length===0)return t;const y=s[0];if(s.length>1){const le=typeof r!="object"||r===null||!r.hasOwnProperty(y)?x(s[1])?[]:{}:r[y];t=J(Array.prototype.slice.call(s,1),t,le)}if(x(y)&&O(r)){const H=m(r);return H[y]=t,H}return f(y,t,r)}const se=h(J);function Ee(e,t,r){return function(){let s=0,y=0;const H=t.length,le=arguments.length,be=new Array(H+le);for(;s<H;)be[s]=t[s],s++;for(;y<le;)be[H+y]=arguments[y],y++;const Ye=e-be.length;return be.length>=e?r.apply(this,be):_e(Ye,Ee(e,be,r))}}function _e(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(r){return t.apply(this,arguments)};case 2:return function(r,s){return t.apply(this,arguments)};case 3:return function(r,s,y){return t.apply(this,arguments)};case 4:return function(r,s,y,H){return t.apply(this,arguments)};case 5:return function(r,s,y,H,le){return t.apply(this,arguments)};case 6:return function(r,s,y,H,le,be){return t.apply(this,arguments)};case 7:return function(r,s,y,H,le,be,Ye){return t.apply(this,arguments)};case 8:return function(r,s,y,H,le,be,Ye,Je){return t.apply(this,arguments)};case 9:return function(r,s,y,H,le,be,Ye,Je,qe){return t.apply(this,arguments)};default:return function(r,s,y,H,le,be,Ye,Je,qe,gt){return t.apply(this,arguments)}}}function G(e,t){if(arguments.length===1)return r=>G(e,r);if(e>10)throw new Error("First argument to _arity must be a non-negative integer no greater than ten");return _e(e,Ee(e,[],t))}function W(e,t){return arguments.length===1?r=>W(e,r):G(e.length,(...r)=>e.apply(t,r))}function Y(e,t){return arguments.length===1?r=>Y(e,r):(...r)=>e(...r)&&t(...r)}function Z(e,t){return arguments.length===1?r=>Z(e,r):[].concat(...t.map(e))}function ie(e,t,r){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");if(r>=e&&r<=t)return r;if(r>t)return t;if(r<e)return e}const ee=h(ie);function ce(e){const t=O(e)?Array(e.length):{};if(e&&e.getTime)return new Date(e.getTime());for(const r in e){const s=e[r];t[r]=typeof s=="object"&&s!==null?s.getTime?new Date(s.getTime()):ce(s):s}return t}function me(e){return(...t)=>!e(...t)}class Se{constructor(t){this.value=t}}function he(e,t,r){if(!O(r))throw new TypeError("reduce: list must be array or iterable");let s=0;const y=r.length;for(;s<y;){if(t=e(t,r[s],s,r),t instanceof Se)return t.value;s++}return t}const Ue=h(he),Be=e=>new Se(e);function ne(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(r){return t.apply(this,arguments)};case 2:return function(r,s){return t.apply(this,arguments)};case 3:return function(r,s,y){return t.apply(this,arguments)};case 4:return function(r,s,y,H){return t.apply(this,arguments)};case 5:return function(r,s,y,H,le){return t.apply(this,arguments)};case 6:return function(r,s,y,H,le,be){return t.apply(this,arguments)};case 7:return function(r,s,y,H,le,be,Ye){return t.apply(this,arguments)};case 8:return function(r,s,y,H,le,be,Ye,Je){return t.apply(this,arguments)};case 9:return function(r,s,y,H,le,be,Ye,Je,qe){return t.apply(this,arguments)};case 10:return function(r,s,y,H,le,be,Ye,Je,qe,gt){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Pe(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function ke(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return ne(arguments[0].length,he(Pe,arguments[0],Array.prototype.slice.call(arguments,1,1/0)))}function Ke(){if(arguments.length===0)throw new Error("compose requires at least one argument");return ke.apply(this,Array.prototype.slice.call(arguments,0).reverse())}function We(e,t){return arguments.length===1?r=>We(e,r):typeof e=="string"?`${e}${t}`:[...e,...t]}function Ne(e){return t=>{let r=!1,s;return e.forEach(([y,H])=>{!r&&y(t)&&(r=!0,s=H(t))}),s}}const ze="Incorrect iterable input",{keys:Ae}=Object;function B(e,t,r=!1){let s=0;const y=Array(t.length);for(;s<t.length;)y[s]=r?e(t[s],s):e(t[s]),s++;return y}function R(e,t){if(arguments.length===1)return le=>R(e,le);let r=0;const s=Ae(t),y=s.length,H={};for(;r<y;){const le=s[r];H[le]=e(t[le],le,t),r++}return H}const w=R;function k(e,t){if(arguments.length===1)return r=>k(e,r);if(!t)throw new Error(ze);return O(t)?B(e,t):R(e,t)}function z(e,t){return arguments.length===1?r=>z(e,r):t>e?t:e}function Q(e,t){if(arguments.length===1)return s=>Q(e,s);const r=Ue((s,y)=>z(s,y.length),0,t);return G(r,function(){return e.apply(this,k(s=>s.apply(this,arguments),t))})}function ge(e,t){return arguments.length===1?r=>ge(e,r):O(t)?t.filter(r=>e(r)).length:0}function ve(e,t){if(arguments.length===1)return s=>ve(e,s);const r={};return t.forEach(s=>{const y=e(s);r[y]?r[y]++:r[y]=1}),r}const fe=e=>e-1;function Ie(e){return e==null||Number.isNaN(e)===!0}function oe(e,t){return arguments.length===1?r=>oe(e,r):Ie(t)?e:t}function X(e){if(e===null)return"Null";if(e===void 0)return"Undefined";if(Number.isNaN(e))return"NaN";const t=Object.prototype.toString.call(e).slice(8,-1);return t==="AsyncFunction"?"Promise":t}function ae(e,t){if(!O(t))throw new Error(`Cannot read property 'indexOf' of ${t}`);const r=X(e);if(!["Object","Array","NaN","RegExp"].includes(r))return t.lastIndexOf(e);const{length:s}=t;let y=s,H=-1;for(;--y>-1&&H===-1;)Fe(t[y],e)&&(H=y);return H}function pe(e,t){if(!O(t))throw new Error(`Cannot read property 'indexOf' of ${t}`);const r=X(e);if(!["Object","Array","NaN","RegExp"].includes(r))return t.indexOf(e);let s=-1,y=-1;const{length:H}=t;for(;++s<H&&y===-1;)Fe(t[s],e)&&(y=s);return y}function Re(e){const t=[];let r;for(;!(r=e.next()).done;)t.push(r.value);return t}function Te(e,t){if(e.size!==t.size)return!1;const r=Re(e.values()),s=Re(t.values());return r.filter(H=>pe(H,s)===-1).length===0}function Le(e){const t=e.__proto__.toString();return["Error","TypeError"].includes(t)?[t,e.message]:[]}function Ve(e){return e.toDateString?[!0,e.getTime()]:[!1]}function Oe(e){return e.constructor!==RegExp?[!1]:[!0,e.toString()]}function Fe(e,t){if(arguments.length===1)return Je=>Fe(e,Je);const r=X(e);if(r!==X(t))return!1;if(r==="Function")return e.name===void 0?!1:e.name===t.name;if(["NaN","Undefined","Null"].includes(r))return!0;if(r==="Number")return Object.is(-0,e)!==Object.is(-0,t)?!1:e.toString()===t.toString();if(["String","Boolean"].includes(r))return e.toString()===t.toString();if(r==="Array"){const Je=Array.from(e),qe=Array.from(t);if(Je.toString()!==qe.toString())return!1;let gt=!0;return Je.forEach((wt,Mt)=>{gt&&wt!==qe[Mt]&&!Fe(wt,qe[Mt])&&(gt=!1)}),gt}const s=Oe(e),y=Oe(t);if(s[0])return y[0]?s[1]===y[1]:!1;if(y[0])return!1;const H=Ve(e),le=Ve(t);if(H[0])return le[0]?H[1]===le[1]:!1;if(le[0])return!1;const be=Le(e),Ye=Le(t);if(be[0])return Ye[0]?be[0]===Ye[0]&&be[1]===Ye[1]:!1;if(r==="Set")return Te(e,t);if(r==="Object"){const Je=Object.keys(e);if(Je.length!==Object.keys(t).length)return!1;let qe=!0;return Je.forEach(gt=>{if(qe){const wt=e[gt],Mt=t[gt];wt!==Mt&&!Fe(wt,Mt)&&(qe=!1)}}),qe}return!1}function we(e,t){if(arguments.length===1)return r=>we(e,r);if(typeof t=="string")return t.includes(e);if(!t)throw new TypeError(`Cannot read property 'indexOf' of ${t}`);return O(t)?pe(e,t)>-1:!1}class et{constructor(){this.set=new Set,this.items={}}checkUniqueness(t){const r=X(t);if(["Null","Undefined","NaN"].includes(r))return r in this.items?!1:(this.items[r]=!0,!0);if(!["Object","Array"].includes(r)){const s=this.set.size;return this.set.add(t),this.set.size!==s}return r in this.items?pe(t,this.items[r])===-1?(this.items[r].push(t),!0):!1:(this.items[r]=[t],!0)}}function tt(e){const t=new et,r=[];return e.forEach(s=>{t.checkUniqueness(s)&&r.push(s)}),r}function rt(e,t){return arguments.length===1?r=>rt(e,r):tt(e).filter(r=>!we(r,t))}function Qe(e,t){if(arguments.length===1)return s=>Qe(e,s);if(t==null)return{};const r={};for(const s in t)r[s]=t[s];return delete r[e],r}function at(e,t){return arguments.length===1?r=>at(e,r):e/t}function nt(e,t){return arguments.length===1?r=>nt(e,r):t.slice(e>0?e:0)}function je(e,t){return arguments.length===1?r=>je(e,r):e>0?t.slice(0,-e):t.slice()}function Ge(e,t){if(arguments.length===1)return le=>Ge(e,le);if(t.length===0)return t;const r=O(t);if(typeof e!="function")throw new Error(`'predicate' is from wrong type ${typeof e}`);if(!r&&typeof t!="string")throw new Error(`'iterable' is from wrong type ${typeof t}`);let s=!1;const y=[];let H=t.length;for(;H>0;)H--,!s&&e(t[H])===!1?(s=!0,y.push(t[H])):s&&y.push(t[H]);return r?y.reverse():y.reverse().join("")}function Xt(e){if(!O(e))throw new Error(`${e} is not a list`);const t=[];return e.reduce((r,s)=>(Fe(r,s)||t.push(s),s),void 0),t}function xe(e,t){if(arguments.length===1)return s=>xe(e,s);if(!O(t))throw new Error(`${t} is not a list`);const r=[];return t.reduce((s,y)=>s===void 0?(r.push(y),y):(e(s,y)||r.push(y),y),void 0),r}function mt(e,t){if(arguments.length===1)return le=>mt(e,le);const r=O(t);if(!r&&typeof t!="string")throw new Error("`iterable` is neither list nor a string");let s=!1;const y=[];let H=-1;for(;H++<t.length-1;)s?y.push(t[H]):e(t[H])||(s||(s=!0),y.push(t[H]));return r?y:y.join("")}function It(e,t){return arguments.length===1?r=>It(e,r):(...r)=>Boolean(e(...r)||t(...r))}function ht(e,t){if(arguments.length===1)return H=>ht(e,H);if(typeof t=="string")return t.endsWith(e);if(!O(e))return!1;const r=t.length-e.length;let s=!0;return e.filter((H,le)=>{if(!s)return!1;const be=Fe(H,t[le+r]);return be||(s=!1),be}).length===e.length}function it(e,t){if(arguments.length===1)return r=>it(e,r);if(!!t)return t[e]}function $t(e,t,r){return Fe(it(e,t),it(e,r))}const Et=h($t);function jt(e,t){return B((r,s)=>X(e[s])==="Function"?e[s](r):r,t,!0)}function Ot(e,t){return R((r,s)=>{if(X(r)==="Object"){const y=X(e[s]);return y==="Function"?e[s](r):y==="Object"?de(e[s],r):r}return X(e[s])==="Function"?e[s](r):r},t)}function de(e,t){if(arguments.length===1)return y=>de(e,y);const r=X(e),s=X(t);if(s!==r)throw new Error("iterableType !== rulesType");if(!["Object","Array"].includes(r))throw new Error(`'iterable' and 'rules' are from wrong type ${r}`);return s==="Object"?Ot(e,t):jt(e,t)}function Bt(e,t){const r={};for(const s in t)e(t[s],s,t)&&(r[s]=t[s]);return r}function _t(e,t,r=!1){let s=0;const y=t.length,H=[];for(;s<y;)(r?e(t[s],s):e(t[s]))&&H.push(t[s]),s++;return H}function st(e,t){if(arguments.length===1)return r=>st(e,r);if(!t)throw new Error("Incorrect iterable input");return O(t)?_t(e,t,!1):Bt(e,t)}function Rt(e,t){if(arguments.length===1)return y=>Rt(e,y);let r=0;const s=t.length;for(;r<s;){const y=t[r];if(e(y))return y;r++}}function Tt(e,t){if(arguments.length===1)return y=>Tt(e,y);const r=t.length;let s=-1;for(;++s<r;)if(e(t[s]))return s;return-1}function Nt(e,t){if(arguments.length===1)return s=>Nt(e,s);let r=t.length;for(;--r>=0;)if(e(t[r]))return t[r]}function kt(e,t){if(arguments.length===1)return s=>kt(e,s);let r=t.length;for(;--r>=0;)if(e(t[r]))return r;return-1}function Gt(e,t){const r=t===void 0?[]:t;for(let s=0;s<e.length;s++)O(e[s])?Gt(e[s],r):r.push(e[s]);return r}function At(e){return(...t)=>{if(t.length===1)return r=>e(r,t[0]);if(t.length===2)return e(t[1],t[0]);if(t.length===3)return e(t[1],t[0],t[2]);if(t.length===4)return e(t[1],t[0],t[2],t[3]);throw new Error("R.flip doesn't work with arity > 4")}}function bt(e){return At(e)}function vt(e,t){if(arguments.length===1)return r=>vt(e,r);if(t!==void 0){if(O(t)){let r=0;const s=t.length;for(;r<s;)e(t[r]),r++}else{let r=0;const s=Ae(t),y=s.length;for(;r<y;){const H=s[r];e(t[H],H,t),r++}}return t}}function Kt(e){const t={};return e.forEach(([r,s])=>t[r]=s),t}function St(e,t){if(arguments.length===1)return s=>St(e,s);const r={};for(let s=0;s<t.length;s++){const y=t[s],H=e(y);r[H]||(r[H]=[]),r[H].push(y)}return r}function Ut(e,t){if(!O(t))throw new TypeError("list.reduce is not a function");const r=m(t);if(t.length===1)return[r];const s=[];let y=[];return r.reduce((H,le,be)=>{if(be===0)return le;const Ye=e(H,le),Je=y.length===0,qe=be===t.length-1;return Ye?(Je&&y.push(H),y.push(le),qe&&s.push(y),le):Je?(s.push([H]),qe&&s.push([le]),le):(s.push(y),qe&&s.push([le]),y=[],le)},void 0),s}function Lt(e,t){return arguments.length===1?r=>Lt(e,r):t?t.hasOwnProperty(e):!1}function ft(e,t="."){return typeof e=="string"?e.split(t):e}function ut(e,t){if(arguments.length===1)return H=>ut(e,H);if(t==null)return;let r=t,s=0;const y=ft(e);for(;s<y.length;){if(r==null||r[y[s]]===null)return;r=r[y[s]],s++}return r}function zt(e,t){return arguments.length===1?r=>zt(e,r):ut(e,t)!==void 0}function Jt(e){return typeof e=="string"?e[0]||"":e[0]}function Qt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}const qt=Object.is||Qt;function Ht(e,t){return arguments.length===1?r=>Ht(e,r):qt(e,t)}function lt(e){return e}function Dt(e,t,r){return(...s)=>(typeof e=="boolean"?e:e(...s))===!0?t(...s):r(...s)}const Wt=h(Dt),Yt=e=>e+1;function er(e,t){const r={};for(let s=0;s<t.length;s++){const y=t[s];r[ut(e,y)]=y}return r}function a(e,t){if(arguments.length===1)return s=>a(e,s);if(typeof e=="string")return er(e,t);const r={};for(let s=0;s<t.length;s++){const y=t[s];r[e(y)]=y}return r}function n(e,t){return arguments.length===1?r=>pe(e,r):pe(e,t)}function i(e,t,r){let s=-1,{length:y}=e;r=r>y?y:r,r<0&&(r+=y),y=t>r?0:r-t>>>0,t>>>=0;const H=Array(y);for(;++s<y;)H[s]=e[s+t];return H}function u(e){return typeof e=="string"?e.slice(0,-1):e.length?i(e,0,-1):[]}function l(e,t){return arguments.length===1?r=>l(e,r):st(r=>we(r,e),t)}function g(e,t){if(arguments.length===1)return H=>g(e,H);let r=-1;const s=t.length,y=[];for(;++r<s;)r===s-1?y.push(t[r]):y.push(t[r],e);return y}function E(e,t){return arguments.length===1?r=>E(e,r):t!=null&&t.constructor===e||t instanceof e}function V(e){const t=X(e);return["Undefined","NaN","Number","Null"].includes(t)?!1:e?t==="Object"?Object.keys(e).length===0:t==="Array"?e.length===0:!1:!0}function D(e){return e==null}function K(e,t){return arguments.length===1?r=>K(e,r):t.join(e)}function $(e){return(...t)=>e.map(r=>r(...t))}function q(e){return Object.keys(e)}function ue(e){return typeof e=="string"?e[e.length-1]||"":e[e.length-1]}function ye(e,t){return arguments.length===1?r=>ae(e,r):ae(e,t)}function Ce(e){return O(e)||typeof e=="string"?e.length:NaN}function Me(e,t){return function(r){return function(s){return r(e(s)).map(y=>t(y,s))}}}function De(e,t){if(arguments.length===1)return s=>De(e,s);const r=e<0?t.length+e:e;return Object.prototype.toString.call(t)==="[object String]"?t.charAt(r):t[r]}function He(e,t,r){const s=m(r);return e===-1?s.fill(t,e):s.fill(t,e,e+1)}const Ze=h(He);function Xe(e){return Me(De(e),Ze(e))}function $e(e){return Me(ut(e),se(e))}function ct(e){return Me(it(e),f(e))}function ot(e,t){if(arguments.length===1)return s=>ot(e,s);const r=t.match(e);return r===null?[]:r}function pt(e,t){return arguments.length===1?r=>pt(e,r):!x(e)||!x(t)||t<1?NaN:(e%t+t)%t}function Ct(e,t,r){return e(r)>e(t)?r:t}const Ft=h(Ct);function xt(e){return e.reduce((t,r)=>t+r,0)}function dt(e){return xt(e)/e.length}function un(e){const t=e.length;if(t===0)return NaN;const r=2-t%2,s=(t-r)/2;return dt(Array.prototype.slice.call(e,0).sort((y,H)=>y===H?0:y<H?-1:1).slice(s,s+r))}function Pt(e,t){return arguments.length===1?r=>Pt(e,r):Object.assign({},e||{},t||{})}function sn(e){let t={};return k(r=>{t=Pt(t,r)},e),t}function Zt(e,t){if(arguments.length===1)return s=>Zt(e,s);const r=ce(e);return Object.keys(t).forEach(s=>{X(t[s])==="Object"&&X(e[s])==="Object"?r[s]=Zt(e[s],t[s]):r[s]=t[s]}),r}function ir(e,t){return arguments.length===1?r=>ir(e,r):Pt(t,e)}function ln(e,t,r){const s={};return Object.keys(t).forEach(y=>{r[y]===void 0?s[y]=t[y]:s[y]=e(t[y],r[y])}),Object.keys(r).forEach(y=>{s[y]===void 0&&(t[y]===void 0?s[y]=r[y]:s[y]=e(t[y],r[y]))}),s}const cn=h(ln);function or(e,t){return arguments.length===1?r=>or(e,r):t<e?t:e}function ar(e,t,r){return e(r)<e(t)?r:t}const fn=h(ar);function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(y){return Object.getOwnPropertyDescriptor(e,y).enumerable})),r.push.apply(r,s)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ur(Object(r),!0).forEach(function(s){dn(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function dn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gn(e){return Array.isArray(e)||X(e)==="Object"}function hn(e,t,r){return!gn(r)||r[e]===void 0?r:O(r)?He(e,t(r[e]),r):yt(yt({},r),{},{[e]:t(r[e])})}const vn=h(hn);function sr(e,t,r){const s=ft(e);if(s.length===1)return yt(yt({},r),{},{[s[0]]:t(r[s[0]])});if(ut(s,r)===void 0)return r;const y=lr(Array.prototype.slice.call(s,1),t,r[s[0]]);return y===r[s[0]]?r:f(s[0],y,r)}const lr=h(sr);function cr(e,t){return arguments.length===1?r=>cr(e,r):e%t}function En(e,t,r){if(e<0||t<0)throw new Error("Rambda.move does not support negative indexes");if(e>r.length-1||t>r.length-1)return r;const s=m(r);return s[e]=r[t],s[t]=r[e],s}const pn=h(En);function tr(e,t){return arguments.length===1?r=>tr(e,r):e*t}function yn(e){return-e}function fr(e,t){if(arguments.length===1)return r=>fr(e,r);for(let r=0;r<t.length;r++)if(e(t[r]))return!1;return!0}function mn(){}function In(e){return!e}function dr(e,t){return arguments.length===1?r=>dr(e,r):{[e]:t}}function On(e){return[e]}function gr(e,t){if(arguments.length===1)return y=>gr(e,y);if(t==null)return;const r=ft(e,","),s={};for(const y in t)r.includes(y)||(s[y]=t[y]);return s}function rr(e,t,r,s){return arguments.length===3?y=>rr(e,t,r,y):arguments.length===2?(y,H)=>rr(e,t,y,H):e(t(r),t(s))}function hr(e,t){let r;return function(){return e&&(r=e.apply(t||this,arguments),e=null),r}}function _n(e,t){if(arguments.length===1){const r=hr(e,t);return h(r)}return hr(e,t)}function vr(e,t){return arguments.length===1?r=>vr(e,r):e||t}const Er=e=>({x:e,map:t=>Er(t(e))});function Rn(e,t,r){return e(s=>Er(t(s)))(r).x}const pr=h(Rn);function yr(e,...t){const r=e.length;return(...s)=>t.length+s.length>=r?e(...t,...s):yr(e,...t,...s)}function Tn(e,t){return r=>e(Zt(r,t))}function mr(e,t){const r={},s={};return Object.entries(t).forEach(([y,H])=>{e(H,y)?r[y]=H:s[y]=H}),[r,s]}function Ir(e,t,r=!1){const s=[],y=[];let H=-1;for(;H++<t.length-1;)(r?e(t[H],H):e(t[H]))?s.push(t[H]):y.push(t[H]);return[s,y]}function Or(e,t){return arguments.length===1?r=>Or(e,r):O(t)?Ir(e,t):mr(e,t)}function Nn(e,t,r){return Fe(ut(e,r),t)}const An=h(Nn);function bn(e,t,r){return oe(e,ut(t,r))}const Sn=h(bn);function _r(e,t){return arguments.length===1?r=>_r(e,r):e.map(r=>ut(r,t))}function Rr(e,t){if(arguments.length===1)return H=>Rr(e,H);if(t==null)return;const r=ft(e,","),s={};let y=0;for(;y<r.length;)r[y]in t&&(s[r[y]]=t[r[y]]),y++;return s}function Tr(e,t){if(arguments.length===1)return H=>Tr(e,H);if(t==null)return;const r=ft(e,","),s={};let y=0;for(;y<r.length;)r[y]in t?s[r[y]]=t[r[y]]:s[r[y]]=void 0,y++;return s}function Nr(e,t){if(arguments.length===1)return s=>Nr(e,s);const r=[];return k(s=>{s[e]!==void 0&&r.push(s[e])},t),r}function Ar(e,t){return arguments.length===1?r=>Ar(e,r):typeof t=="string"?[e].concat(t.split("")):[e].concat(t)}const Un=Ue(tr,1);function Ln(e,t,r){return r?Fe(t,it(e,r)):!1}const Dn=h(Ln);function Cn(e,t,r){return E(e,r[t])}const Fn=h(Cn);function Pn(e,t,r){return r?oe(e,r[t]):e}const Vn=h(Pn);function wn(e,t,r){return e(it(t,r))}const Mn=h(wn);function br(e,t){if(arguments.length===1)return r=>br(e,r);if(!O(e))throw new Error("propsToPick is not a list");return B(r=>t[r],e)}function nr(e,t){if(arguments.length===1)return y=>nr(e,y);if(Number.isNaN(Number(e))||Number.isNaN(Number(t)))throw new TypeError("Both arguments to range must be numbers");if(t<e)return[];const r=t-e,s=Array(r);for(let y=0;y<r;y++)s[y]=e+y;return s}function Sr(e,t){return arguments.length===1?r=>Sr(e,r):st(r=>!e(r),t)}function Ur(e,t){return arguments.length===1?r=>Ur(e,r):Array(t).fill(e)}function jn(e,t,r){return r.replace(e,t)}const Bn=h(jn);function kn(e){return typeof e=="string"?e.split("").reverse().join(""):e.slice().reverse()}function Gn(e,t,r){return pr(e,P(t),r)}const Kn=h(Gn);function zn(e,t,r){return r.slice(e,t)}const Hn=h(zn);function Lr(e,t){return arguments.length===1?r=>Lr(e,r):m(t).sort(e)}function Dr(e,t){return arguments.length===1?s=>Dr(e,s):m(t).sort((s,y)=>{const H=e(s),le=e(y);return H===le?0:H<le?-1:1})}function Cr(e,t){return arguments.length===1?r=>Cr(e,r):t.split(e)}function Wn(e,t,r){const s=e&&X(t)==="Function"?t():t,y=!e&&X(r)==="Function"?r():r;return e?s:y}function Vt(e,t){return arguments.length===1?r=>Vt(e,r):e<0?t.slice():typeof t=="string"?t.slice(0,e):i(t,0,e)}function Fr(e,t){if(arguments.length===1)return s=>Fr(e,s);if(!t)throw new TypeError(`Cannot read property 'slice' of ${t}`);if(!O(t)&&typeof t!="string")return[[],[]];const r=Wn(e<0,t.length+e<0?0:t.length+e,e);return[Vt(r,t),nt(r,t)]}function Pr(e,t){if(arguments.length===1)return y=>Pr(e,y);if(e<1)throw new Error("First argument to splitEvery must be a positive integer");const r=[];let s=0;for(;s<t.length;)r.push(t.slice(s,s+=e));return r}function Vr(e,t){if(arguments.length===1)return le=>Vr(e,le);if(!t)throw new TypeError(`Cannot read property 'length' of ${t}`);const r=[],s=[];let y=!1,H=-1;for(;H++<t.length-1;)y?s.push(t[H]):e(t[H])?(s.push(t[H]),y=!0):r.push(t[H]);return[r,s]}function wr(e,t){if(arguments.length===1)return y=>wr(e,y);if(typeof t=="string")return t.startsWith(e);if(!O(e))return!1;let r=!0;return e.filter((y,H)=>{if(!r)return!1;const le=Fe(y,t[H]);return le||(r=!1),le}).length===e.length}function Mr(e,t){return arguments.length===1?r=>Mr(e,r):e-t}function jr(e,t){return arguments.length===1?r=>jr(e,r):We(st(r=>!we(r,t),e),st(r=>!we(r,e),t))}function Yn(e){return nt(1,e)}function Br(e,t){if(arguments.length===1)return y=>Br(e,y);const r=t.length;if(e<0)return t.slice();let s=e>r?r:e;return typeof t=="string"?t.slice(r-s):(s=r-s,i(t,s,r))}function kr(e,t){if(arguments.length===1)return H=>kr(e,H);if(t.length===0)return t;let r=!1;const s=[];let y=t.length;for(;!r||y===0;)y--,e(t[y])===!1?r=!0:r||s.push(t[y]);return O(t)?s.reverse():s.reverse().join("")}function Gr(e,t){if(arguments.length===1)return le=>Gr(e,le);const r=O(t);if(!r&&typeof t!="string")throw new Error("`iterable` is neither list nor a string");let s=!0;const y=[];let H=-1;for(;H++<t.length-1;)e(t[H])?s&&y.push(t[H]):s&&(s=!1);return r?y:y.join("")}function Kr(e,t){return arguments.length===1?r=>Kr(e,r):(e(t),t)}function zr(e,t){if(arguments.length===1)return r=>zr(e,r);if(typeof e=="string")throw new TypeError(`R.test requires a value of type RegExp as its first argument; received "${e}"`);return t.search(e)!==-1}function Hr(e,t){if(arguments.length===1)return r=>Hr(e,r);if(!x(t)||t<0)throw new RangeError("n must be an integer");return k(e,nr(0,t))}function xn(e){return e.toLowerCase()}function Zn(e){return Object.entries(e)}function Xn(e){return e.toString()}function $n(e){return e.toUpperCase()}function Jn(e){return e.reduce((t,r)=>(r.forEach((s,y)=>O(t[y])?t[y].push(s):t.push([s])),t),[])}function Qn(e){return e.trim()}const Wr=e=>["Promise","Function"].includes(X(e));function qn(e,t){if(!Wr(e))throw new Error(`R.tryCatch | fn '${e}'`);const r=Wr(t);return(...s)=>{try{return e(...s)}catch(y){return r?t(y,...s):t}}}function ei(e){return function(...t){return e.call(this,t)}}function Yr(e,t){if(arguments.length===1)return s=>Yr(e,s);const r=m(e);return t.forEach(s=>{we(s,e)||r.push(s)}),r}function xr(e,t){if(arguments.length===1)return s=>xr(e,s);const r=new Set;return t.filter(s=>r.has(e(s))?!1:(r.add(e(s)),!0))}function ti(e,t,r){let s=!1,y=-1;for(;++y<r.length&&!s;){const H=r[y];e(t,H)&&(s=!0)}return s}function Zr(e,t){if(arguments.length===1)return y=>Zr(e,y);let r=-1;const s=[];for(;++r<t.length;){const y=t[r];ti(e,y,s)||s.push(y)}return s}function Xr(e,t){return arguments.length===1?r=>Xr(e,r):r=>e(r)?r:t(r)}function $r(e,t){return arguments.length===1?r=>$r(e,r):O(t[e])?B(r=>yt(yt({},t),{},{[e]:r}),t[e]):[t]}function ri(e){return X(e)!=="Object"?[]:Object.values(e)}const Jr=e=>({x:e,map:t=>Jr(e)});function Qr(e,t){return arguments.length===1?r=>Qr(e,r):e(Jr)(t).x}function ni(e,t,r){return e(r)?t(r):r}const ii=h(ni);function qr(e,t){if(t===void 0)return s=>qr(e,s);let r=!0;for(const s in e){if(!r)continue;const y=e[s](t[s]);r&&y===!1&&(r=!1)}return r}function en(e,t){if(t===void 0)return r=>en(e,r);for(const r in e)if(e[r](t[r]))return!0;return!1}function tn(e,t){if(arguments.length===1)return s=>tn(e,s);const r=st((s,y)=>Fe(s,t[y]),e);return Object.keys(r).length===Object.keys(e).length}function rn(e,t){return t===void 0?r=>rn(e,r):Ue((r,s)=>pe(s,e)>-1?r:r.concat(s),[],t)}function nn(e,t){return arguments.length===1?r=>nn(e,r):Boolean(e)&&!t||Boolean(t)&&!e}function on(e,t){if(arguments.length===1)return y=>on(e,y);const r=[],s=Math.min(e.length,t.length);for(let y=0;y<s;y++)r[y]=[e[y],t[y]];return r}function an(e,t){return arguments.length===1?r=>an(e,r):Vt(t.length,e).reduce((r,s,y)=>(r[s]=t[y],r),{})}function oi(e,t,r){return Vt(t.length>r.length?r.length:t.length,t).map((s,y)=>e(s,r[y]))}const ai=h(oi);o.F=d,o.T=S,o.__findHighestArity=U,o._arity=ne,o._indexOf=pe,o._lastIndexOf=ae,o._pipe=Pe,o.add=v,o.adjust=N,o.all=F,o.allPass=L,o.always=P,o.and=j,o.any=p,o.anyPass=A,o.append=T,o.apply=C,o.applySpec=c,o.assoc=f,o.assocPath=se,o.bind=W,o.both=Y,o.chain=Z,o.clamp=ee,o.clone=ce,o.complement=me,o.compose=Ke,o.concat=We,o.cond=Ne,o.converge=Q,o.count=ge,o.countBy=ve,o.curry=h,o.curryN=G,o.dec=fe,o.defaultTo=oe,o.difference=rt,o.dissoc=Qe,o.divide=at,o.drop=nt,o.dropLast=je,o.dropLastWhile=Ge,o.dropRepeats=Xt,o.dropRepeatsWith=xe,o.dropWhile=mt,o.either=It,o.endsWith=ht,o.eqProps=Et,o.equals=Fe,o.evolve=de,o.evolveArray=jt,o.evolveObject=Ot,o.filter=st,o.filterArray=_t,o.filterObject=Bt,o.find=Rt,o.findIndex=Tt,o.findLast=Nt,o.findLastIndex=kt,o.flatten=Gt,o.flip=bt,o.forEach=vt,o.fromPairs=Kt,o.groupBy=St,o.groupWith=Ut,o.has=Lt,o.hasPath=zt,o.head=Jt,o.identical=Ht,o.identity=lt,o.ifElse=Wt,o.inc=Yt,o.includes=we,o.indexBy=a,o.indexOf=n,o.init=u,o.intersection=l,o.intersperse=g,o.is=E,o.isEmpty=V,o.isNil=D,o.join=K,o.juxt=$,o.keys=q,o.last=ue,o.lastIndexOf=ye,o.length=Ce,o.lens=Me,o.lensIndex=Xe,o.lensPath=$e,o.lensProp=ct,o.map=k,o.mapArray=B,o.mapObjIndexed=w,o.mapObject=R,o.match=ot,o.mathMod=pt,o.max=z,o.maxBy=Ft,o.maxByFn=Ct,o.mean=dt,o.median=un,o.merge=Pt,o.mergeAll=sn,o.mergeDeepRight=Zt,o.mergeLeft=ir,o.mergeRight=Pt,o.mergeWith=cn,o.min=or,o.minBy=fn,o.minByFn=ar,o.modify=vn,o.modifyPath=lr,o.modifyPathFn=sr,o.modulo=cr,o.move=pn,o.multiply=tr,o.negate=yn,o.none=fr,o.nop=mn,o.not=In,o.nth=De,o.objOf=dr,o.of=On,o.omit=gr,o.on=rr,o.once=_n,o.or=vr,o.over=pr,o.partial=yr,o.partialObject=Tn,o.partition=Or,o.partitionArray=Ir,o.partitionObject=mr,o.path=ut,o.pathEq=An,o.pathOr=Sn,o.paths=_r,o.pick=Rr,o.pickAll=Tr,o.pipe=ke,o.pluck=Nr,o.prepend=Ar,o.product=Un,o.prop=it,o.propEq=Dn,o.propIs=Fn,o.propOr=Vn,o.propSatisfies=Mn,o.props=br,o.range=nr,o.reduce=Ue,o.reduceFn=he,o.reduceStopper=Be,o.reject=Sr,o.repeat=Ur,o.replace=Bn,o.reverse=kn,o.set=Kn,o.slice=Hn,o.sort=Lr,o.sortBy=Dr,o.split=Cr,o.splitAt=Fr,o.splitEvery=Pr,o.splitWhen=Vr,o.startsWith=wr,o.subtract=Mr,o.sum=xt,o.symmetricDifference=jr,o.tail=Yn,o.take=Vt,o.takeLast=Br,o.takeLastWhile=kr,o.takeWhile=Gr,o.tap=Kr,o.test=zr,o.times=Hr,o.toLower=xn,o.toPairs=Zn,o.toString=Xn,o.toUpper=$n,o.transpose=Jn,o.trim=Qn,o.tryCatch=qn,o.type=X,o.unapply=ei,o.union=Yr,o.uniq=tt,o.uniqBy=xr,o.uniqWith=Zr,o.unless=Xr,o.unwind=$r,o.update=Ze,o.updateFn=He,o.values=ri,o.view=Qr,o.when=ii,o.where=qr,o.whereAny=en,o.whereEq=tn,o.without=rn,o.xor=nn,o.zip=on,o.zipObj=an,o.zipWith=ai},9292:(re,o,d)=>{d.d(o,{Z:()=>N});var S=d(8677),v=d(8042),m=d(4035),h=d(3373),_=function(L){var P=L.disabled,j=L.children,p=L.className;return v.createElement("div",(0,S.Z)({},(0,h.X)(m.GV,!P),{className:p}),j)};_.propTypes={},_.defaultProps={disabled:!1,className:void 0};const N=d.j==452?_:null},1774:(re,o,d)=>{d.d(o,{Z:()=>Ie});function S(oe,X){if(oe==null)return{};var ae={},pe=Object.keys(oe),Re,Te;for(Te=0;Te<pe.length;Te++)Re=pe[Te],!(X.indexOf(Re)>=0)&&(ae[Re]=oe[Re]);return ae}var v=d(8677),m=d(8042),h=d(7991),_=d(7515),N=d(6872);function F(oe,X){function ae(pe){return pe.displayName||pe.name||"Component"}return function(Re){var Te=[],Le;function Ve(){Le=oe(Te.map(function(Fe){return Fe.props})),X(Le)}var Oe=function(Fe){(0,_.Z)(we,Fe);function we(){return Fe.apply(this,arguments)||this}we.peek=function(){return Le};var et=we.prototype;return et.componentDidMount=function(){Te.push(this),Ve()},et.componentDidUpdate=function(){Ve()},et.componentWillUnmount=function(){var rt=Te.indexOf(this);Te.splice(rt,1),Ve()},et.render=function(){return m.default.createElement(Re,this.props)},we}(m.PureComponent);return(0,N.Z)(Oe,"displayName","SideEffect("+ae(Re)+")"),Oe}}const L=F;var P=d(4035),j=d(1630),p=d(8788),A=d(611),T=function(){var oe=document&&(0,A.v)();return oe?(0,p.q)(document.querySelectorAll("[".concat(P.Gv,"]"))).some(function(X){return(0,j.r3)(X,oe)}):!1},C=d(9952),O=function(oe){return oe===document.activeElement},U=function(oe){return Boolean((0,p.q)(oe.querySelectorAll("iframe")).some(function(X){return O(X)}))},M=function(oe){var X=document&&(0,A.v)();return!X||X.dataset&&X.dataset.focusGuard?!1:(0,C.K)(oe).some(function(ae){return(0,j.r3)(ae,X)||U(ae)})},I=d(3383);const c=I.k;var b=d(253),f=d(1200),te=function(oe){var X=(0,C.K)(oe).filter(b.IS),ae=(0,f.V0)(oe,oe,X),pe=new Map,Re=(0,j.dH)([ae],pe,!0),Te=(0,j.dH)(X,pe).filter(function(Le){var Ve=Le.node;return(0,b.IS)(Ve)}).map(function(Le){var Ve=Le.node;return Ve});return Re.map(function(Le){var Ve=Le.node,Oe=Le.index;return{node:Ve,index:Oe,lockItem:Te.indexOf(Ve)>=0,guard:(0,b.Z9)(Ve)}})},x=null,J=d(3373),se=d(5625),Ee=function(){return document&&document.activeElement===document.body},_e=function(){return Ee()||T()},G=null,W=null,Y=null,Z=!1,ie=function(){return!0},ee=function(X){return(G.whiteList||ie)(X)},ce=function(X,ae){Y={observerNode:X,portaledElement:ae}},me=function(X){return Y&&Y.portaledElement===X};function Se(oe,X,ae,pe){var Re=null,Te=oe;do{var Le=pe[Te];if(Le.guard)Le.node.dataset.focusAutoGuard&&(Re=Le);else if(Le.lockItem){if(Te!==oe)return;Re=null}else break}while((Te+=ae)!==X);Re&&(Re.node.tabIndex=0)}var he=function(X){return X&&"current"in X?X.current:X},Ue=function(X){return X?Boolean(Z):Z==="meanwhile"},Be=function oe(X,ae,pe){return ae&&(ae.host===X&&(!ae.activeElement||pe.contains(ae.activeElement))||ae.parentNode&&oe(X,ae.parentNode,pe))},ne=function(X,ae){return ae.some(function(pe){return Be(X,pe,pe)})},Pe=function(){var X=!1;if(G){var ae=G,pe=ae.observed,Re=ae.persistentFocus,Te=ae.autoFocus,Le=ae.shards,Ve=ae.crossFrame,Oe=ae.focusOptions,Fe=pe||Y&&Y.portaledElement,we=document&&document.activeElement;if(Fe){var et=[Fe].concat(Le.map(he).filter(Boolean));if((!we||ee(we))&&(Re||Ue(Ve)||!_e()||!W&&Te)&&(Fe&&!(M(et)||we&&ne(we,et)||me(we,Fe))&&(document&&!W&&we&&!Te?(we.blur&&we.blur(),document.body.focus()):(X=c(et,W,{focusOptions:Oe}),Y={})),Z=!1,W=document&&document.activeElement),document){var tt=document&&document.activeElement,rt=te(et),Qe=rt.map(function(at){var nt=at.node;return nt}).indexOf(tt);Qe>-1&&(rt.filter(function(at){var nt=at.guard,je=at.node;return nt&&je.dataset.focusAutoGuard}).forEach(function(at){var nt=at.node;return nt.removeAttribute("tabIndex")}),Se(Qe,rt.length,1,rt),Se(Qe,-1,-1,rt))}}}return X},ke=function(X){Pe()&&X&&(X.stopPropagation(),X.preventDefault())},Ke=function(){return(0,J.U)(Pe)},We=function(X){var ae=X.target,pe=X.currentTarget;pe.contains(ae)||ce(pe,ae)},Ne=function(){return null},ze=function(X){var ae=X.children;return m.createElement("div",{onBlur:Ke,onFocus:We},ae)};ze.propTypes={};var Ae=function(){Z="just",setTimeout(function(){Z="meanwhile"},0)},B=function(){document.addEventListener("focusin",ke),document.addEventListener("focusout",Ke),window.addEventListener("blur",Ae)},R=function(){document.removeEventListener("focusin",ke),document.removeEventListener("focusout",Ke),window.removeEventListener("blur",Ae)};function w(oe){return oe.filter(function(X){var ae=X.disabled;return!ae})}function k(oe){var X=oe.slice(-1)[0];X&&!G&&B();var ae=G,pe=ae&&X&&X.id===ae.id;G=X,ae&&!pe&&(ae.onDeactivation(),oe.filter(function(Re){var Te=Re.id;return Te===ae.id}).length||ae.returnFocus(!X)),X?(W=null,(!pe||ae.observed!==X.observed)&&X.onActivation(),Pe(!0),(0,J.U)(Pe)):(R(),W=null)}se.qy.assignSyncMedium(We),se.DA.assignMedium(Ke),se.zC.assignMedium(function(oe){return oe({moveFocusInside:c,focusInside:M})});const z=L(w,k)(Ne);var Q=m.forwardRef(function(X,ae){return m.createElement(h.Z,(0,v.Z)({sideCar:z,ref:ae},X))}),ge=h.Z.propTypes||{},ve=ge.sideCar,fe=S(ge,["sideCar"]);Q.propTypes={};const Ie=Q},2170:(re,o,d)=>{d.d(o,{Z:()=>h,g:()=>v});var S=d(8042),v={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},m=function(N){var F=N.children;return S.createElement(S.Fragment,null,S.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:v}),F,F&&S.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:v}))};m.propTypes={},m.defaultProps={children:null};const h=d.j==452?m:null},6842:(re,o,d)=>{d.d(o,{Z:()=>N});var S=d(8677),v=d(8042),m=d(4035),h=d(3373),_=function(L){var P=L.children,j=L.className;return v.createElement("div",(0,S.Z)({},(0,h.X)(m.Gv,!0),{className:j}),P)};_.propTypes={},_.defaultProps={className:void 0};const N=d.j==452?_:null},7991:(re,o,d)=>{d.d(o,{Z:()=>p});var S=d(8677),v=d(8042),m=d(4035),h=d(3868),_=d(9632);function N(A,T){return(0,_.W)(T||null,function(C){return A.forEach(function(O){return(0,h.k)(O,C)})})}var F=d(2170),L=d(5625),P=[],j=v.forwardRef(function(T,C){var O,U=v.useState(),M=U[0],I=U[1],c=v.useRef(),b=v.useRef(!1),f=v.useRef(null),te=T.children,x=T.disabled,J=T.noFocusGuards,se=T.persistentFocus,Ee=T.crossFrame,_e=T.autoFocus,G=T.allowTextSelection,W=T.group,Y=T.className,Z=T.whiteList,ie=T.hasPositiveIndices,ee=T.shards,ce=ee===void 0?P:ee,me=T.as,Se=me===void 0?"div":me,he=T.lockProps,Ue=he===void 0?{}:he,Be=T.sideCar,ne=T.returnFocus,Pe=T.focusOptions,ke=T.onActivation,Ke=T.onDeactivation,We=v.useState({}),Ne=We[0],ze=v.useCallback(function(){f.current=f.current||document&&document.activeElement,c.current&&ke&&ke(c.current),b.current=!0},[ke]),Ae=v.useCallback(function(){b.current=!1,Ke&&Ke(c.current)},[Ke]);(0,v.useEffect)(function(){x||(f.current=null)},[]);var B=v.useCallback(function(fe){var Ie=f.current;if(Ie&&Ie.focus){var oe=typeof ne=="function"?ne(Ie):ne;if(oe){var X=typeof oe=="object"?oe:void 0;f.current=null,fe?Promise.resolve().then(function(){return Ie.focus(X)}):Ie.focus(X)}}},[ne]),R=v.useCallback(function(fe){b.current&&L.qy.useMedium(fe)},[]),w=L.DA.useMedium,k=v.useCallback(function(fe){c.current!==fe&&(c.current=fe,I(fe))},[]),z=(0,S.Z)((O={},O[m.ZO]=x&&"disabled",O[m.Sk]=W,O),Ue),Q=J!==!0,ge=Q&&J!=="tail",ve=N([C,k]);return v.createElement(v.Fragment,null,Q&&[v.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:x?-1:0,style:F.g}),ie?v.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:x?-1:1,style:F.g}):null],!x&&v.createElement(Be,{id:Ne,sideCar:L.sH,observed:M,disabled:x,persistentFocus:se,crossFrame:Ee,autoFocus:_e,whiteList:Z,shards:ce,onActivation:ze,onDeactivation:Ae,returnFocus:B,focusOptions:Pe}),v.createElement(Se,(0,S.Z)({ref:ve},z,{className:Y,onBlur:w,onFocus:R}),te),ge&&v.createElement("div",{"data-focus-guard":!0,tabIndex:x?-1:0,style:F.g}))});j.propTypes={},j.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const p=j},7871:(re,o,d)=>{d.d(o,{Z:()=>L,b:()=>N});var S=d(8677),v=d(8042),m=d(4035),h=d(3373),_=d(5625),N=function(j){v.useEffect(function(){var p=!0;return _.zC.useMedium(function(A){var T=j&&j.current;p&&T&&(A.focusInside(T)||A.moveFocusInside(T,null))}),function(){p=!1}},[j])};function F(P){var j=P.disabled,p=P.className,A=P.children,T=v.useRef(null);return N(j?void 0:T),v.createElement("div",(0,S.Z)({},(0,h.X)(m.GV,!j),{ref:T,className:p}),A)}F.propTypes={},F.defaultProps={disabled:!1,className:void 0};const L=d.j==452?F:null},2207:(re,o,d)=>{if(d.d(o,{Du:()=>_.Z,EN:()=>v.Z,KJ:()=>m.Z,bb:()=>m.b,fj:()=>S.Z,rh:()=>h.Z}),d.j==452)var S=d(7991);if(d.j==452)var v=d(9292);if(d.j==452)var m=d(7871);if(d.j==452)var h=d(6842);if(d.j==452)var _=d(2170);var N=null},8310:(re,o,d)=>{if(d.r(o),d.d(o,{AutoFocusInside:()=>v.EN,FocusLockUI:()=>v.fj,FreeFocusInside:()=>v.rh,InFocusGuard:()=>v.Du,MoveFocusInside:()=>v.KJ,default:()=>m,useFocusInside:()=>v.bb}),d.j==452)var S=d(1774);if(d.j==452)var v=d(2207);const m=d.j==452?S.Z:null},5625:(re,o,d)=>{d.d(o,{DA:()=>F,zC:()=>L,qy:()=>N,sH:()=>P});var S=d(2135);function v(j){return j}function m(j,p){p===void 0&&(p=v);var A=[],T=!1,C={read:function(){if(T)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return A.length?A[A.length-1]:j},useMedium:function(O){var U=p(O,T);return A.push(U),function(){A=A.filter(function(M){return M!==U})}},assignSyncMedium:function(O){for(T=!0;A.length;){var U=A;A=[],U.forEach(O)}A={push:function(M){return O(M)},filter:function(){return A}}},assignMedium:function(O){T=!0;var U=[];if(A.length){var M=A;A=[],M.forEach(O),U=A}var I=function(){var b=U;U=[],b.forEach(O)},c=function(){return Promise.resolve().then(I)};c(),A={push:function(b){U.push(b),c()},filter:function(b){return U=U.filter(b),A}}}};return C}function h(j,p){return p===void 0&&(p=v),m(j,p)}function _(j){j===void 0&&(j={});var p=m(null);return p.options=(0,S.pi)({async:!0,ssr:!1},j),p}var N=h({},function(j){var p=j.target,A=j.currentTarget;return{target:p,currentTarget:A}}),F=h(),L=h(),P=_({async:!0})},3373:(re,o,d)=>{d.d(o,{U:()=>S,X:()=>v});function S(m){var h=window,_=h.setImmediate;typeof _!="undefined"?_(m):setTimeout(m,1)}var v=function(h,_){var N={};return N[h]=_,N}},7335:(re,o)=>{/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d=typeof Symbol=="function"&&Symbol.for,S=d?Symbol.for("react.element"):60103,v=d?Symbol.for("react.portal"):60106,m=d?Symbol.for("react.fragment"):60107,h=d?Symbol.for("react.strict_mode"):60108,_=d?Symbol.for("react.profiler"):60114,N=d?Symbol.for("react.provider"):60109,F=d?Symbol.for("react.context"):60110,L=d?Symbol.for("react.async_mode"):60111,P=d?Symbol.for("react.concurrent_mode"):60111,j=d?Symbol.for("react.forward_ref"):60112,p=d?Symbol.for("react.suspense"):60113,A=d?Symbol.for("react.suspense_list"):60120,T=d?Symbol.for("react.memo"):60115,C=d?Symbol.for("react.lazy"):60116,O=d?Symbol.for("react.block"):60121,U=d?Symbol.for("react.fundamental"):60117,M=d?Symbol.for("react.responder"):60118,I=d?Symbol.for("react.scope"):60119;function c(f){if(typeof f=="object"&&f!==null){var te=f.$$typeof;switch(te){case S:switch(f=f.type,f){case L:case P:case m:case _:case h:case p:return f;default:switch(f=f&&f.$$typeof,f){case F:case j:case C:case T:case N:return f;default:return te}}case v:return te}}}function b(f){return c(f)===P}o.AsyncMode=L,o.ConcurrentMode=P,o.ContextConsumer=F,o.ContextProvider=N,o.Element=S,o.ForwardRef=j,o.Fragment=m,o.Lazy=C,o.Memo=T,o.Portal=v,o.Profiler=_,o.StrictMode=h,o.Suspense=p,o.isAsyncMode=function(f){return b(f)||c(f)===L},o.isConcurrentMode=b,o.isContextConsumer=function(f){return c(f)===F},o.isContextProvider=function(f){return c(f)===N},o.isElement=function(f){return typeof f=="object"&&f!==null&&f.$$typeof===S},o.isForwardRef=function(f){return c(f)===j},o.isFragment=function(f){return c(f)===m},o.isLazy=function(f){return c(f)===C},o.isMemo=function(f){return c(f)===T},o.isPortal=function(f){return c(f)===v},o.isProfiler=function(f){return c(f)===_},o.isStrictMode=function(f){return c(f)===h},o.isSuspense=function(f){return c(f)===p},o.isValidElementType=function(f){return typeof f=="string"||typeof f=="function"||f===m||f===P||f===_||f===h||f===p||f===A||typeof f=="object"&&f!==null&&(f.$$typeof===C||f.$$typeof===T||f.$$typeof===N||f.$$typeof===F||f.$$typeof===j||f.$$typeof===U||f.$$typeof===M||f.$$typeof===I||f.$$typeof===O)},o.typeOf=c},9082:(re,o,d)=>{re.exports=d(7335)},2135:(re,o,d)=>{d.d(o,{pi:()=>m});var S=function(G,W){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,Z){Y.__proto__=Z}||function(Y,Z){for(var ie in Z)Object.prototype.hasOwnProperty.call(Z,ie)&&(Y[ie]=Z[ie])},S(G,W)};function v(G,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");S(G,W);function Y(){this.constructor=G}G.prototype=W===null?Object.create(W):(Y.prototype=W.prototype,new Y)}var m=function(){return m=Object.assign||function(W){for(var Y,Z=1,ie=arguments.length;Z<ie;Z++){Y=arguments[Z];for(var ee in Y)Object.prototype.hasOwnProperty.call(Y,ee)&&(W[ee]=Y[ee])}return W},m.apply(this,arguments)};function h(G,W){var Y={};for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&W.indexOf(Z)<0&&(Y[Z]=G[Z]);if(G!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ie=0,Z=Object.getOwnPropertySymbols(G);ie<Z.length;ie++)W.indexOf(Z[ie])<0&&Object.prototype.propertyIsEnumerable.call(G,Z[ie])&&(Y[Z[ie]]=G[Z[ie]]);return Y}function _(G,W,Y,Z){var ie=arguments.length,ee=ie<3?W:Z===null?Z=Object.getOwnPropertyDescriptor(W,Y):Z,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(G,W,Y,Z);else for(var me=G.length-1;me>=0;me--)(ce=G[me])&&(ee=(ie<3?ce(ee):ie>3?ce(W,Y,ee):ce(W,Y))||ee);return ie>3&&ee&&Object.defineProperty(W,Y,ee),ee}function N(G,W){return function(Y,Z){W(Y,Z,G)}}function F(G,W){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(G,W)}function L(G,W,Y,Z){function ie(ee){return ee instanceof Y?ee:new Y(function(ce){ce(ee)})}return new(Y||(Y=Promise))(function(ee,ce){function me(Ue){try{he(Z.next(Ue))}catch(Be){ce(Be)}}function Se(Ue){try{he(Z.throw(Ue))}catch(Be){ce(Be)}}function he(Ue){Ue.done?ee(Ue.value):ie(Ue.value).then(me,Se)}he((Z=Z.apply(G,W||[])).next())})}function P(G,W){var Y={label:0,sent:function(){if(ee[0]&1)throw ee[1];return ee[1]},trys:[],ops:[]},Z,ie,ee,ce;return ce={next:me(0),throw:me(1),return:me(2)},typeof Symbol=="function"&&(ce[Symbol.iterator]=function(){return this}),ce;function me(he){return function(Ue){return Se([he,Ue])}}function Se(he){if(Z)throw new TypeError("Generator is already executing.");for(;Y;)try{if(Z=1,ie&&(ee=he[0]&2?ie.return:he[0]?ie.throw||((ee=ie.return)&&ee.call(ie),0):ie.next)&&!(ee=ee.call(ie,he[1])).done)return ee;switch(ie=0,ee&&(he=[he[0]&2,ee.value]),he[0]){case 0:case 1:ee=he;break;case 4:return Y.label++,{value:he[1],done:!1};case 5:Y.label++,ie=he[1],he=[0];continue;case 7:he=Y.ops.pop(),Y.trys.pop();continue;default:if(ee=Y.trys,!(ee=ee.length>0&&ee[ee.length-1])&&(he[0]===6||he[0]===2)){Y=0;continue}if(he[0]===3&&(!ee||he[1]>ee[0]&&he[1]<ee[3])){Y.label=he[1];break}if(he[0]===6&&Y.label<ee[1]){Y.label=ee[1],ee=he;break}if(ee&&Y.label<ee[2]){Y.label=ee[2],Y.ops.push(he);break}ee[2]&&Y.ops.pop(),Y.trys.pop();continue}he=W.call(G,Y)}catch(Ue){he=[6,Ue],ie=0}finally{Z=ee=0}if(he[0]&5)throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}}var j=Object.create?function(G,W,Y,Z){Z===void 0&&(Z=Y);var ie=Object.getOwnPropertyDescriptor(W,Y);(!ie||("get"in ie?!W.__esModule:ie.writable||ie.configurable))&&(ie={enumerable:!0,get:function(){return W[Y]}}),Object.defineProperty(G,Z,ie)}:function(G,W,Y,Z){Z===void 0&&(Z=Y),G[Z]=W[Y]};function p(G,W){for(var Y in G)Y!=="default"&&!Object.prototype.hasOwnProperty.call(W,Y)&&j(W,G,Y)}function A(G){var W=typeof Symbol=="function"&&Symbol.iterator,Y=W&&G[W],Z=0;if(Y)return Y.call(G);if(G&&typeof G.length=="number")return{next:function(){return G&&Z>=G.length&&(G=void 0),{value:G&&G[Z++],done:!G}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(G,W){var Y=typeof Symbol=="function"&&G[Symbol.iterator];if(!Y)return G;var Z=Y.call(G),ie,ee=[],ce;try{for(;(W===void 0||W-- >0)&&!(ie=Z.next()).done;)ee.push(ie.value)}catch(me){ce={error:me}}finally{try{ie&&!ie.done&&(Y=Z.return)&&Y.call(Z)}finally{if(ce)throw ce.error}}return ee}function C(){for(var G=[],W=0;W<arguments.length;W++)G=G.concat(T(arguments[W]));return G}function O(){for(var G=0,W=0,Y=arguments.length;W<Y;W++)G+=arguments[W].length;for(var Z=Array(G),ie=0,W=0;W<Y;W++)for(var ee=arguments[W],ce=0,me=ee.length;ce<me;ce++,ie++)Z[ie]=ee[ce];return Z}function U(G,W,Y){if(Y||arguments.length===2)for(var Z=0,ie=W.length,ee;Z<ie;Z++)(ee||!(Z in W))&&(ee||(ee=Array.prototype.slice.call(W,0,Z)),ee[Z]=W[Z]);return G.concat(ee||Array.prototype.slice.call(W))}function M(G){return this instanceof M?(this.v=G,this):new M(G)}function I(G,W,Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=Y.apply(G,W||[]),ie,ee=[];return ie={},ce("next"),ce("throw"),ce("return"),ie[Symbol.asyncIterator]=function(){return this},ie;function ce(ne){Z[ne]&&(ie[ne]=function(Pe){return new Promise(function(ke,Ke){ee.push([ne,Pe,ke,Ke])>1||me(ne,Pe)})})}function me(ne,Pe){try{Se(Z[ne](Pe))}catch(ke){Be(ee[0][3],ke)}}function Se(ne){ne.value instanceof M?Promise.resolve(ne.value.v).then(he,Ue):Be(ee[0][2],ne)}function he(ne){me("next",ne)}function Ue(ne){me("throw",ne)}function Be(ne,Pe){ne(Pe),ee.shift(),ee.length&&me(ee[0][0],ee[0][1])}}function c(G){var W,Y;return W={},Z("next"),Z("throw",function(ie){throw ie}),Z("return"),W[Symbol.iterator]=function(){return this},W;function Z(ie,ee){W[ie]=G[ie]?function(ce){return(Y=!Y)?{value:M(G[ie](ce)),done:ie==="return"}:ee?ee(ce):ce}:ee}}function b(G){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=G[Symbol.asyncIterator],Y;return W?W.call(G):(G=typeof A=="function"?A(G):G[Symbol.iterator](),Y={},Z("next"),Z("throw"),Z("return"),Y[Symbol.asyncIterator]=function(){return this},Y);function Z(ee){Y[ee]=G[ee]&&function(ce){return new Promise(function(me,Se){ce=G[ee](ce),ie(me,Se,ce.done,ce.value)})}}function ie(ee,ce,me,Se){Promise.resolve(Se).then(function(he){ee({value:he,done:me})},ce)}}function f(G,W){return Object.defineProperty?Object.defineProperty(G,"raw",{value:W}):G.raw=W,G}var te=Object.create?function(G,W){Object.defineProperty(G,"default",{enumerable:!0,value:W})}:function(G,W){G.default=W};function x(G){if(G&&G.__esModule)return G;var W={};if(G!=null)for(var Y in G)Y!=="default"&&Object.prototype.hasOwnProperty.call(G,Y)&&j(W,G,Y);return te(W,G),W}function J(G){return G&&G.__esModule?G:{default:G}}function se(G,W,Y,Z){if(Y==="a"&&!Z)throw new TypeError("Private accessor was defined without a getter");if(typeof W=="function"?G!==W||!Z:!W.has(G))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?Z:Y==="a"?Z.call(G):Z?Z.value:W.get(G)}function Ee(G,W,Y,Z,ie){if(Z==="m")throw new TypeError("Private method is not writable");if(Z==="a"&&!ie)throw new TypeError("Private accessor was defined without a setter");if(typeof W=="function"?G!==W||!ie:!W.has(G))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Z==="a"?ie.call(G,Y):ie?ie.value=Y:W.set(G,Y),Y}function _e(G,W){if(W===null||typeof W!="object"&&typeof W!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof G=="function"?W===G:G.has(W)}},3868:(re,o,d)=>{d.d(o,{k:()=>S});function S(v,m){return typeof v=="function"?v(m):v&&(v.current=m),v}},9632:(re,o,d)=>{d.d(o,{W:()=>v});var S=d(8042);function v(m,h){var _=(0,S.useState)(function(){return{value:m,callback:h,facade:{get current(){return _.value},set current(N){var F=_.value;F!==N&&(_.value=N,_.callback(N,F))}}}})[0];return _.callback=h,_.facade}},1094:(re,o,d)=>{var S=d(2253),v=d(229),m=v;m.v1=S,m.v4=v,re.exports=m},7809:re=>{for(var o=[],d=0;d<256;++d)o[d]=(d+256).toString(16).substr(1);function S(v,m){var h=m||0,_=o;return[_[v[h++]],_[v[h++]],_[v[h++]],_[v[h++]],"-",_[v[h++]],_[v[h++]],"-",_[v[h++]],_[v[h++]],"-",_[v[h++]],_[v[h++]],"-",_[v[h++]],_[v[h++]],_[v[h++]],_[v[h++]],_[v[h++]],_[v[h++]]].join("")}re.exports=S},6345:re=>{var o=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(o){var d=new Uint8Array(16);re.exports=function(){return o(d),d}}else{var S=new Array(16);re.exports=function(){for(var m=0,h;m<16;m++)(m&3)===0&&(h=Math.random()*4294967296),S[m]=h>>>((m&3)<<3)&255;return S}}},2253:(re,o,d)=>{var S=d(6345),v=d(7809),m,h,_=0,N=0;function F(L,P,j){var p=P&&j||0,A=P||[];L=L||{};var T=L.node||m,C=L.clockseq!==void 0?L.clockseq:h;if(T==null||C==null){var O=S();T==null&&(T=m=[O[0]|1,O[1],O[2],O[3],O[4],O[5]]),C==null&&(C=h=(O[6]<<8|O[7])&16383)}var U=L.msecs!==void 0?L.msecs:new Date().getTime(),M=L.nsecs!==void 0?L.nsecs:N+1,I=U-_+(M-N)/1e4;if(I<0&&L.clockseq===void 0&&(C=C+1&16383),(I<0||U>_)&&L.nsecs===void 0&&(M=0),M>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_=U,N=M,h=C,U+=122192928e5;var c=((U&268435455)*1e4+M)%4294967296;A[p++]=c>>>24&255,A[p++]=c>>>16&255,A[p++]=c>>>8&255,A[p++]=c&255;var b=U/4294967296*1e4&268435455;A[p++]=b>>>8&255,A[p++]=b&255,A[p++]=b>>>24&15|16,A[p++]=b>>>16&255,A[p++]=C>>>8|128,A[p++]=C&255;for(var f=0;f<6;++f)A[p+f]=T[f];return P||v(A)}re.exports=F},229:(re,o,d)=>{var S=d(6345),v=d(7809);function m(h,_,N){var F=_&&N||0;typeof h=="string"&&(_=h==="binary"?new Array(16):null,h=null),h=h||{};var L=h.random||(h.rng||S)();if(L[6]=L[6]&15|64,L[8]=L[8]&63|128,_)for(var P=0;P<16;++P)_[F+P]=L[P];return _||v(L)}re.exports=m},299:(re,o,d)=>{d.d(o,{YD:()=>U});var S=d(8042);function v(){return v=Object.assign||function(M){for(var I=1;I<arguments.length;I++){var c=arguments[I];for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&(M[b]=c[b])}return M},v.apply(this,arguments)}function m(M,I){if(M==null)return{};var c={},b=Object.keys(M),f,te;for(te=0;te<b.length;te++)f=b[te],!(I.indexOf(f)>=0)&&(c[f]=M[f]);return c}const h=new Map,_=new WeakMap;let N=0,F=d.j==452?void 0:null;function L(M){F=M}function P(M){return M?(_.has(M)||(N+=1,_.set(M,N.toString())),_.get(M)):"0"}function j(M){return Object.keys(M).sort().filter(I=>M[I]!==void 0).map(I=>`${I}_${I==="root"?P(M.root):M[I]}`).toString()}function p(M){let I=j(M),c=h.get(I);if(!c){const b=new Map;let f;const te=new IntersectionObserver(x=>{x.forEach(J=>{var se;const Ee=J.isIntersecting&&f.some(_e=>J.intersectionRatio>=_e);M.trackVisibility&&typeof J.isVisible=="undefined"&&(J.isVisible=Ee),(se=b.get(J.target))==null||se.forEach(_e=>{_e(Ee,J)})})},M);f=te.thresholds||(Array.isArray(M.threshold)?M.threshold:[M.threshold||0]),c={id:I,observer:te,elements:b},h.set(I,c)}return c}function A(M,I,c={},b=F){if(typeof window.IntersectionObserver=="undefined"&&b!==void 0){const se=M.getBoundingClientRect();return I(b,{isIntersecting:b,target:M,intersectionRatio:typeof c.threshold=="number"?c.threshold:0,time:0,boundingClientRect:se,intersectionRect:se,rootBounds:se}),()=>{}}const{id:f,observer:te,elements:x}=p(c);let J=x.get(M)||[];return x.has(M)||x.set(M,J),J.push(I),te.observe(M),function(){J.splice(J.indexOf(I),1),J.length===0&&(x.delete(M),te.unobserve(M)),x.size===0&&(te.disconnect(),h.delete(f))}}const T=null;function C(M){return typeof M.children!="function"}class O extends S.Component{constructor(I){super(I),this.node=null,this._unobserveCb=null,this.handleNode=c=>{this.node&&(this.unobserve(),!c&&!this.props.triggerOnce&&!this.props.skip&&this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=c||null,this.observeNode()},this.handleChange=(c,b)=>{c&&this.props.triggerOnce&&this.unobserve(),C(this.props)||this.setState({inView:c,entry:b}),this.props.onChange&&this.props.onChange(c,b)},this.state={inView:!!I.initialInView,entry:void 0}}componentDidUpdate(I){(I.rootMargin!==this.props.rootMargin||I.root!==this.props.root||I.threshold!==this.props.threshold||I.skip!==this.props.skip||I.trackVisibility!==this.props.trackVisibility||I.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:I,root:c,rootMargin:b,trackVisibility:f,delay:te,fallbackInView:x}=this.props;this._unobserveCb=A(this.node,this.handleChange,{threshold:I,root:c,rootMargin:b,trackVisibility:f,delay:te},x)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!C(this.props)){const{inView:te,entry:x}=this.state;return this.props.children({inView:te,entry:x,ref:this.handleNode})}const I=this.props,{children:c,as:b}=I,f=m(I,T);return React.createElement(b||"div",v({ref:this.handleNode},f),c)}}function U({threshold:M,delay:I,trackVisibility:c,rootMargin:b,root:f,triggerOnce:te,skip:x,initialInView:J,fallbackInView:se,onChange:Ee}={}){var _e;const[G,W]=S.useState(null),Y=S.useRef(),[Z,ie]=S.useState({inView:!!J,entry:void 0});Y.current=Ee,S.useEffect(()=>{if(x||!G)return;let me;return me=A(G,(Se,he)=>{ie({inView:Se,entry:he}),Y.current&&Y.current(Se,he),he.isIntersecting&&te&&me&&(me(),me=void 0)},{root:f,rootMargin:b,threshold:M,trackVisibility:c,delay:I},se),()=>{me&&me()}},[Array.isArray(M)?M.toString():M,G,f,b,te,x,c,se,I]);const ee=(_e=Z.entry)==null?void 0:_e.target;S.useEffect(()=>{!G&&ee&&!te&&!x&&ie({inView:!!J,entry:void 0})},[G,ee,te,x,J]);const ce=[W,Z.inView,Z.entry];return ce.ref=ce[0],ce.inView=ce[1],ce.entry=ce[2],ce}},6872:(re,o,d)=>{d.d(o,{Z:()=>S});function S(v,m,h){return m in v?Object.defineProperty(v,m,{value:h,enumerable:!0,configurable:!0,writable:!0}):v[m]=h,v}},8677:(re,o,d)=>{d.d(o,{Z:()=>S});function S(){return S=Object.assign?Object.assign.bind():function(v){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(v[_]=h[_])}return v},S.apply(this,arguments)}},7515:(re,o,d)=>{if(d.d(o,{Z:()=>v}),d.j==452)var S=d(8952);function v(m,h){m.prototype=Object.create(h.prototype),m.prototype.constructor=m,(0,S.Z)(m,h)}},8952:(re,o,d)=>{d.d(o,{Z:()=>S});function S(v,m){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,N){return _.__proto__=N,_},S(v,m)}}}]);
