(function(){"use strict";if(/@|%40/.test(document.location.href))return!1;const r={...window.utag_data||{},get country(){return window.location.pathname.split("/")[1]},get language(){return window.location.pathname.split("/")[2]},get site_level_1(){return window.location.pathname.split("/")[3]},get site_level_2(){return window.location.pathname.split("/")[4]}};let d={_snaptr:null,pixelType:null,country:null,countrySettings:{ae:["f1831105-7ce8-484a-9eec-6e839c96e3e2","AED","img"],fr:["1a6859cb-2f9c-46af-8428-34fa031bf0e3","EUR","img"],kw:["d7d15c8b-4eed-4b2b-9362-7d9515b0eee0","KWD","img"],om:["f1831105-7ce8-484a-9eec-6e839c96e3e2","OMR","img"],qa:["f1831105-7ce8-484a-9eec-6e839c96e3e2","QAR","img"],sa:["cb84830e-787b-4241-8670-a289402191d9","SAR","script"],bh:["b5dbff32-1ecb-4d2e-b4e5-39048eb4e6fe","BHD","script"],us:["9b409ccc-202d-434f-af67-5210c7df0528","USD","img"]},snapchatVars:{currency:"e_cur",item_ids:"e_iids",number_items:"e_ni",price:"e_pr",item_category:"e_ic",transaction_id:"e_tid"},get id(){return this.countrySettings[this.country][0]},get currency(){return this.countrySettings[this.country][1]},getPixelType:function(e){return this.countrySettings[e||this.country][2]},init:function(e=r.country,a=this.getPixelType(e)){this.country=e,this.pixelType=a,this.pixelType==="script"?function(i,c,t){if(!i.snaptr){var n=i.snaptr=function(){n.handleRequest?n.handleRequest.apply(n,arguments):n.queue.push(arguments)};n.queue=[];var o="script",s=c.createElement(o);s.async=!0,s.src=t,s.onload=function(){this._snaptr=i.snaptr,this._snaptr("init",this.id),this.initEventTracking()}.bind(d),s.onerror=function(){this.pixelType="img",this.initEventTracking()}.bind(d);var u=c.getElementsByTagName(o)[0];u.parentNode.insertBefore(s,u)}}(window,document,"https://sc-static.net/scevent.min.js"):this.initEventTracking()},send:function(e,a={}){if(!this.id)return console.error("Failed to send Snapchat event: Snapchat pixel id is not defined.");if(this.pixelType==="script"&&typeof this._snaptr=="function")this._snaptr("track",e,a);else{let i={};Object.entries(this.snapchatVars).forEach(([n,o])=>{a[n]&&(i[o]=a[n])});let t=new URLSearchParams(i).toString();t&&(t="&"+t),new Image().src=`https://tr.snapchat.com/p?pid=${this.id}&ev=${e}&v=2.3&rand=${this.getRand()}&pl=${window.location.href}${t}`}},getRand:function(){return Date.now()*Math.floor(Math.random()*1e4)},getTotalQuantity:function(e=[]){return e.length?e.reduce((a,{quantity:i=1})=>Number(a)+Number(i),0):1},getTotalPrice:function(e=[]){return e.reduce((i,c)=>Number(i)+Number(c?.price||0)*Number(c?.quantity||0),0).toFixed(2)},trackPageView:function(){this.send("PAGE_VIEW")},trackAddToCart:function(){this.trackEvent("add_to_cart",e=>{const{event_label:a,params:i={},custom:c={}}=e,{currency:t,items:n=[]}=i,{cart_value_local:o}=c;let s={currency:t||this.currency,item_ids:n?.length?n.map(u=>u.id):void 0,item_category:a==="pip"?`${r?.category_local.toLowerCase()||""} - ${r?.category}`:void 0,number_items:n?.length?this.getTotalQuantity(n):void 0,price:o||n?.length?this.getTotalPrice(n):void 0};return r?.page_category_level==="chapter"&&a==="plp"&&(s.item_category=r?.site_level_2?`${r.site_level_2?.replace(/-/g," ")}`:void 0),{eventName:"ADD_CART",payload:s}})},trackViewItem:function(){if(r?.page_type==="product information page"){let e={item_ids:r?.product_ids?.[0],item_category:`${r?.category_local.toLowerCase()||""} - ${r?.category}`};this.send("VIEW_CONTENT",e)}},trackPurchase:function(){this.trackEvent("purchase",e=>{const{params:a={},custom:i={}}=e,{currency:c,items:t,value:n,transaction_id:o}=a,{cart_quantity:s}=i;let u={currency:c||this.currency,item_ids:t?.length?t.map(l=>l.id):void 0,number_items:s||t?.length?this.getTotalQuantity(t):void 0,price:n||t.length?this.getTotalPrice(t):void 0,transaction_id:o};return{eventName:"PURCHASE",payload:u}})},trackEvent:function(e,a){window.addEventListener(e,({detail:i={}})=>{let{eventName:c,payload:t={}}=a(i)||{};c&&this.send(c,t)})},trackLocal:function(){if(window._snapLocal)window._snapLocal(this,r);else{let e=()=>{window?._snapLocal?.(this,r),window.removeEventListener("_snapLocalLoaded",e)};window.addEventListener("_snapLocalLoaded",e)}},initEventTracking:function(){this.trackPageView(),this.trackAddToCart(),r.site_level_1==="p"?this.trackViewItem():window.Checkout&&this.trackPurchase(),this.trackLocal()}};d.init()})();
